"use strict";(self.webpackChunkapplication_services_ui=self.webpackChunkapplication_services_ui||[]).push([[7941],{76166:(e,t,a)=>{a.d(t,{Z:()=>Q});var s=a(85893),n=a(93264),i=a(73685),o=a(16610),r=a(3973),c=a(70655),d=a(98823),l=a(37687),u=a(18955),p=a(73322),m=a(9903),v=a(49291),f=a(50834),h=a(15847),g=a(21242);const k=(0,n.lazy)((()=>a.e(8571).then(a.bind(a,58571)))),b=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,37272)))),y=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,74856)))),P=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,8172)))),S=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,15113)))),x=(0,n.lazy)((()=>a.e(6264).then(a.bind(a,56264)))),j=(0,n.lazy)((()=>a.e(4809).then(a.bind(a,54809)))),w=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,75401)))),A=(0,n.lazy)((()=>a.e(9132).then(a.bind(a,9132)))),_=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,44735)))),C=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,83857)))),I=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,60766)))),O=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,42789)))),T=(0,n.lazy)((()=>a.e(1132).then(a.bind(a,31132)))),R=(0,n.lazy)((()=>a.e(4880).then(a.bind(a,54880)))),B=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,15822)))),E=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,23456)))),D=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,92225)))),H=(0,n.lazy)((()=>a.e(2352).then(a.bind(a,82352)))),M=()=>(0,s.jsx)(i.Redirect,{to:"/streams/kafkas"}),G=[{component:()=>(0,s.jsx)(i.Redirect,{to:"/overview"}),exact:!0,label:"Overview",path:"/",title:"Overview | Red Hat OpenShift Application Services"},{component:C,exact:!0,label:"Overview",path:"/overview",title:"Overview | Red Hat OpenShift Application Services"},{component:b,exact:!0,label:"API Management",path:"/api-management",title:"API Management | Red Hat OpenShift Application Services"},{component:w,exact:!0,label:"Data Science",path:"/data-science",title:"Data Science | Red Hat OpenShift Application Services"},{component:I,exact:!0,label:"Learning Resources | Red Hat OpenShift Application Services",path:"/learning-resources",title:"Learning Resources | Red Hat OpenShift Application Services",devPreview:!1},{component:M,exact:!0,label:"Streams for Apache Kafka",path:"/streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:A,exact:!0,label:"Streams for Apache Kafka",path:"/streams/overview",title:"Overview | Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:_,exact:!0,label:"Streams for Apache Kafka",path:"/streams/kafkas",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas",devPreview:!1},{component:D,exact:!0,label:"Service Registry",path:"/service-registry",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:()=>(0,s.jsx)(i.Redirect,{to:"/service-accounts"}),exact:!0,label:"Service Accounts",path:"/streams/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:()=>(0,s.jsx)(i.Redirect,{to:"/learning-resources"}),label:"QuickStarts for Red Hat OpenShift Application Services",path:"/streams/resources",title:"QuickStarts for Red Hat OpenShift Application Services",devPreview:!0},{component:v.aH,label:"Streams for Apache Kafka",path:"/streams/kafkas/:id",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas/:id",devPreview:!1},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:O,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/rules",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:T,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/roles",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:R,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/settings",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:y,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:S,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId/versions/:version",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:x,exact:!0,label:"API Designer",path:"/api-designer",title:"API Designer | Red Hat OpenShift Application Services",basename:"/api-designer",devPreview:!0},{component:j,exact:!0,label:"Service Registry",path:"/api-designer/designs/:designId/editor",title:"API Designer | Red Hat OpenShift Application Services",basename:"/api-designer",devPreview:!0},{component:E,exact:!1,label:"COS",path:"/connectors",title:"Connectors | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/connectors`,devPreview:!0},{component:B,exact:!0,label:"Service Accounts",path:"/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:H,exact:!1,label:"Smart Events",path:"/smart-events",title:"Smart Events | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/smart-events`,devPreview:!0},{component:M,exact:!0,label:"Streams for Apache Kafka",path:"/openshift-streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"}],z=e=>{var{component:t,title:a,basename:o,devPreview:r}=e,l=(0,c._T)(e,["component","title","basename","devPreview"]);const{t:p}=(0,h.useTranslation)(),v=(0,i.useHistory)();(0,m.j)(a);const k=(0,n.useCallback)((()=>o||""),[o]),b=(0,n.useCallback)((()=>v.push("/")),[v]),y=(0,n.useCallback)((e=>(0,s.jsx)(d.ErrorBoundary,Object.assign({fallbackRender:({error:e})=>"404"===e.message?(0,s.jsx)(u.AppServicesPageNotFound,{}):(0,s.jsx)(u.AppServicesEmptyState,Object.assign({emptyStateProps:{variant:u.AppServicesEmptyStateVariant.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:p("common:something_went_wrong")},emptyStateBodyProps:{body:p("common:unexpected_error")}},{children:(0,s.jsx)(g.Button,Object.assign({onClick:b},{children:p("common:return_to_home_page")}))}))},{children:(0,s.jsx)(u.DevelopmentPreview,Object.assign({show:r},{children:(0,s.jsx)(f.BasenameContext.Provider,Object.assign({value:{getBasename:k}},{children:(0,s.jsx)(t,Object.assign({},l,e))}))}))}))),[t,r,k,b,l,p]);return(0,s.jsx)(i.Route,Object.assign({render:y},l))},$=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.Suspense,Object.assign({fallback:(0,s.jsx)(u.AppServicesLoading,{})},{children:(0,s.jsxs)(i.Switch,{children:[(0,p.S)(G).map(((e,t)=>{var{path:a,exact:n,component:i,title:o,isAsync:r}=e,d=(0,c._T)(e,["path","exact","component","title","isAsync"]);return(0,s.jsx)(z,Object.assign({path:a,exact:n,component:i,title:o,isAsync:r},d),t)})),(0,s.jsx)(p.c,{title:"404 Page Not Found"})]})})),(0,s.jsx)(k,{})]});var K=a(68698),L=a(40493);const Q=(0,o.connect)()((()=>{const e=(0,L.pp)(),t=(0,i.useHistory)(),a=(0,n.useCallback)((()=>{const e="overview",a=t.location.pathname.split("/");return a.length>1?""===a[1]?e:"openshift-streams"===a[1]?"streams":a[1]:e}),[t]);return(0,n.useEffect)((()=>{e.chrome.init();const s=a();e.chrome.identifyApp(s);const n=e.chrome.on("APP_NAVIGATION",(e=>{var a,s;if(null===(a=null==e?void 0:e.domEvent)||void 0===a?void 0:a.href){const a=null===(s=null==e?void 0:e.domEvent)||void 0===s?void 0:s.href.replace("/application-services","/").replace(/^\/\//gm,"/");t.push(a)}}));return()=>{n()}}),[a,t,e.chrome]),(0,s.jsxs)(K.Gg,{children:[(0,s.jsx)(r.NotificationsPortal,{}),(0,s.jsx)(g.Page,{children:(0,s.jsx)($,{})})]})}))},78866:(e,t,a)=>{a.d(t,{I:()=>l});var s=a(70655),n=a(85893),i=a(93264),o=a(50834),r=a(68698),c=a(18955);const d=()=>{const e=(0,i.useRef)(!1);return(0,i.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e};const l=(0,i.memo)((({scope:e,module:t,render:a,fallback:o})=>{console.log("Dynamic federated module",e,t);const c=d(),{getModuleInfo:l,modules:p}=(0,r.N)(),[m,v]=(0,i.useState)();return(0,i.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){const t=yield l(p[e].basePath,e,p[e].fallbackBasePath);c.current&&v(t)}))}),[e,p,l,c]),void 0!==m?(0,n.jsx)(u,{scope:e,module:t,render:a,moduleInfo:m}):void 0!==o?(0,n.jsx)(n.Fragment,{children:o}):null}),((e,t)=>e.scope===t.scope&&e.module===t.module)),u=({moduleInfo:e,fallback:t,scope:r,render:l,module:u})=>{const{ready:p,failed:m}=(e=>{const t=d(),[a,s]=(0,i.useState)(!1),[n,o]=(0,i.useState)(!1);return(0,i.useEffect)((()=>{let a;if(t.current){if(!e)return void o(!0);a=document.createElement("script"),a.src=e,a.type="text/javascript",a.async=!0,s(!1),o(!1),a.onload=()=>{console.log(`Dynamic federated module Loaded: ${e}`),s(!0)},a.onerror=()=>{console.error(`Dynamic federated module Error: ${e}`),s(!1),o(!0)},document.head.appendChild(a)}return()=>{a&&(console.log(`Dynamic federated module Removed: ${e}`),document.head.removeChild(a))}}),[t,e]),{ready:a,failed:n}})(e.entryPoint);if(p&&!m){const t=(0,i.lazy)(function(e,t){return()=>(0,s.mG)(this,void 0,void 0,(function*(){yield a.I("default");const s=window[e];yield s.init(a.S.default);const n=(yield s.get(t))();return console.debug(`loaded ${t} from ${e}`),n}))}(r,u)),d=()=>e.basePath;return(0,n.jsx)(o.AssetsContext.Provider,Object.assign({value:{getPath:d}},{children:(0,n.jsx)(i.Suspense,Object.assign({fallback:(0,n.jsx)(c.AppServicesLoading,{})},{children:l(t)}))}))}return t?(0,n.jsx)(n.Fragment,{children:t}):null}},25458:(e,t,a)=>{a.d(t,{j:()=>d,w:()=>l});var s=a(70655),n=a(85893),i=a(93264),o=a(67542),r=a(50834),c=a(34199);const d=()=>{const e=(0,r.useConfig)(),t=(0,r.useAuth)(),[a,n]=(0,i.useState)(),[d,l]=(0,i.useState)();(0,i.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),s=new c.PrincipalApi({accessToken:a,basePath:null==e?void 0:e.rbac.basePath});try{const e=yield s.listPrincipals(-1).then((e=>e.data.data.map((e=>({id:e.username,principalType:r.PrincipalType.UserAccount,displayName:`${e.first_name} ${e.last_name}`,emailAddress:e.email})))));l(e)}catch(e){}}}))}),[t,e]),(0,i.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),s=new o.SecurityApi({accessToken:a,basePath:e.kas.apiBasePath}),i=yield s.getServiceAccounts().then((e=>e.data.items.map((e=>({id:e.client_id,displayName:e.name,principalType:r.PrincipalType.ServiceAccount})))));n(i)}}))}),[t,e]);return{getAllPrincipals:(0,i.useCallback)((()=>{let e=[];return void 0!==d&&void 0!==a&&(e=e.concat(d)),void 0!==a&&(e=e.concat(a)),e}),[a,d]),getAllUserAccounts:(0,i.useCallback)((()=>d||[]),[d]),getAllServiceAccounts:(0,i.useCallback)((()=>a||[]),[a])}},l=({children:e})=>{const t=d();return(0,n.jsx)(r.PrincipalsContext.Provider,Object.assign({value:t},{children:e}))}},68698:(e,t,a)=>{a.d(t,{IG:()=>r.I,Gg:()=>m,A6:()=>h,N:()=>v,fh:()=>o,jg:()=>f.j});var s=a(93264),n=a(73685),i=a(85169);function o(){const e=(0,n.useHistory)(),t=(0,i.a)(),[a,o]=(0,s.useState)(!1),[r,c]=(0,s.useState)(void 0),d=(0,s.useCallback)((e=>{e&&c(e),o(!0)}),[]),l=(0,s.useCallback)((()=>{c(void 0),o(!1)}),[]);return{isDrawerOpen:a,drawerActiveTab:r,setDrawerActiveTab:c,openDrawer:d,closeDrawer:l,tokenEndPointUrl:null==t?void 0:t.tokenEndPointUrl,onDeleteInstance:()=>{e.push("/streams/kafkas")}}}var r=a(78866),c=a(70655),d=a(85893),l=a(50834),u=a(18955);const p=(0,s.createContext)(void 0),m=({children:e})=>{const t=(0,s.useRef)({}),a=(0,l.useConfig)();if(void 0===a)return(0,d.jsx)(u.AppServicesLoading,{});return(0,d.jsx)(p.Provider,Object.assign({value:{modules:a.federatedModules,getModuleInfo:(e,a,s)=>(0,c.mG)(void 0,void 0,void 0,(function*(){if(void 0!==t.current[a])return t.current[a];const n=yield((e,t,a)=>(0,c.mG)(void 0,void 0,void 0,(function*(){const s=e=>(0,c.mG)(void 0,void 0,void 0,(function*(){const a=`${e}/fed-mods.json?ts=${Date.now()}`,s=yield fetch(a);return yield s.json().then((e=>e)).then((e=>e[t])).then((e=>e.entry[0])).then((t=>t.startsWith(e)?{entryPoint:t,basePath:e}:{entryPoint:`${e}${t}`,basePath:e}))}));try{return yield s(e)}catch(e){if(a)try{return yield s(a)}catch(e){return}}})))(e,a,s);return void 0!==n&&(t.current[a]=n),n}))}},{children:e}))},v=()=>{const e=(0,s.useContext)(p);if(void 0===e)throw new Error("must be used inside FederatedModuleContext provider");return e};var f=a(25458);const h=({children:e})=>(0,d.jsx)(r.I,{scope:"kas",module:"./KasModalLoader",fallback:null,render:t=>(0,d.jsx)(t,{children:e})})},40493:(e,t,a)=>{a.d(t,{aC:()=>h,pp:()=>f,UI:()=>v,fA:()=>c,gI:()=>g});var s=a(70655),n=a(93264),i=a(50834),o=a(42859),r=a(15529);const c=e=>{const t=(0,i.useConfig)(),a=(0,i.useAuth)(),c=(0,r.t)(),[d,l]=(0,n.useState)();(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(!d){const e=yield null==a?void 0:a.ams.getToken(),s=new o.AppServicesApi({accessToken:e,basePath:(null==t?void 0:t.ams.apiBasePath)||""});yield s.apiAccountsMgmtV1CurrentAccountGet().then((e=>{var t,a;const s=null===(a=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.organization)||void 0===a?void 0:a.id;l(s)}))}}))}),[t,a,d]);const u=(0,n.useCallback)((()=>{const t=c.kafka.ams.quotaProductId,a=c.kafka.ams.trialQuotaProductId,s=c.kafka.ams.resourceName,n=c.serviceRegistry.ams.quotaProductId,o=c.serviceRegistry.ams.trialQuotaProductId,r=c.serviceRegistry.ams.resourceName;if(e===i.ProductType.kas)return{quotaProductId:t,trialQuotaProductId:a,resourceName:s,quotaKey:i.QuotaType.kas,trialQuotaKey:i.QuotaType.kasTrial};if(e===i.ProductType.srs)return{quotaProductId:n,trialQuotaProductId:o,resourceName:r,quotaKey:i.QuotaType.srs,trialQuotaKey:i.QuotaType.srsTrial};throw new Error(`getQuotaTypesByProductId error, unrecognized productId ${e}`)}),[c,e]),p=(0,n.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){var e,s,n,i;const r=new Map,c={loading:!0,isServiceDown:!1,data:void 0};if(d){const{quotaProductId:l,trialQuotaProductId:p,resourceName:m,quotaKey:v,trialQuotaKey:f}=u()||{},h=yield null==a?void 0:a.ams.getToken(),g=new o.AppServicesApi({accessToken:h,basePath:(null==t?void 0:t.ams.apiBasePath)||""});try{const t=yield g.apiAccountsMgmtV1OrganizationsOrgIdQuotaCostGet(d,void 0,!0),a=null===(s=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.items)||void 0===s?void 0:s.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===m&&e.product===l))})),o=null===(i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.items)||void 0===i?void 0:i.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===m&&e.product===p))}));if(a&&a.allowed>0){const e=(null==a?void 0:a.allowed)-(null==a?void 0:a.consumed);null==r||r.set(v,{allowed:null==a?void 0:a.allowed,consumed:null==a?void 0:a.consumed,remaining:e<0?0:e})}o&&(null==r||r.set(f,{allowed:null==o?void 0:o.allowed,consumed:null==o?void 0:o.consumed,remaining:(null==o?void 0:o.allowed)-(null==o?void 0:o.consumed)})),c.loading=!1,c.data=r}catch(e){c.loading=!1,c.isServiceDown=!0,console.error(e)}}return c}))),[a,t,u,d]);return{orgId:d,getQuota:p}};var d,l=a(73685),u=a(99751);!function(e){e[e.IDLE=0]="IDLE",e[e.FETCHING=1]="FETCHING",e[e.FETCHED=2]="FETCHED",e[e.FETCH_ERROR=3]="FETCH_ERROR"}(d||(d={}));const p=(e,t,a)=>({key:"selfTermsReview",fetch:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){const s=yield null==t?void 0:t.ams.getToken(),n=new o.AppServicesApi({accessToken:s,basePath:(null==e?void 0:e.ams.apiBasePath)||""});return(yield n.apiAuthorizationsV1SelfTermsReviewPost({event_code:a.eventCode,site_code:a.siteCode})).data}))}),m=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),v=e=>{const t=(e=>{const t=(0,i.useConfig)(),a=(0,i.useAuth)(),o=(0,n.useRef)(),r=(0,n.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==o.current)return o.current;const s=yield p(t,a,e).fetch().then((e=>e));return o.current=s,s}))),[a,t,e]);return(0,n.useEffect)((()=>{r()}),[t,a,r]),r})(e),a=(0,l.useLocation)();return{shouldOpenCreateModal:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){if("true"===(0,u.parse)(a.search).create){if(!(yield t()).terms_required)return!0}return!1})),preCreateInstance:e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const a=yield t();if(a.terms_available||a.terms_required){if(void 0===a.redirect_url)throw new Error("terms must be signed but there is no terms url");const e=(0,u.stringifyUrl)({url:window.location.href,query:{create:"true"}}),t=((e,t,a)=>`${e}&${m({redirect:t,cancelRedirect:a})}`)(a.redirect_url,e,window.location.href);return{shouldOpenCreateModal:!1,url:t}}return{shouldOpenCreateModal:e,url:void 0}}))}},f=()=>{const e=window.insights;if(void 0===e)throw new Error("must be used inside an initialized insights context");return e},h=()=>{const e=(0,i.useConfig)(),t=f();if(void 0===e||void 0===t.chrome.auth)throw new Error("useAuth must be used inside a config provider, and insights auth");const a=t.chrome.auth,n=a.getToken;return{getUsername:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield a.getUser()).identity.user.username})),isOrgAdmin:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield a.getUser()).identity.user.is_org_admin})),kafka:{getToken:n},kas:{getToken:n},ams:{getToken:n},srs:{getToken:n},apicurio_registry:{getToken:n},smart_events:{getToken:n}}},g=()=>{const e=(0,i.useConfig)();return(0,n.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield fetch(`${e.kas.apiBasePath}/api/kafkas_mgmt/v1/sso_providers`)).json()}))),[e.kas.apiBasePath])}},37272:(e,t,a)=>{a.r(t),a.d(t,{APIManagementOverviewPage:()=>i,default:()=>o});var s=a(85893),n=a(18955);const i=()=>(0,s.jsx)(n.APIManagementPage,{}),o=i},23456:(e,t,a)=>{a.r(t),a.d(t,{CosPage:()=>c,default:()=>d});var s=a(85893),n=a(68698),i=a(3241),o=a(50834),r=a(18955);const c=()=>{const e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(i.d,{}):(0,s.jsx)(n.IG,{scope:"cos",fallback:(0,s.jsx)(r.AppServicesLoading,{}),module:"./OpenshiftManagedConnectors",render:e=>(0,s.jsx)(e,{})})},d=c},75401:(e,t,a)=>{a.r(t),a.d(t,{DataScienceOverViewPage:()=>d,default:()=>l});var s=a(70655),n=a(85893),i=a(18955);const o="managed-odh";function r(e){return(0,s.mG)(this,void 0,void 0,(function*(){yield window.insights.chrome.auth.getUser();const t=yield window.insights.chrome.auth.getToken();return fetch(`https://api.openshift.com/api/clusters_mgmt/v1/clusters/${e.cluster_id}/addon_inquiries?search=id='managed-odh`,{method:"get",headers:{Authorization:`Bearer ${t}`}}).then((e=>e.json())).then((({data:t})=>Object.assign({clusterId:e.cluster_id},t)))}))}function c(){return(0,s.mG)(this,void 0,void 0,(function*(){yield window.insights.chrome.auth.getUser();const e=yield window.insights.chrome.auth.getToken(),{items:t}=yield fetch("https://api.openshift.com/api/accounts_mgmt/v1/subscriptions?search=plan_id='MOA'\n  and status IN ('Active', 'Reserved')&fetchMetrics=true",{method:"get",headers:{Authorization:`Bearer ${e}`}}).then((e=>e.json())),a=t.filter((e=>function(e){var t;return!!(null===(t=e.metrics)||void 0===t?void 0:t.find(((e={nodes:{compute:0}})=>e&&e.nodes&&e.nodes.compute>=2)))}(e))),s=(yield Promise.allSettled(a.map(r))).filter((({status:e})=>"fulfilled"===e)).reduce(((e,{value:t})=>{const a=function({clusterId:e,items:t}){const a=t.filter((({id:e})=>e===o));return{clusterId:e,hasAddon:!!a.find((e=>{var t;return null===(t=null==e?void 0:e.requirements)||void 0===t?void 0:t.every((({enabled:e})=>e))})),canInstallAddon:!!a.find((e=>{var t;return null===(t=null==e?void 0:e.requirements)||void 0===t?void 0:t.every((({status:{fulfilled:e}})=>e))}))}}(t);return Object.assign(Object.assign({},e),{[a.clusterId]:a})}),{});return{installableClusters:a.filter((({cluster_id:e})=>{var t;return null===(t=s[e])||void 0===t?void 0:t.canInstallAddon})),clusters:t}}))}const d=()=>(0,n.jsx)(i.DataSciencePage,{loadClusters:c}),l=d},49291:(e,t,a)=>{a.d(t,{cQ:()=>m,PS:()=>M,Jh:()=>p,EP:()=>d,A:()=>u,aH:()=>E,nT:()=>c,Fn:()=>r,dS:()=>l});var s=a(85893),n=a(70655),i=a(68698);const o=e=>{var{module:t}=e,a=(0,n._T)(e,["module"]);return(0,s.jsx)(i.IG,{"data-ouia-app-id":"dataPlane-streams",scope:"kafka",module:t,render:e=>(0,s.jsx)(e,Object.assign({},a))})},r=e=>(0,s.jsx)(o,Object.assign({module:"./Topics"},e)),c=e=>(0,s.jsx)(o,Object.assign({module:"./TopicDetails"},e)),d=e=>(0,s.jsx)(o,Object.assign({module:"./CreateTopic"},e)),l=e=>(0,s.jsx)(o,Object.assign({module:"./UpdateTopic"},e)),u=e=>(0,s.jsx)(o,Object.assign({module:"./Dashboard"},e)),p=e=>(0,s.jsx)(o,Object.assign({module:"./ConsumerGroups"},e)),m=e=>(0,s.jsx)(o,Object.assign({module:"./AclPermissions"},e));var v=a(93264),f=a(73685),h=a(15675),g=a(67542),k=a(50834);const b=e=>{if(!e)throw new Error("kafkaRequest cannot be undefined");return e.admin_api_server_url?e.admin_api_server_url:void 0},y=()=>{const{kas:{getToken:e}}=(0,k.useAuth)(),{kas:{apiBasePath:t}}=(0,k.useConfig)();return(0,v.useCallback)(((a,s,i,o)=>(0,n.mG)(void 0,void 0,void 0,(function*(){var n,r,c;try{const d=new g.DefaultApi(new g.Configuration({accessToken:e(),basePath:t})),l=yield d.getInstanceTypesByCloudProviderAndRegion(a,s);if(!(null===(n=null==l?void 0:l.data)||void 0===n?void 0:n.instance_types))throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${s} ${i}, no instance_types returned`);const u=null===(c=null===(r=null==l?void 0:l.data)||void 0===r?void 0:r.instance_types.find((e=>e.id===o)))||void 0===c?void 0:c.sizes,p=null==u?void 0:u.find((e=>e.id===i));if(!p)throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${s} ${i}, can't find a size matching ${i}`);return p}catch(e){throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${s} ${i}: ${e}`)}}))),[e,t])};var P=a(25458),S=a(18955),x=a(17779),j=a(73322),w=a(9903);const A=[{component:h.Fn,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.nT,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.EP,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/create",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.dS,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/update/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/dashboard",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.Jh,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/consumer-groups",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.cQ,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/acls",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:e=>(0,s.jsx)(o,Object.assign({module:"./Settings"},e)),exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/settings",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0}],_=(0,j.S)(A),C=e=>{var{component:t,InstanceDrawer:a,isAsync:i=!1,title:o,underlyingProps:r,url:c}=e,d=(0,n._T)(e,["component","InstanceDrawer","isAsync","title","underlyingProps","url"]);(0,w.j)(o);const l=()=>c;return(0,s.jsx)(f.Route,Object.assign({render:e=>(0,s.jsx)(k.BasenameContext.Provider,Object.assign({value:{getBasename:l}},{children:(0,s.jsx)(t,Object.assign({},r,d,e))}))},d))},I=e=>{var{InstanceDrawer:t}=e,a=(0,n._T)(e,["InstanceDrawer"]);const o=(0,f.useRouteMatch)(),{kafka:r}=a,c=(0,i.fh)(),d=(0,v.useCallback)(((e,t)=>{e?c.openDrawer(t):c.closeDrawer()}),[c]);return(0,s.jsx)(t,Object.assign({"data-ouia-app-id":"dataPlane-streams",drawerInstance:r,setDrawerInstance:()=>!1},c,{children:(0,s.jsxs)(f.Switch,{children:[_.map(((e,i)=>{var{path:r,exact:c,component:l,title:u,isAsync:p}=e,m=(0,n._T)(e,["path","exact","component","title","isAsync"]);const v=`${o.path}${r}`;return console.log(`Creating route for ${v}`),(0,s.jsx)(C,Object.assign({path:v,exact:c,component:l,title:u,isAsync:p,underlyingProps:Object.assign(Object.assign({},a),{handleInstanceDrawer:d}),url:o.url,InstanceDrawer:t},m),i)})),(0,s.jsx)(j.c,{title:"404 Page Not Found"})]})}))};var O=a(74359);function T({accessToken:e,basePath:t}){return(0,n.mG)(this,void 0,void 0,(function*(){const a=new O.TopicsApi(new g.Configuration({accessToken:e,basePath:t}));return((yield a.getTopics(void 0,100,100,void 0,void 0,void 0,void 0)).data.items||[]).map((e=>e.name))}))}function R({accessToken:e,basePath:t,kafkaId:a,duration:s,interval:i,selectedTopic:o}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=new g.DefaultApi(new g.Configuration({accessToken:e,basePath:t})),r=((yield n.getMetricsByRangeQuery(a,s,i,["kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m","kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m","kafka_topic:kafka_log_log_size:sum","kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name))),c=r.filter((e=>{var t;return void 0===o||(null===(t=e.metric)||void 0===t?void 0:t.topic)===o})),d=Array.from(new Set(r.map((e=>e.metric.topic)))),l={},u={},p={},m={};return c.forEach((e=>{const{__name__:t,topic:a}=e.metric;function s(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m":s(l);break;case"kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m":s(u);break;case"kafka_topic:kafka_log_log_size:sum":!function(){const t=p[a]||{};e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0))),p[a]=t}();break;case"kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m":s(m)}})),{metricsTopics:d,bytesOutgoing:u,bytesIncoming:l,bytesPerPartition:p,incomingMessageRate:m}}))}const B=({kafkaId:e,owner:t,reauthenticationEnabled:a})=>{const i=(0,k.useAuth)(),o=(0,k.useConfig)(),r=(0,v.useCallback)((a=>function({kafkaId:e,owner:t,settings:a,accessToken:s,basePath:i}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=new g.DefaultApi(new g.Configuration({accessToken:s,basePath:i}));return(yield n.updateKafkaById(e,{owner:t,reauthentication_enabled:a})).data.reauthentication_enabled}))}({kafkaId:e,basePath:o.kas.apiBasePath,accessToken:null==i?void 0:i.kas.getToken(),owner:t,settings:a})),[o.kas.apiBasePath,null==i?void 0:i.kas,t,e]);return(0,s.jsx)(S.Settings,{onSubmitReAuthentication:r,reauthenticationEnabled:a})},E=()=>{const e=(0,k.useConfig)(),{id:t}=(0,f.useParams)(),a=(e=>{const{kas:{apiBasePath:t}}=(0,k.useConfig)(),{kas:{getToken:a}}=(0,k.useAuth)(),[s,i]=(0,v.useState)(),o=y(),r=(0,v.useCallback)((e=>(0,n.mG)(void 0,void 0,void 0,(function*(){i(void 0);const s=new g.DefaultApi({accessToken:a,basePath:t});try{const t=yield s.getKafkaById(e),{cloud_provider:a,region:n,instance_type:r,size_id:c}=t.data;if(!(a&&n&&c&&r))throw new Error(`Kafka instance ${t.data.id} missing some required info: ${a}, ${n}, ${r}, ${c}`);const d=yield o(a,n,c,r);i(Object.assign(Object.assign({},t.data),{size:d}))}catch(e){i(!1)}}))),[t,o,a]);return(0,v.useEffect)((()=>{e?r(e):i(void 0)}),[r,e]),s?{kafkaDetail:s,adminServerUrl:b(s)}:s})(t);if(null==e?void 0:e.serviceDown)return(0,s.jsx)(h.dB,{});if(void 0===a)return(0,s.jsx)(S.AppServicesLoading,{});if(!1===a)throw new Error("404");return(0,s.jsx)(D,{kafka:a})},D=({kafka:e})=>(0,s.jsx)(P.w,Object.assign({kafkaInstance:e.kafkaDetail},{children:(0,s.jsx)(H,{kafka:e})})),H=({kafka:{kafkaDetail:e,adminServerUrl:t}})=>{const{kafka:{getToken:a}}=(0,k.useAuth)(),n=(0,f.useHistory)(),[o,r]=(0,v.useState)(),c=(0,v.useCallback)((e=>{r(e)}),[]),d=(0,v.useCallback)((()=>{n.push("/streams/kafkas")}),[n]),l=(0,v.useMemo)((()=>{var a;return(0,s.jsx)(h.PS,{kafkaId:e.id,kafkaAdminUrl:t,totalMaxConnections:e.size.total_max_connections||0,maxConnections:e.size.max_connection_attempts_per_sec||0,maxPartitions:e.size.max_partitions||0,kafkaStorageBytes:(null===(a=e.max_data_retention_size)||void 0===a?void 0:a.bytes)||0})}),[t,e]),u=(0,v.useMemo)((()=>(0,s.jsx)(x.vJ,{})),[]),p=(0,v.useMemo)((()=>(0,s.jsx)(B,{kafkaId:e.id,owner:e.owner,reauthenticationEnabled:e.reauthentication_enabled})),[e.id,e.owner,e.reauthentication_enabled]),m=(0,v.useMemo)((()=>({kafkaPageLink:"/streams/kafkas",kafkaInstanceLink:`/streams/kafkas/${e.id}/topics`,showMetrics:l,onError:c,kafkaName:e.name,apiBasePath:t,getToken:a,showSchemas:u,kafka:e,redirectAfterDeleteInstance:d,showSettings:p})),[t,a,e,c,d,l,u,p]);return 401===o?(0,s.jsx)(h.Xx,{}):(0,s.jsx)(i.IG,{scope:"kas",module:"./InstanceDrawer",fallback:null,render:e=>(0,s.jsx)(I,Object.assign({},m,{InstanceDrawer:e}))})},M=({kafkaId:e,kafkaAdminUrl:t,totalMaxConnections:a,maxConnections:i,maxPartitions:o,kafkaStorageBytes:r})=>{const c=(0,k.useAuth)(),d=(0,f.useHistory)(),l=(0,k.useConfig)(),{getBasename:u}=(0,k.useBasename)()||{},p=u&&u(),m=`metrics-alert-${e}`,[h,b]=(0,v.useState)(null!==localStorage.getItem(m)),y=(0,v.useCallback)((t=>(0,n.mG)(void 0,void 0,void 0,(function*(){const s=yield function({kafkaId:e,duration:t,interval:a,accessToken:s,basePath:i}){return(0,n.mG)(this,void 0,void 0,(function*(){const n=new g.DefaultApi(new g.Configuration({accessToken:s,basePath:i})),o=((yield n.getMetricsByRangeQuery(e,t,a,["kubelet_volume_stats_used_bytes","kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum","kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name&&e.metric.persistentvolumeclaim&&e.metric.persistentvolumeclaim.includes("zookeeper")))),r={},c={},d={};return o.forEach((e=>{const{__name__:t}=e.metric;function a(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kubelet_volume_stats_used_bytes":a(r);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum":a(c);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum":a(d)}})),{usedDiskSpaceMetrics:r,clientConnectionsMetrics:d,connectionAttemptRateMetrics:c,diskSpaceLimit:0,connectionRateLimit:0,connectionsLimit:0}}))}(Object.assign(Object.assign({},t),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}));return Object.assign(Object.assign({},s),{diskSpaceLimit:r/1073741824,connectionsLimit:a,connectionRateLimit:i})}))),[c,l,e,r,a,i]),P=(0,v.useCallback)((a=>(0,n.mG)(void 0,void 0,void 0,(function*(){const[s,n]=yield Promise.all([T({accessToken:null==c?void 0:c.kafka.getToken(),basePath:t}),R(Object.assign(Object.assign({},a),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}))]),{metricsTopics:i,bytesIncoming:o,bytesOutgoing:r,bytesPerPartition:d,incomingMessageRate:u}=n;return{kafkaTopics:s,metricsTopics:i,bytesIncoming:o,bytesOutgoing:r,bytesPerPartition:d,incomingMessageRate:u}}))),[null==c?void 0:c.kafka,null==c?void 0:c.kas,l.kas.apiBasePath,t,e]),x=(0,v.useCallback)((()=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=yield function({accessToken:e,basePath:t,kafkaId:a}){return(0,n.mG)(this,void 0,void 0,(function*(){const s=new g.DefaultApi(new g.Configuration({accessToken:e,basePath:t}));let n=0,i=0,o=0;return((yield s.getMetricsByInstantQuery(a,["kafka_topic:kafka_topic_partitions:sum","kafka_topic:kafka_topic_partitions:count","consumergroup:kafka_consumergroup_members:count"])).data.items||[]).forEach((({metric:e,value:t})=>{const{__name__:a}=e;switch(a){case"kafka_topic:kafka_topic_partitions:sum":i=t;break;case"kafka_topic:kafka_topic_partitions:count":n=t;break;case"consumergroup:kafka_consumergroup_members:count":o=t}})),{consumerGroups:o,topicPartitions:i,topics:n}}))}({kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()});return Object.assign(Object.assign({},t),{topicPartitionsLimit:o})}))),[null==c?void 0:c.kas,l.kas.apiBasePath,e,o]);return void 0===l?(0,s.jsx)(S.AppServicesLoading,{}):(0,s.jsx)(S.Metrics,{onCreateTopic:()=>{d.push(`${p}/topic/create`)},getTopicsMetrics:P,getKafkaInstanceMetrics:y,getMetricsKpi:x,isClosed:h,onClickClose:()=>{b(!0),localStorage.setItem(m,"true")}})}},44735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var s=a(70655),n=a(85893),i=a(93264),o=a(15847),r=a(50834),c=a(3241),d=a(68698),l=a(40493),u=a(18955),p=a(15529);const m=({Component:e})=>{const t=(0,r.useConfig)(),a=(0,p.t)(),{t:m}=(0,o.useTranslation)(),{preCreateInstance:v,shouldOpenCreateModal:f}=(0,l.UI)({eventCode:a.kafka.ams.termsAndConditionsEventCode,siteCode:a.kafka.ams.termsAndConditionsSiteCode}),{getAllUserAccounts:h}=(0,d.jg)(),[g,k]=(0,i.useState)(void 0),[b,y]=(0,i.useState)(!1),[P,S]=(0,i.useState)(""),x=(0,d.fh)(),j=(0,i.useCallback)((e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const{shouldOpenCreateModal:t,url:a}=yield v(e);return!1!==t||!a||(y(!0),S(a),!1)}))),[v,y,S]),w=(0,i.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){window.location.href=P}))),[P]);return t.serviceDown?(0,n.jsx)(c.d,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.TermsAndConditionModal,{isModalOpen:b,serviceName:m("common:kafka"),ouiaIdModal:"modal-KafkaTerms",ouiaIdButtonViewTerms:"button-view-terms",ouiaIdButtonCancel:"button-cancel",onClickViewTermsConditions:w,onCancel:()=>{y(!1)}}),(0,n.jsx)(e,Object.assign({preCreateInstance:j,shouldOpenCreateModal:f,drawerInstance:g,setDrawerInstance:k},x,{getAllUserAccounts:h}))]})},v=()=>{const{getQuota:e}=(0,l.fA)(null===r.ProductType||void 0===r.ProductType?void 0:r.ProductType.kas);return(0,n.jsx)(r.QuotaContext.Provider,Object.assign({value:{getQuota:e}},{children:(0,n.jsx)(d.IG,{scope:"kas",module:"./OpenshiftStreams",fallback:(0,n.jsx)(u.AppServicesLoading,{}),render:e=>(0,n.jsx)(m,{Component:e})})}))}},77745:(e,t,a)=>{a.r(t),a.d(t,{NotFoundPage:()=>r,default:()=>c});var s=a(85893),n=a(66260),i=a(21242),o=a(73685);const r=()=>(0,s.jsx)(i.PageSection,{children:(0,s.jsxs)(i.EmptyState,Object.assign({variant:"full"},{children:[(0,s.jsx)(i.EmptyStateIcon,{icon:n.ExclamationTriangleIcon}),(0,s.jsx)(i.Title,Object.assign({headingLevel:"h1",size:"lg"},{children:"404 Page not found"})),(0,s.jsx)(i.EmptyStateBody,{children:"We didn't find a page that matches the address you navigated to."}),(0,s.jsx)((function(){const e=(0,o.useHistory)();return(0,s.jsx)(i.Button,Object.assign({onClick:function(){e.push("/")}},{children:"Take me home"}))}),{})]}))}),c=r},83857:(e,t,a)=>{a.r(t),a.d(t,{ConnectedOverviewPage:()=>i,default:()=>o});var s=a(85893),n=a(18955);const i=()=>(0,s.jsx)(n.OverviewPageV4,{toKafkaHref:"/streams/kafkas",toServiceRegistryHref:"/service-registry",toConnectorsHref:"/connectors",toAPIDesignHref:"/api-designer"}),o=i},60766:(e,t,a)=>{a.r(t),a.d(t,{ResourcesPage:()=>o,default:()=>r});var s=a(85893),n=a(68698),i=a(18955);const o=()=>(0,s.jsx)(n.IG,{scope:"guides",module:"./QuickStartCatalog",fallback:(0,s.jsx)(i.AppServicesLoading,{}),render:e=>(0,s.jsx)(e,{})}),r=o},15822:(e,t,a)=>{a.r(t),a.d(t,{ServiceAccountsPage:()=>c,default:()=>l});var s=a(85893),n=a(68698),i=a(50834),o=a(3241),r=a(18955);const c=()=>(0,s.jsx)(n.IG,{scope:"kas",module:"./ServiceAccounts",fallback:(0,s.jsx)(r.AppServicesLoading,{}),render:e=>(0,s.jsx)(d,{Component:e})}),d=({Component:e})=>{const t=(0,i.useConfig)();return(null==t?void 0:t.serviceDown)?(0,s.jsx)(o.d,{}):(0,s.jsx)(e,{})},l=c},3241:(e,t,a)=>{a.d(t,{d:()=>r});var s=a(85893),n=a(66260),i=a(21242),o=a(15847);const r=()=>{const{t:e}=(0,o.useTranslation)(["appTemporaryFixMe"]);return(0,s.jsx)(i.PageSection,{children:(0,s.jsxs)(i.EmptyState,Object.assign({variant:"full"},{children:[(0,s.jsx)(i.EmptyStateIcon,{icon:n.WrenchIcon}),(0,s.jsx)(i.Title,Object.assign({headingLevel:"h1",size:"lg"},{children:e("serviceDown.serviceDownTitle")})),(0,s.jsx)(i.EmptyStateBody,{children:e("serviceDown.serviceDownMessage")}),(0,s.jsx)(i.Button,Object.assign({variant:"primary",onClick:()=>{window.location.href="https://status.starter.openshift.com/"}},{children:e("serviceDown.serviceDownButton")}))]}))})}},15113:(e,t,a)=>{a.r(t),a.d(t,{ArtifactVersionDetails:()=>p,default:()=>f});var s=a(70655),n=a(85893),i=a(93264),o=a(73685),r=a(13179),c=a(51125),d=a(50834),l=a(15675),u=a(18955);const p=()=>{const e=(0,d.useConfig)();return(null==e?void 0:e.serviceDown)?(0,n.jsx)(l.dB,{}):(0,n.jsx)(m,{})},m=()=>{let{artifactId:e}=(0,o.useParams)();return e=decodeURIComponent(e),(0,n.jsx)(c.q,{breadcrumbId:"srs.artifacts_details",artifactId:e,render:e=>(0,n.jsx)(v,{registry:e})})},v=({registry:e})=>{const[t,a]=(0,i.useState)(),o=(0,d.useAuth)();return(0,i.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){var e;yield null===(e=null==o?void 0:o.getUsername())||void 0===e?void 0:e.then((e=>a(e)))}))}),[o]),void 0===e||void 0===t?(0,n.jsx)(u.AppServicesLoading,{}):(0,n.jsx)(r.P,{registry:e,module:"./FederatedArtifactVersionPage"})},f=p},8172:(e,t,a)=>{a.r(t),a.d(t,{Artifacts:()=>c,default:()=>l});var s=a(85893),n=a(13179),i=a(51125),o=a(50834),r=a(15675);const c=()=>{const e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(r.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(i.q,{breadcrumbId:"srs.artifacts",render:e=>(0,s.jsx)(n.P,{module:"./FederatedArtifactsPage",registry:e})}),l=c},74856:(e,t,a)=>{a.r(t),a.d(t,{ArtifactRedirect:()=>c,default:()=>l});var s=a(85893),n=a(13179),i=a(51125),o=a(50834),r=a(15675);const c=()=>{const e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(r.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(i.q,{render:e=>(0,s.jsx)(n.P,{registry:e,module:"./FederatedArtifactRedirectPage"})}),l=c},22322:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(85893),n=a(13179);const i=({registry:e,downloadLabel:t})=>(0,s.jsx)(n.P,{module:"./FederatedDownloadArtifacts",registry:e,fileName:e.name,downloadLinkLabel:t})},13179:(e,t,a)=>{a.d(t,{P:()=>v});var s=a(70655),n=a(85893);var i=a(68698),o=a(73685),r=a(50834),c=a(18955),d=a(93264),l=a(67542),u=a(34199);function p(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){try{const a=new u.PrincipalApi({accessToken:e,basePath:t});return yield a.listPrincipals(-1).then((e=>e.data.data.map((e=>({id:e.username,principalType:r.PrincipalType.UserAccount,displayName:`${e.first_name} ${e.last_name}`,emailAddress:e.email})))))}catch(e){console.warn("app-services-ui fetchUserAccounts error",e)}}))}function m(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){try{const a=new l.SecurityApi({accessToken:e,basePath:t});return yield a.getServiceAccounts().then((e=>e.data.items.map((e=>({id:e.client_id,displayName:e.name,principalType:r.PrincipalType.ServiceAccount})))))}catch(e){console.warn("app-services-ui fetchServiceAccounts error",e)}}))}const v=e=>{var{module:t}=e,a=(0,s._T)(e,["module"]);return(0,n.jsx)(i.IG,{scope:"apicurio_registry",module:t,fallback:(0,n.jsx)(c.AppServicesLoading,{}),render:e=>(0,n.jsx)(f,Object.assign({Component:e},a))})},f=e=>{var{Component:t,registry:a}=e,i=(0,s._T)(e,["Component","registry"]);let l;const u=(0,r.useAlert)(),v=(0,r.useAuth)(),f=(0,r.useConfig)(),h=(0,o.useHistory)(),g=(0,r.useBasename)(),{loading:k,allPrincipals:b}=function(){const e=(0,r.useConfig)(),t=(0,r.useAuth)(),[a,n]=(0,d.useState)(!0),[i,o]=(0,d.useState)(),[c,l]=(0,d.useState)();return(0,d.useEffect)((()=>{(()=>{(0,s.mG)(this,void 0,void 0,(function*(){n(!0);try{const a=yield t.kas.getToken(),s=e.rbac.basePath,i=e.kas.apiBasePath;if(a){const[e,t]=yield Promise.allSettled([p(a,s),m(a,i)]);"fulfilled"===e.status&&l(e.value),"fulfilled"===t.status&&o(t.value)}else console.warn("app-services-ui no access token in usePrincipals");n(!1)}catch(e){n(!1)}}))})()}),[t,e]),{loading:a,users:c,services:i,allPrincipals:c||i?[...c||[],...i||[]]:void 0}}(),y=null==v?void 0:v.apicurio_registry.getToken;let{groupId:P,artifactId:S,version:x}=(0,o.useParams)();return P=decodeURIComponent(P),S=decodeURIComponent(S),x=decodeURIComponent(x),void 0===f||void 0===a||k?(0,n.jsx)(c.AppServicesLoading,{}):y&&g?(l=((e,t,a,s,n,i)=>({artifacts:{url:`${a}/apis/registry`},auth:{type:"gettoken",getToken:n},features:{readOnly:!1,breadcrumbs:!1,roleManagement:!0,multiTenant:!0,settings:!0,alerts:t},ui:{navPrefixPath:s},principals:i}))(0,u,a.registryUrl,`${g.getBasename()}/t/${null==a?void 0:a.id}`,y,b),(0,n.jsx)(t,Object.assign({config:l,tenantId:a.id,groupId:P,artifactId:S,version:x,history:h},i))):null}},42789:(e,t,a)=>{a.r(t),a.d(t,{RulesPage:()=>c,default:()=>l});var s=a(85893),n=a(13179),i=a(51125),o=a(50834),r=a(15675);const c=()=>{const e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(r.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(i.q,{breadcrumbId:"srs.global_rules",render:e=>(0,s.jsx)(n.P,{registry:e,module:"./FederatedRulesPage"})}),l=c},92225:(e,t,a)=>{a.r(t),a.d(t,{ServiceRegistryPage:()=>f,ServiceRegistryPageConnected:()=>h,default:()=>g});var s=a(70655),n=a(85893),i=a(93264),o=a(15847),r=a(68698),c=a(15675),d=a(40493),l=a(18955),u=a(50834),p=a(22322),m=a(15529),v=a(85169);const f=()=>{const{getQuota:e}=(0,d.fA)(u.ProductType.srs);return(0,n.jsx)(u.QuotaContext.Provider,Object.assign({value:{getQuota:e}},{children:(0,n.jsx)(r.A6,{children:(0,n.jsx)(r.IG,{scope:"srs",module:"./ServiceRegistry",fallback:(0,n.jsx)(l.AppServicesLoading,{}),render:e=>(0,n.jsx)(h,{Component:e})})})}))},h=({Component:e})=>{const t=(0,u.useConfig)(),a=(0,v.a)(),{t:r}=(0,o.useTranslation)(["service-registry"]),f=(0,m.t)(),{preCreateInstance:h,shouldOpenCreateModal:g}=(0,d.UI)({eventCode:f.serviceRegistry.ams.termsAndConditionsEventCode,siteCode:f.serviceRegistry.ams.termsAndConditionsSiteCode}),[k,b]=(0,i.useState)(!1),[y,P]=(0,i.useState)(""),S=(0,i.useCallback)((e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const{shouldOpenCreateModal:t,url:a}=yield h(e);return!1!==t||!a||(b(!0),P(a),!1)}))),[h,b,P]),x=(0,i.useCallback)((()=>{b(!1)}),[b]),j=(0,i.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){window.location.href=y}))),[y]);return void 0===t?(0,n.jsx)(l.AppServicesLoading,{}):t.serviceDown?(0,n.jsx)(c.dB,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.TermsAndConditionModal,{isModalOpen:k,serviceName:r("service_registry"),ouiaIdModal:"modal-SrvRegTerms",ouiaIdButtonViewTerms:"button-view-terms",ouiaIdButtonCancel:"button-cancel",onClickViewTermsConditions:j,onCancel:x}),(0,n.jsx)(l.DevelopmentPreview,{children:(0,n.jsx)(e,{preCreateInstance:S,shouldOpenCreateModal:g,tokenEndPointUrl:null==a?void 0:a.tokenEndPointUrl,renderDownloadArtifacts:(e,t)=>(0,n.jsx)(p.c,{registry:e,downloadLabel:t})})})]})},g=f},51125:(e,t,a)=>{a.d(t,{q:()=>c});var s=a(85893),n=a(68698),i=a(18955),o=a(22322),r=a(85169);const c=e=>(0,s.jsx)(n.IG,{scope:"srs",module:"./ApicurioRegistry",fallback:(0,s.jsx)(i.AppServicesLoading,{}),render:t=>(0,s.jsx)(d,Object.assign({Component:t},e))}),d=({Component:e,render:t,breadcrumbId:a,artifactId:i})=>{const c=(0,r.a)();return(0,s.jsx)(n.A6,{children:(0,s.jsx)(e,{render:t,breadcrumbId:a,tokenEndPointUrl:null==c?void 0:c.tokenEndPointUrl,artifactId:i,renderDownloadArtifacts:(e,t)=>(0,s.jsx)(o.c,{registry:e,downloadLabel:t})})})}},17779:(e,t,a)=>{a.d(t,{vJ:()=>c});a(8172),a(74856),a(15113),a(42789),a(92225);var s=a(85893),n=a(73685),i=a(13179),o=a(68698),r=a(18955);const c=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.IG,{scope:"srs",module:"./ServiceRegistryMapping",fallback:(0,s.jsx)(r.AppServicesLoading,{}),render:e=>(0,s.jsx)(d,{Component:e})})}),d=({Component:e})=>{const{topicName:t}=(0,n.useParams)(),a="/service-registry";return(0,s.jsx)(e,{basename:a,topicName:t,renderSchema:e=>(0,s.jsx)(i.P,{module:"./FederatedSchemaMapping",registry:e,topicName:t,groupId:null,version:"latest",registryId:null==e?void 0:e.id,basename:a})})}},15675:(e,t,a)=>{a.d(t,{Xx:()=>c,cQ:()=>d.cQ,PS:()=>d.PS,Jh:()=>d.Jh,EP:()=>d.EP,A:()=>d.A,dB:()=>l.d,nT:()=>d.nT,Fn:()=>d.Fn,dS:()=>d.dS});var s=a(85893),n=a(2008),i=a(15847),o=a(73685);const r=({href:e,children:t})=>(0,s.jsx)(o.Link,Object.assign({to:e||""},{children:t})),c=()=>{const{t:e}=(0,i.useTranslation)(["appTemporaryFixMe"]),t=(0,s.jsx)(i.Trans,{i18nKey:"accessdenied.accessDeniedDescription",t:e,components:[(0,s.jsx)(r,{href:"/streams/kafkas"},"kafkas")]});return(0,s.jsx)(n.Main,{children:(0,s.jsx)(n.NotAuthorized,{title:e("accessdenied.accessDeniedTitle"),description:t,prevPageButtonText:e("accessdenied.accessDeniedButtonText"),showReturnButton:!0})})};a(37272),a(23456),a(75401);var d=a(49291),l=(a(44735),a(77745),a(83857),a(60766),a(15822),a(3241));a(17779)},85169:(e,t,a)=>{a.d(t,{V:()=>n,a:()=>i});var s=a(93264);const n=(0,s.createContext)(void 0),i=()=>{const e=(0,s.useContext)(n);if(void 0===e)throw new Error("must be used inside an AuthContext provider");return e}},26836:(e,t,a)=>{a.d(t,{N:()=>u});var s=a(70655),n=a(85893),i=a(93264),o=a(50834);const r=JSON.parse('{"Q":{"kas":{"basePath":"/mas-local-fm/kas","proxyTarget":"http://0.0.0.0:9000","fallbackBasePath":"/beta/apps/rhosak-control-plane-ui-build"},"kafka":{"basePath":"/mas-local-fm/kafka","proxyTarget":"http://0.0.0.0:8080","fallbackBasePath":"/beta/apps/rhosak-data-plane-ui-build"},"guides":{"basePath":"/mas-local-fm/guides","proxyTarget":"http://0.0.0.0:9001","fallbackBasePath":"/beta/apps/rhoas-guides-build"},"apicurio_registry":{"basePath":"/mas-local-fm/apicurio_registry","proxyTarget":"http://0.0.0.0:8888","fallbackBasePath":"/beta/apps/sr-ui-build"},"srs":{"basePath":"/mas-local-fm/srs","proxyTarget":"http://0.0.0.0:9005","fallbackBasePath":"/beta/apps/srs-ui-build"},"cos":{"basePath":"/mas-local-fm/cos","proxyTarget":"http://0.0.0.0:9002","fallbackBasePath":"/beta/apps/cos-ui-build"},"ads":{"basePath":"/mas-local-fm/ads","proxyTarget":"http://0.0.0.0:9009","fallbackBasePath":"/beta/apps/ads-ui-build"},"smart_events":{"basePath":"/mas-local-fm/smart_events","proxyTarget":"http://0.0.0.0:9006","fallbackBasePath":"/beta/apps/se-ui-build"}},"v":[{"hostnames":["prod.foo.redhat.com"],"fetchConfig":true,"type":"proxy","config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"apicurio_registry":{"apiBasePath":""},"rbac":{"basePath":"/api/rbac/v1"},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"ads":{"editorsBasePath":"http://0.0.0.0:9011"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"smart_events":{"apiBasePath":"https://lcstem2z9g006s6.api.stage.openshift.com"}}},{"hostnames":["qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":true},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"ads":{"editorsBasePath":"https://qaprodauth.console.redhat.com/beta/apps/ads-editors-build/index.html"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"smart_events":{"apiBasePath":"https://lcstem2z9g006s6.api.stage.openshift.com"}}},{"hostnames":["cloud.redhat.com","console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.openshift.com"},"kas":{"apiBasePath":"https://api.openshift.com"},"kafka":{},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.openshift.com"},"ads":{"editorsBasePath":"https://console.redhat.com/beta/apps/ads-editors-build/index.html"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://api.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"smart_events":{"apiBasePath":""}}}]}'),c=e=>{const t=window.location.hostname;console.log(`Filter config for ${t}`);const a=e.filter((e=>e.hostnames.includes(t)));if(a.length>1)throw new Error(`Unable to find config for ${t}, more than one config matched ${a}`);if(a.length<1){const t=e.filter((e=>e.hostnames.includes("console.redhat.com")));if(t.length>1)throw new Error(`Unable to load default config, more than one config matched ${a}`);if(t.length<1)throw new Error("Unable to load default config, no configs matched");return t[0]}return a[0]},d=(e,t,a)=>{const s={};return Object.entries(t).forEach((([t,n])=>{let i,{basePath:o}=n;"proxy"!==e.type?o=n.fallbackBasePath:i=n.fallbackBasePath,a||(o.startsWith("/beta")&&(o=o.substring(5)),(null==i?void 0:i.startsWith("/beta"))&&(i=i.substring(5))),s[t]={basePath:o,fallbackBasePath:i}})),Object.assign(Object.assign({},e.config),{federatedModules:s})};var l=a(31589);const u=({children:e})=>{const{beta:t}=(0,l.gV)(),[u,p]=(0,i.useState)((()=>{const e=r.v,a=c(e);if(a.fetchConfig)return;const s=d(a,r.Q,t);return console.log("Done loading config",s),s}));return(0,i.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0===u){const e=yield fetch(`${a.p}config.json`),s=yield e.json(),n=c(s.config),i=d(n,s.federatedModules,t);console.debug("Done loading config",i),p(i)}}))}),[t,u]),(0,n.jsx)(o.ConfigContext.Provider,Object.assign({value:u},{children:e}))}},15529:(e,t,a)=>{a.d(t,{A:()=>n,t:()=>i});var s=a(93264);const n=(0,s.createContext)(void 0),i=()=>{const e=(0,s.useContext)(n);if(void 0===e)throw new Error("useConstants must be used inside an ServiceConstantsContextProvider");return e}},18047:(e,t,a)=>{a.d(t,{B:()=>o});var s=a(85893),n=a(15529);const i=JSON.parse('{"version":1,"kafka":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosak|standard","trialQuotaId":"cluster|rhinfra|rhosaktrial|standard","quotaProductId":"RHOSAK","trialQuotaProductId":"RHOSAKTrial","resourceName":"rhosak"}},"serviceRegistry":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosr|any","trialQuotaId":"cluster|rhinfra|rhosrtrial|any","quotaProductId":"RHOSR","trialQuotaProductId":"RHOSRTrial","resourceName":"rhosr"}}}'),o=({children:e})=>(0,s.jsx)(n.A.Provider,Object.assign({value:i},{children:e}))},31589:(e,t,a)=>{a.d(t,{O1:()=>r,gV:()=>o});var s=a(85893),n=a(93264);const i=(0,n.createContext)(void 0),o=()=>{const e=(0,n.useContext)(i);if(void 0===e)throw new Error("useFeatureFlags must be used inside a FeatureFlagContext provider");return e},r=({children:e})=>{const t={beta:window.location.pathname.startsWith("/beta")};return(0,s.jsx)(i.Provider,Object.assign({value:t},{children:e}))}},36494:(e,t,a)=>{a.d(t,{S:()=>d});var s=a(39133),n=a.n(s),i=a(38756),o=a.n(i),r=a(83215);let c;function d(...e){return c||(c=new(n())({},[o(),...e]),c.register({notifications:r.ee})),c}},73322:(e,t,a)=>{a.d(t,{S:()=>d,c:()=>c});var s=a(85893),n=a(93264),i=a(73685),o=a(9903);const r=(0,n.lazy)((()=>Promise.resolve().then(a.bind(a,77745)))),c=({title:e})=>((0,o.j)(e),(0,s.jsx)(i.Route,{component:r})),d=e=>e.reduce(((e,t)=>[...e,...t.routes?t.routes:[t]]),[])},37687:(e,t,a)=>{a.d(t,{Z:()=>s});const s=function(e){let t="/";const a=e.split("/");return a.shift(),"beta"===a[0]&&(a.shift(),t="/beta/"),`${t}${a[0]}`}},9903:(e,t,a)=>{a.d(t,{j:()=>n});var s=a(93264);function n(e){(0,s.useEffect)((()=>{const t=document.title;return document.title=e,()=>{document.title=t}}),[e])}}}]);
