"use strict";(self.webpackChunkapplication_services_ui=self.webpackChunkapplication_services_ui||[]).push([[5754],{76166:(e,t,a)=>{a.d(t,{Z:()=>Q});var s=a(85893),i=a(93264),n=a(73685),r=a(86706),o=a(71355),c=a(70655),d=a(35800),l=a(37687),u=a(83463),p=a(73322),v=a(9903),m=a(49291),f=a(97644),h=a(15847),g=a(47173);const k=(0,i.lazy)((()=>a.e(8571).then(a.bind(a,58571)))),b=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,37272)))),y=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,74856)))),P=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,8172)))),x=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,15113)))),S=(0,i.lazy)((()=>a.e(6264).then(a.bind(a,56264)))),j=(0,i.lazy)((()=>a.e(4809).then(a.bind(a,54809)))),w=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,75401)))),_=(0,i.lazy)((()=>a.e(9132).then(a.bind(a,9132)))),A=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,44735)))),C=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,83857)))),I=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,60766)))),O=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,42789)))),T=(0,i.lazy)((()=>a.e(1132).then(a.bind(a,31132)))),R=(0,i.lazy)((()=>a.e(4880).then(a.bind(a,54880)))),B=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,15822)))),D=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,23456)))),E=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,92225)))),H=(0,i.lazy)((()=>a.e(2352).then(a.bind(a,82352)))),M=()=>(0,s.jsx)(n.Redirect,{to:"/streams/kafkas"}),z=[{component:()=>(0,s.jsx)(n.Redirect,{to:"/overview"}),exact:!0,label:"Overview",path:"/",title:"Overview | Red Hat OpenShift Application Services"},{component:C,exact:!0,label:"Overview",path:"/overview",title:"Overview | Red Hat OpenShift Application Services"},{component:b,exact:!0,label:"API Management",path:"/api-management",title:"API Management | Red Hat OpenShift Application Services"},{component:w,exact:!0,label:"Data Science",path:"/data-science",title:"Data Science | Red Hat OpenShift Application Services"},{component:I,exact:!0,label:"Learning Resources | Red Hat OpenShift Application Services",path:"/learning-resources",title:"Learning Resources | Red Hat OpenShift Application Services",devPreview:!1},{component:M,exact:!0,label:"Streams for Apache Kafka",path:"/streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:_,exact:!0,label:"Streams for Apache Kafka",path:"/streams/overview",title:"Overview | Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:A,exact:!0,label:"Streams for Apache Kafka",path:"/streams/kafkas",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas",devPreview:!1},{component:E,exact:!0,label:"Service Registry",path:"/service-registry",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:()=>(0,s.jsx)(n.Redirect,{to:"/service-accounts"}),exact:!0,label:"Service Accounts",path:"/streams/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:()=>(0,s.jsx)(n.Redirect,{to:"/learning-resources"}),label:"QuickStarts for Red Hat OpenShift Application Services",path:"/streams/resources",title:"QuickStarts for Red Hat OpenShift Application Services",devPreview:!0},{component:m.aH,label:"Streams for Apache Kafka",path:"/streams/kafkas/:id",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas/:id",devPreview:!1},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:O,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/rules",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:T,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/roles",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:R,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/settings",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:y,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:x,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId/versions/:version",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:S,exact:!0,label:"API Designer",path:"/api-designer",title:"API Designer | Red Hat OpenShift Application Services",basename:"/api-designer",devPreview:!0},{component:j,exact:!0,label:"Service Registry",path:"/api-designer/designs/:designId/editor",title:"API Designer | Red Hat OpenShift Application Services",basename:"/api-designer",devPreview:!0},{component:D,exact:!1,label:"COS",path:"/connectors",title:"Connectors | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/connectors`},{component:B,exact:!0,label:"Service Accounts",path:"/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:H,exact:!1,label:"Smart Events",path:"/smart-events",title:"Smart Events | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/smart-events`,devPreview:!0},{component:M,exact:!0,label:"Streams for Apache Kafka",path:"/openshift-streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"}],$=e=>{var{component:t,title:a,basename:r,devPreview:o}=e,l=(0,c._T)(e,["component","title","basename","devPreview"]);const{t:p}=(0,h.useTranslation)(),m=(0,n.useHistory)();(0,v.j)(a);const k=(0,i.useCallback)((()=>r||""),[r]),b=(0,i.useCallback)((()=>m.push("/")),[m]),y=(0,i.useCallback)((e=>(0,s.jsx)(d.ErrorBoundary,Object.assign({fallbackRender:({error:e})=>"404"===e.message?(0,s.jsx)(u.AppServicesPageNotFound,{}):(0,s.jsx)(u.AppServicesEmptyState,Object.assign({emptyStateProps:{variant:u.AppServicesEmptyStateVariant.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:p("common:something_went_wrong")},emptyStateBodyProps:{body:p("common:unexpected_error")}},{children:(0,s.jsx)(g.zx,Object.assign({onClick:b},{children:p("common:return_to_home_page")}))}))},{children:(0,s.jsx)(u.DevelopmentPreview,Object.assign({show:o},{children:(0,s.jsx)(f.BasenameContext.Provider,Object.assign({value:{getBasename:k}},{children:(0,s.jsx)(t,Object.assign({},l,e))}))}))}))),[t,o,k,b,l,p]);return(0,s.jsx)(n.Route,Object.assign({render:y},l))},G=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.Suspense,Object.assign({fallback:(0,s.jsx)(u.AppServicesLoading,{})},{children:(0,s.jsxs)(n.Switch,{children:[(0,p.S)(z).map(((e,t)=>{var{path:a,exact:i,component:n,title:r,isAsync:o}=e,d=(0,c._T)(e,["path","exact","component","title","isAsync"]);return(0,s.jsx)($,Object.assign({path:a,exact:i,component:n,title:r,isAsync:o},d),t)})),(0,s.jsx)(p.c,{title:"404 Page Not Found"})]})})),(0,s.jsx)(k,{})]});var K=a(40493),L=a(61529);const Q=(0,r.connect)()((()=>{const e=(0,K.pp)(),t=(0,n.useHistory)(),a=(0,i.useCallback)((()=>{const e="overview",a=t.location.pathname.split("/");return a.length>1?""===a[1]?e:"openshift-streams"===a[1]?"streams":a[1]:e}),[t]);return(0,i.useEffect)((()=>{const a=e.chrome.on("APP_NAVIGATION",(e=>{var a,s;if(null===(a=null==e?void 0:e.domEvent)||void 0===a?void 0:a.href){const a=null===(s=null==e?void 0:e.domEvent)||void 0===s?void 0:s.href.replace("/application-services","/").replace(/^\/\//gm,"/");t.push(a)}}));return()=>{a()}}),[a,t,e.chrome]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.NotificationsPortal,{}),(0,s.jsx)(L.T,{children:(0,s.jsx)(G,{})})]})}))},25458:(e,t,a)=>{a.d(t,{j:()=>d,w:()=>l});var s=a(70655),i=a(85893),n=a(93264),r=a(77834),o=a(97644),c=a(72548);const d=()=>{const e=(0,o.useConfig)(),t=(0,o.useAuth)(),[a,i]=(0,n.useState)(),[d,l]=(0,n.useState)();(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),s=new c.PrincipalApi({accessToken:a,basePath:null==e?void 0:e.rbac.basePath});try{const e=yield s.listPrincipals(-1).then((e=>e.data.data.map((e=>{const t=e;return{id:e.username,principalType:o.PrincipalType.UserAccount,displayName:`${t.first_name} ${t.last_name}`,emailAddress:t.email}}))));l(e)}catch(e){}}}))}),[t,e]),(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),s=new r.SecurityApi({accessToken:a,basePath:e.kas.apiBasePath}),n=yield s.getServiceAccounts().then((e=>e.data.items.map((e=>({id:e.client_id,displayName:e.name,principalType:o.PrincipalType.ServiceAccount})))));i(n)}}))}),[t,e]);return{getAllPrincipals:(0,n.useCallback)((()=>{let e=[];return void 0!==d&&void 0!==a&&(e=e.concat(d)),void 0!==a&&(e=e.concat(a)),e}),[a,d]),getAllUserAccounts:(0,n.useCallback)((()=>d||[]),[d]),getAllServiceAccounts:(0,n.useCallback)((()=>a||[]),[a])}},l=({children:e})=>{const t=d();return(0,i.jsx)(o.PrincipalsContext.Provider,Object.assign({value:t},{children:e}))}},68698:(e,t,a)=>{a.d(t,{IG:()=>o.I,Gg:()=>v,A6:()=>h,N:()=>m,fh:()=>r,jg:()=>f.j});var s=a(93264),i=a(73685),n=a(85169);function r(){const e=(0,i.useHistory)(),t=(0,n.a)(),[a,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(void 0),d=(0,s.useCallback)((e=>{e&&c(e),r(!0)}),[]),l=(0,s.useCallback)((()=>{c(void 0),r(!1)}),[]);return{isDrawerOpen:a,drawerActiveTab:o,setDrawerActiveTab:c,openDrawer:d,closeDrawer:l,tokenEndPointUrl:null==t?void 0:t.tokenEndPointUrl,onDeleteInstance:()=>{e.push("/streams/kafkas")}}}var o=a(78866),c=a(70655),d=a(85893),l=a(97644),u=a(83463);const p=(0,s.createContext)(void 0),v=({children:e})=>{const t=(0,s.useRef)({}),a=(0,l.useConfig)();if(void 0===a)return(0,d.jsx)(u.AppServicesLoading,{});return(0,d.jsx)(p.Provider,Object.assign({value:{modules:a.federatedModules,getModuleInfo:(e,a,s)=>(0,c.mG)(void 0,void 0,void 0,(function*(){if(void 0!==t.current[a])return t.current[a];const i=yield((e,t,a)=>(0,c.mG)(void 0,void 0,void 0,(function*(){const s=e=>(0,c.mG)(void 0,void 0,void 0,(function*(){const a=`${e}/fed-mods.json?ts=${Date.now()}`,s=yield fetch(a);return yield s.json().then((e=>e)).then((e=>e[t])).then((e=>e.entry[0])).then((t=>t.startsWith(e)?{entryPoint:t,basePath:e}:{entryPoint:`${e}${t}`,basePath:e}))}));try{return yield s(e)}catch(e){if(a)try{return yield s(a)}catch(e){return}}})))(e,a,s);return void 0!==i&&(t.current[a]=i),i}))}},{children:e}))},m=()=>{const e=(0,s.useContext)(p);if(void 0===e)throw new Error("must be used inside FederatedModuleContext provider");return e};var f=a(25458);const h=({children:e})=>(0,d.jsx)(o.I,{scope:"kas",module:"./KasModalLoader",fallback:null,render:t=>(0,d.jsx)(t,{children:e})})},40493:(e,t,a)=>{a.d(t,{aC:()=>h,pp:()=>f,UI:()=>m,fA:()=>c,gI:()=>g});var s=a(70655),i=a(93264),n=a(97644),r=a(93589),o=a(15529);const c=e=>{const t=(0,n.useConfig)(),a=(0,n.useAuth)(),c=(0,o.t)(),[d,l]=(0,i.useState)();(0,i.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(!d){const e=yield null==a?void 0:a.ams.getToken(),s=new r.AppServicesApi({accessToken:e,basePath:(null==t?void 0:t.ams.apiBasePath)||""});yield s.apiAccountsMgmtV1CurrentAccountGet().then((e=>{var t,a;const s=null===(a=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.organization)||void 0===a?void 0:a.id;l(s)}))}}))}),[t,a,d]);const u=(0,i.useCallback)((()=>{const t=c.kafka.ams.quotaProductId,a=c.kafka.ams.trialQuotaProductId,s=c.kafka.ams.resourceName,i=c.serviceRegistry.ams.quotaProductId,r=c.serviceRegistry.ams.trialQuotaProductId,o=c.serviceRegistry.ams.resourceName;if(e===n.ProductType.kas)return{quotaProductId:t,trialQuotaProductId:a,resourceName:s,quotaKey:n.QuotaType.kas,trialQuotaKey:n.QuotaType.kasTrial};if(e===n.ProductType.srs)return{quotaProductId:i,trialQuotaProductId:r,resourceName:o,quotaKey:n.QuotaType.srs,trialQuotaKey:n.QuotaType.srsTrial};throw new Error(`getQuotaTypesByProductId error, unrecognized productId ${e}`)}),[c,e]),p=(0,i.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){var e,s,i,n;const o=new Map,c={loading:!0,isServiceDown:!1,data:void 0};if(d){const{quotaProductId:l,trialQuotaProductId:p,resourceName:v,quotaKey:m,trialQuotaKey:f}=u()||{},h=yield null==a?void 0:a.ams.getToken(),g=new r.AppServicesApi({accessToken:h,basePath:(null==t?void 0:t.ams.apiBasePath)||""});try{const t=yield g.apiAccountsMgmtV1OrganizationsOrgIdQuotaCostGet(d,void 0,!0),a=null===(s=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.items)||void 0===s?void 0:s.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===v&&e.product===l))})),r=null===(n=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.items)||void 0===n?void 0:n.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===v&&e.product===p))}));if(a&&a.allowed>0){const e=(null==a?void 0:a.allowed)-(null==a?void 0:a.consumed);null==o||o.set(m,{allowed:null==a?void 0:a.allowed,consumed:null==a?void 0:a.consumed,remaining:e<0?0:e})}r&&(null==o||o.set(f,{allowed:null==r?void 0:r.allowed,consumed:null==r?void 0:r.consumed,remaining:(null==r?void 0:r.allowed)-(null==r?void 0:r.consumed)})),c.loading=!1,c.data=o}catch(e){c.loading=!1,c.isServiceDown=!0,console.error(e)}}return c}))),[a,t,u,d]);return{orgId:d,getQuota:p}};var d,l=a(73685),u=a(17563);!function(e){e[e.IDLE=0]="IDLE",e[e.FETCHING=1]="FETCHING",e[e.FETCHED=2]="FETCHED",e[e.FETCH_ERROR=3]="FETCH_ERROR"}(d||(d={}));const p=(e,t,a)=>({key:"selfTermsReview",fetch:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){const s=yield null==t?void 0:t.ams.getToken(),i=new r.AppServicesApi({accessToken:s,basePath:(null==e?void 0:e.ams.apiBasePath)||""});return(yield i.apiAuthorizationsV1SelfTermsReviewPost({event_code:a.eventCode,site_code:a.siteCode})).data}))}),v=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),m=e=>{const t=(e=>{const t=(0,n.useConfig)(),a=(0,n.useAuth)(),r=(0,i.useRef)(),o=(0,i.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==r.current)return r.current;const s=yield p(t,a,e).fetch().then((e=>e));return r.current=s,s}))),[a,t,e]);return(0,i.useEffect)((()=>{o()}),[t,a,o]),o})(e),a=(0,l.useLocation)();return{shouldOpenCreateModal:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){if("true"===(0,u.parse)(a.search).create){if(!(yield t()).terms_required)return!0}return!1})),preCreateInstance:e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const a=yield t();if(a.terms_available||a.terms_required){if(void 0===a.redirect_url)throw new Error("terms must be signed but there is no terms url");const e=(0,u.stringifyUrl)({url:window.location.href,query:{create:"true"}}),t=((e,t,a)=>`${e}&${v({redirect:t,cancelRedirect:a})}`)(a.redirect_url,e,window.location.href);return{shouldOpenCreateModal:!1,url:t}}return{shouldOpenCreateModal:e,url:void 0}}))}},f=()=>{const e=window.insights;if(void 0===e)throw new Error("must be used inside an initialized insights context");return e},h=()=>{const e=(0,n.useConfig)(),t=f();if(void 0===e||void 0===t.chrome.auth)throw new Error("useAuth must be used inside a config provider, and insights auth");const a=t.chrome.auth,i=a.getToken;return{getUsername:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield a.getUser()).identity.user.username})),isOrgAdmin:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield a.getUser()).identity.user.is_org_admin})),kafka:{getToken:i},kas:{getToken:i},ams:{getToken:i},srs:{getToken:i},apicurio_registry:{getToken:i},smart_events:{getToken:i},sas_ui:{getToken:i}}},g=()=>{const e=(0,n.useConfig)();return(0,i.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield fetch(`${e.kas.apiBasePath}/api/kafkas_mgmt/v1/sso_providers`)).json()}))),[e.kas.apiBasePath])}},37272:(e,t,a)=>{a.r(t),a.d(t,{APIManagementOverviewPage:()=>n,default:()=>r});var s=a(85893),i=a(83463);const n=()=>(0,s.jsx)(i.APIManagementPage,{}),r=n},23456:(e,t,a)=>{a.r(t),a.d(t,{CosPage:()=>c,default:()=>d});var s=a(85893),i=a(68698),n=a(3241),r=a(97644),o=a(83463);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(n.d,{}):(0,s.jsx)(i.IG,{scope:"cos",fallback:(0,s.jsx)(o.AppServicesLoading,{}),module:"./OpenshiftManagedConnectors",render:e=>(0,s.jsx)(e,{})})},d=c},75401:(e,t,a)=>{a.r(t),a.d(t,{DataScienceOverViewPage:()=>p,default:()=>v});var s=a(70655),i=a(85893),n=a(36425),r=a.n(n),o=a(83463),c=a(93264);const d="managed-odh";function l(e){return(0,s.mG)(this,void 0,void 0,(function*(){yield window.insights.chrome.auth.getUser();const t=yield window.insights.chrome.auth.getToken();return fetch(`https://api.openshift.com/api/clusters_mgmt/v1/clusters/${e.cluster_id}/addon_inquiries?search=id='${d}`,{method:"get",headers:{Authorization:`Bearer ${t}`}}).then((e=>e.json())).then((({data:t})=>Object.assign({clusterId:e.cluster_id},t)))}))}function u(){return(0,s.mG)(this,void 0,void 0,(function*(){yield window.insights.chrome.auth.getUser();const e=yield window.insights.chrome.auth.getToken(),{items:t}=yield fetch("https://api.openshift.com/api/accounts_mgmt/v1/subscriptions?search=plan_id='MOA'\n  and status IN ('Active', 'Reserved')&fetchMetrics=true",{method:"get",headers:{Authorization:`Bearer ${e}`}}).then((e=>e.json())),a=t.filter((e=>function(e){var t;return!!(null===(t=e.metrics)||void 0===t?void 0:t.find(((e={nodes:{compute:0}})=>e&&e.nodes&&e.nodes.compute>=2)))}(e))),s=(yield Promise.allSettled(a.map(l))).filter((({status:e})=>"fulfilled"===e)).reduce(((e,{value:t})=>{const a=function({clusterId:e,items:t}){const a=t.filter((({id:e})=>e===d));return{clusterId:e,hasAddon:!!a.find((e=>{var t;return null===(t=null==e?void 0:e.requirements)||void 0===t?void 0:t.every((({enabled:e})=>e))})),canInstallAddon:!!a.find((e=>{var t;return null===(t=null==e?void 0:e.requirements)||void 0===t?void 0:t.every((({status:{fulfilled:e}})=>e))}))}}(t);return Object.assign(Object.assign({},e),{[a.clusterId]:a})}),{});return{installableClusters:a.filter((({cluster_id:e})=>{var t;return null===(t=s[e])||void 0===t?void 0:t.canInstallAddon})),clusters:t}}))}const p=()=>{const{analytics:e}=r()(),t=(0,c.useCallback)(((t,a)=>{try{e.track(t,a)}catch(t){console.warn("analytics not found: ",t)}}),[e]);return(0,i.jsx)(o.DataSciencePage,{loadClusters:u,trackClick:t})},v=p},49291:(e,t,a)=>{a.d(t,{cQ:()=>v,PS:()=>M,Jh:()=>p,EP:()=>d,A:()=>u,aH:()=>D,nT:()=>c,Fn:()=>o,dS:()=>l});var s=a(85893),i=a(70655),n=a(68698);const r=e=>{var{module:t}=e,a=(0,i._T)(e,["module"]);return(0,s.jsx)(n.IG,{"data-ouia-app-id":"dataPlane-streams",scope:"kafka",module:t,render:e=>(0,s.jsx)(e,Object.assign({},a))})},o=e=>(0,s.jsx)(r,Object.assign({module:"./Topics"},e)),c=e=>(0,s.jsx)(r,Object.assign({module:"./TopicDetails"},e)),d=e=>(0,s.jsx)(r,Object.assign({module:"./CreateTopic"},e)),l=e=>(0,s.jsx)(r,Object.assign({module:"./UpdateTopic"},e)),u=e=>(0,s.jsx)(r,Object.assign({module:"./Dashboard"},e)),p=e=>(0,s.jsx)(r,Object.assign({module:"./ConsumerGroups"},e)),v=e=>(0,s.jsx)(r,Object.assign({module:"./AclPermissions"},e));var m=a(93264),f=a(73685),h=a(15675),g=a(77834),k=a(97644);const b=e=>{if(!e)throw new Error("kafkaRequest cannot be undefined");return e.admin_api_server_url?e.admin_api_server_url:void 0},y=()=>{const{kas:{getToken:e}}=(0,k.useAuth)(),{kas:{apiBasePath:t}}=(0,k.useConfig)();return(0,m.useCallback)(((a,s,n,r)=>(0,i.mG)(void 0,void 0,void 0,(function*(){var i,o,c;try{const d=new g.DefaultApi(new g.Configuration({accessToken:e(),basePath:t})),l=yield d.getInstanceTypesByCloudProviderAndRegion(a,s);if(!(null===(i=null==l?void 0:l.data)||void 0===i?void 0:i.instance_types))throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${s} ${n}, no instance_types returned`);const u=null===(c=null===(o=null==l?void 0:l.data)||void 0===o?void 0:o.instance_types.find((e=>e.id===r)))||void 0===c?void 0:c.sizes,p=null==u?void 0:u.find((e=>e.id===n));if(!p)throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${s} ${n}, can't find a size matching ${n}`);return p}catch(e){throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${s} ${n}: ${e}`)}}))),[e,t])};var P=a(25458),x=a(83463),S=a(17779),j=a(73322),w=a(9903);const _=[{component:h.Fn,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.nT,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.EP,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/create",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.dS,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/update/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/dashboard",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.Jh,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/consumer-groups",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.cQ,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/acls",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:e=>(0,s.jsx)(r,Object.assign({module:"./Settings"},e)),exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/settings",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0}],A=(0,j.S)(_),C=e=>{var{component:t,InstanceDrawer:a,isAsync:n=!1,title:r,underlyingProps:o,url:c}=e,d=(0,i._T)(e,["component","InstanceDrawer","isAsync","title","underlyingProps","url"]);(0,w.j)(r);const l=()=>c;return(0,s.jsx)(f.Route,Object.assign({render:e=>(0,s.jsx)(k.BasenameContext.Provider,Object.assign({value:{getBasename:l}},{children:(0,s.jsx)(t,Object.assign({},o,d,e))}))},d))},I=e=>{var{InstanceDrawer:t}=e,a=(0,i._T)(e,["InstanceDrawer"]);const r=(0,f.useRouteMatch)(),{kafka:o}=a,c=(0,n.fh)(),d=(0,m.useCallback)(((e,t)=>{e?c.openDrawer(t):c.closeDrawer()}),[c]);return(0,s.jsx)(t,Object.assign({"data-ouia-app-id":"dataPlane-streams",drawerInstance:o,setDrawerInstance:()=>!1},c,{children:(0,s.jsxs)(f.Switch,{children:[A.map(((e,n)=>{var{path:o,exact:c,component:l,title:u,isAsync:p}=e,v=(0,i._T)(e,["path","exact","component","title","isAsync"]);const m=`${r.path}${o}`;return console.log(`Creating route for ${m}`),(0,s.jsx)(C,Object.assign({path:m,exact:c,component:l,title:u,isAsync:p,underlyingProps:Object.assign(Object.assign({},a),{handleInstanceDrawer:d}),url:r.url,InstanceDrawer:t},v),n)})),(0,s.jsx)(j.c,{title:"404 Page Not Found"})]})}))};var O=a(28696);function T({accessToken:e,basePath:t}){return(0,i.mG)(this,void 0,void 0,(function*(){const a=new O.TopicsApi(new g.Configuration({accessToken:e,basePath:t}));return((yield a.getTopics(void 0,100,100,void 0,void 0,void 0,void 0)).data.items||[]).map((e=>e.name))}))}function R({accessToken:e,basePath:t,kafkaId:a,duration:s,interval:n,selectedTopic:r}){return(0,i.mG)(this,void 0,void 0,(function*(){const i=new g.DefaultApi(new g.Configuration({accessToken:e,basePath:t})),o=((yield i.getMetricsByRangeQuery(a,s,n,["kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m","kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m","kafka_topic:kafka_log_log_size:sum","kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name))),c=o.filter((e=>{var t;return void 0===r||(null===(t=e.metric)||void 0===t?void 0:t.topic)===r})),d=Array.from(new Set(o.map((e=>e.metric.topic)))),l={},u={},p={},v={};return c.forEach((e=>{const{__name__:t,topic:a}=e.metric;function s(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m":s(l);break;case"kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m":s(u);break;case"kafka_topic:kafka_log_log_size:sum":!function(){const t=p[a]||{};e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0))),p[a]=t}();break;case"kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m":s(v)}})),{metricsTopics:d,bytesOutgoing:u,bytesIncoming:l,bytesPerPartition:p,incomingMessageRate:v}}))}const B=({kafkaId:e,owner:t,reauthenticationEnabled:a})=>{const n=(0,k.useAuth)(),r=(0,k.useConfig)(),o=(0,m.useCallback)((a=>function({kafkaId:e,owner:t,settings:a,accessToken:s,basePath:n}){return(0,i.mG)(this,void 0,void 0,(function*(){const i=new g.DefaultApi(new g.Configuration({accessToken:s,basePath:n}));return(yield i.updateKafkaById(e,{owner:t,reauthentication_enabled:a})).data.reauthentication_enabled}))}({kafkaId:e,basePath:r.kas.apiBasePath,accessToken:null==n?void 0:n.kas.getToken(),owner:t,settings:a})),[r.kas.apiBasePath,null==n?void 0:n.kas,t,e]);return(0,s.jsx)(x.Settings,{onSubmitReAuthentication:o,reauthenticationEnabled:a})},D=()=>{const e=(0,k.useConfig)(),{id:t}=(0,f.useParams)(),a=(e=>{const{kas:{apiBasePath:t}}=(0,k.useConfig)(),{kas:{getToken:a}}=(0,k.useAuth)(),[s,n]=(0,m.useState)(),r=y(),o=(0,m.useCallback)((e=>(0,i.mG)(void 0,void 0,void 0,(function*(){n(void 0);const s=new g.DefaultApi({accessToken:a,basePath:t});try{const t=yield s.getKafkaById(e),{cloud_provider:a,region:i,instance_type:o,size_id:c}=t.data;if(!(a&&i&&c&&o))throw new Error(`Kafka instance ${t.data.id} missing some required info: ${a}, ${i}, ${o}, ${c}`);const d=yield r(a,i,c,o);n(Object.assign(Object.assign({},t.data),{size:d}))}catch(e){n(!1)}}))),[t,r,a]);return(0,m.useEffect)((()=>{e?o(e):n(void 0)}),[o,e]),s?{kafkaDetail:s,adminServerUrl:b(s)}:s})(t);if(null==e?void 0:e.serviceDown)return(0,s.jsx)(h.dB,{});if(void 0===a)return(0,s.jsx)(x.AppServicesLoading,{});if(!1===a)throw new Error("404");return(0,s.jsx)(E,{kafka:a})},E=({kafka:e})=>(0,s.jsx)(P.w,Object.assign({kafkaInstance:e.kafkaDetail},{children:(0,s.jsx)(H,{kafka:e})})),H=({kafka:{kafkaDetail:e,adminServerUrl:t}})=>{const{kafka:{getToken:a}}=(0,k.useAuth)(),i=(0,f.useHistory)(),[r,o]=(0,m.useState)(),c=(0,m.useCallback)((e=>{o(e)}),[]),d=(0,m.useCallback)((()=>{i.push("/streams/kafkas")}),[i]),l=(0,m.useMemo)((()=>{var a;return(0,s.jsx)(h.PS,{kafkaId:e.id,kafkaAdminUrl:t,totalMaxConnections:e.size.total_max_connections||0,maxConnections:e.size.max_connection_attempts_per_sec||0,maxPartitions:e.size.max_partitions||0,kafkaStorageBytes:(null===(a=e.max_data_retention_size)||void 0===a?void 0:a.bytes)||0})}),[t,e]),u=(0,m.useMemo)((()=>(0,s.jsx)(S.vJ,{})),[]),p=(0,m.useMemo)((()=>(0,s.jsx)(B,{kafkaId:e.id,owner:e.owner,reauthenticationEnabled:e.reauthentication_enabled})),[e.id,e.owner,e.reauthentication_enabled]),v=(0,m.useMemo)((()=>({kafkaPageLink:"/streams/kafkas",kafkaInstanceLink:`/streams/kafkas/${e.id}/topics`,showMetrics:l,onError:c,kafkaName:e.name,apiBasePath:t,getToken:a,showSchemas:u,kafka:e,redirectAfterDeleteInstance:d,showSettings:p})),[t,a,e,c,d,l,u,p]);return 401===r?(0,s.jsx)(h.Xx,{}):(0,s.jsx)(n.IG,{scope:"kas",module:"./InstanceDrawer",fallback:null,render:e=>(0,s.jsx)(I,Object.assign({},v,{InstanceDrawer:e}))})},M=({kafkaId:e,kafkaAdminUrl:t,totalMaxConnections:a,maxConnections:n,maxPartitions:r,kafkaStorageBytes:o})=>{const c=(0,k.useAuth)(),d=(0,f.useHistory)(),l=(0,k.useConfig)(),{getBasename:u}=(0,k.useBasename)()||{},p=u&&u(),v=`metrics-alert-${e}`,[h,b]=(0,m.useState)(null!==localStorage.getItem(v)),y=(0,m.useCallback)((t=>(0,i.mG)(void 0,void 0,void 0,(function*(){const s=yield function({kafkaId:e,duration:t,interval:a,accessToken:s,basePath:n}){return(0,i.mG)(this,void 0,void 0,(function*(){const i=new g.DefaultApi(new g.Configuration({accessToken:s,basePath:n})),r=((yield i.getMetricsByRangeQuery(e,t,a,["kubelet_volume_stats_used_bytes","kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum","kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name&&e.metric.persistentvolumeclaim&&e.metric.persistentvolumeclaim.includes("zookeeper")))),o={},c={},d={};return r.forEach((e=>{const{__name__:t}=e.metric;function a(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kubelet_volume_stats_used_bytes":a(o);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum":a(c);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum":a(d)}})),{usedDiskSpaceMetrics:o,clientConnectionsMetrics:d,connectionAttemptRateMetrics:c,diskSpaceLimit:0,connectionRateLimit:0,connectionsLimit:0}}))}(Object.assign(Object.assign({},t),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}));return Object.assign(Object.assign({},s),{diskSpaceLimit:o/1073741824,connectionsLimit:a,connectionRateLimit:n})}))),[c,l,e,o,a,n]),P=(0,m.useCallback)((a=>(0,i.mG)(void 0,void 0,void 0,(function*(){const[s,i]=yield Promise.all([T({accessToken:null==c?void 0:c.kafka.getToken(),basePath:t}),R(Object.assign(Object.assign({},a),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}))]),{metricsTopics:n,bytesIncoming:r,bytesOutgoing:o,bytesPerPartition:d,incomingMessageRate:u}=i;return{kafkaTopics:s,metricsTopics:n,bytesIncoming:r,bytesOutgoing:o,bytesPerPartition:d,incomingMessageRate:u}}))),[null==c?void 0:c.kafka,null==c?void 0:c.kas,l.kas.apiBasePath,t,e]),S=(0,m.useCallback)((()=>(0,i.mG)(void 0,void 0,void 0,(function*(){const t=yield function({accessToken:e,basePath:t,kafkaId:a}){return(0,i.mG)(this,void 0,void 0,(function*(){const s=new g.DefaultApi(new g.Configuration({accessToken:e,basePath:t}));let i=0,n=0,r=0;return((yield s.getMetricsByInstantQuery(a,["kafka_topic:kafka_topic_partitions:sum","kafka_topic:kafka_topic_partitions:count","consumergroup:kafka_consumergroup_members:count"])).data.items||[]).forEach((({metric:e,value:t})=>{const{__name__:a}=e;switch(a){case"kafka_topic:kafka_topic_partitions:sum":n=t;break;case"kafka_topic:kafka_topic_partitions:count":i=t;break;case"consumergroup:kafka_consumergroup_members:count":r=t}})),{consumerGroups:r,topicPartitions:n,topics:i}}))}({kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()});return Object.assign(Object.assign({},t),{topicPartitionsLimit:r})}))),[null==c?void 0:c.kas,l.kas.apiBasePath,e,r]);return void 0===l?(0,s.jsx)(x.AppServicesLoading,{}):(0,s.jsx)(x.Metrics,{onCreateTopic:()=>{d.push(`${p}/topic/create`)},getTopicsMetrics:P,getKafkaInstanceMetrics:y,getMetricsKpi:S,isClosed:h,onClickClose:()=>{b(!0),localStorage.setItem(v,"true")}})}},44735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(70655),i=a(85893),n=a(93264),r=a(15847),o=a(97644),c=a(3241),d=a(68698),l=a(40493),u=a(83463),p=a(15529);const v=({Component:e})=>{const t=(0,o.useConfig)(),a=(0,p.t)(),{t:v}=(0,r.useTranslation)(),{preCreateInstance:m,shouldOpenCreateModal:f}=(0,l.UI)({eventCode:a.kafka.ams.termsAndConditionsEventCode,siteCode:a.kafka.ams.termsAndConditionsSiteCode}),{getAllUserAccounts:h}=(0,d.jg)(),[g,k]=(0,n.useState)(void 0),[b,y]=(0,n.useState)(!1),[P,x]=(0,n.useState)(""),S=(0,d.fh)(),j=(0,n.useCallback)((e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const{shouldOpenCreateModal:t,url:a}=yield m(e);return!1!==t||!a||(y(!0),x(a),!1)}))),[m,y,x]),w=(0,n.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){window.location.href=P}))),[P]);return t.serviceDown?(0,i.jsx)(c.d,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u.TermsAndConditionModal,{isModalOpen:b,serviceName:v("common:kafka"),ouiaIdModal:"modal-KafkaTerms",ouiaIdButtonViewTerms:"button-view-terms",ouiaIdButtonCancel:"button-cancel",onClickViewTermsConditions:w,onCancel:()=>{y(!1)}}),(0,i.jsx)(e,Object.assign({preCreateInstance:j,shouldOpenCreateModal:f,drawerInstance:g,setDrawerInstance:k},S,{getAllUserAccounts:h}))]})},m=()=>{const{getQuota:e}=(0,l.fA)(null===o.ProductType||void 0===o.ProductType?void 0:o.ProductType.kas);return(0,i.jsx)(o.QuotaContext.Provider,Object.assign({value:{getQuota:e}},{children:(0,i.jsx)(d.IG,{scope:"kas",module:"./OpenshiftStreams",fallback:(0,i.jsx)(u.AppServicesLoading,{}),render:e=>(0,i.jsx)(v,{Component:e})})}))}},77745:(e,t,a)=>{a.r(t),a.d(t,{NotFoundPage:()=>p,default:()=>v});var s=a(85893),i=a(69957),n=a(47173),r=a(32045),o=a(9947),c=a(38424),d=a(60485),l=a(75106),u=a(73685);const p=()=>(0,s.jsx)(r.NP,{children:(0,s.jsxs)(o.u,Object.assign({variant:"full"},{children:[(0,s.jsx)(c.k,{icon:i.LP}),(0,s.jsx)(d.D,Object.assign({headingLevel:"h1",size:"lg"},{children:"404 Page not found"})),(0,s.jsx)(l.B,{children:"We didn't find a page that matches the address you navigated to."}),(0,s.jsx)((function(){const e=(0,u.useHistory)();return(0,s.jsx)(n.zx,Object.assign({onClick:function(){e.push("/")}},{children:"Take me home"}))}),{})]}))}),v=p},83857:(e,t,a)=>{a.r(t),a.d(t,{ConnectedOverviewPage:()=>n,default:()=>r});var s=a(85893),i=a(83463);const n=()=>(0,s.jsx)(i.OverviewPageV4,{toKafkaHref:"/streams/kafkas",toServiceRegistryHref:"/service-registry",toConnectorsHref:"/connectors",toAPIDesignHref:"/api-designer"}),r=n},60766:(e,t,a)=>{a.r(t),a.d(t,{ResourcesPage:()=>r,default:()=>o});var s=a(85893),i=a(68698),n=a(83463);const r=()=>(0,s.jsx)(i.IG,{scope:"guides",module:"./QuickStartCatalog",fallback:(0,s.jsx)(n.AppServicesLoading,{}),render:e=>(0,s.jsx)(e,{})}),o=r},15822:(e,t,a)=>{a.r(t),a.d(t,{ServiceAccountsPage:()=>c,default:()=>l});var s=a(85893),i=a(68698),n=a(97644),r=a(3241),o=a(83463);const c=()=>(0,s.jsx)(i.IG,{scope:"kas",module:"./ServiceAccounts",fallback:(0,s.jsx)(o.AppServicesLoading,{}),render:e=>(0,s.jsx)(d,{Component:e})}),d=({Component:e})=>{const t=(0,n.useConfig)();return(null==t?void 0:t.serviceDown)?(0,s.jsx)(r.d,{}):(0,s.jsx)(e,{})},l=c},3241:(e,t,a)=>{a.d(t,{d:()=>p});var s=a(85893),i=a(5913),n=a(32045),r=a(9947),o=a(38424),c=a(60485),d=a(75106),l=a(47173),u=a(15847);const p=()=>{const{t:e}=(0,u.useTranslation)(["appTemporaryFixMe"]);return(0,s.jsx)(n.NP,{children:(0,s.jsxs)(r.u,Object.assign({variant:"full"},{children:[(0,s.jsx)(o.k,{icon:i.R0}),(0,s.jsx)(c.D,Object.assign({headingLevel:"h1",size:"lg"},{children:e("serviceDown.serviceDownTitle")})),(0,s.jsx)(d.B,{children:e("serviceDown.serviceDownMessage")}),(0,s.jsx)(l.zx,Object.assign({variant:"primary",onClick:()=>{window.location.href="https://status.starter.openshift.com/"}},{children:e("serviceDown.serviceDownButton")}))]}))})}},15113:(e,t,a)=>{a.r(t),a.d(t,{ArtifactVersionDetails:()=>p,default:()=>f});var s=a(70655),i=a(85893),n=a(93264),r=a(73685),o=a(13179),c=a(51125),d=a(97644),l=a(15675),u=a(83463);const p=()=>{const e=(0,d.useConfig)();let{groupId:t,artifactId:a,version:s}=(0,r.useParams)();return t=decodeURIComponent(t),a=decodeURIComponent(a),s=decodeURIComponent(s),(null==e?void 0:e.serviceDown)?(0,i.jsx)(l.dB,{}):(0,i.jsx)(v,{groupId:t,artifactId:a,version:s},`${t}-${a}-${s}`)},v=({groupId:e,artifactId:t,version:a})=>(0,i.jsx)(c.q,{breadcrumbId:"srs.artifacts_details",groupId:e,artifactId:t,version:a,render:e=>(0,i.jsx)(m,{registry:e})}),m=({registry:e})=>{const[t,a]=(0,n.useState)(),r=(0,d.useAuth)();return(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){var e;yield null===(e=null==r?void 0:r.getUsername())||void 0===e?void 0:e.then((e=>a(e)))}))}),[r]),void 0===e||void 0===t?(0,i.jsx)(u.AppServicesLoading,{}):(0,i.jsx)(o.P,{registry:e,module:"./FederatedArtifactVersionPage"})},f=p},8172:(e,t,a)=>{a.r(t),a.d(t,{Artifacts:()=>c,default:()=>l});var s=a(85893),i=a(13179),n=a(51125),r=a(97644),o=a(15675);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(o.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(n.q,{breadcrumbId:"srs.artifacts",render:e=>(0,s.jsx)(i.P,{module:"./FederatedArtifactsPage",registry:e})}),l=c},74856:(e,t,a)=>{a.r(t),a.d(t,{ArtifactRedirect:()=>c,default:()=>l});var s=a(85893),i=a(13179),n=a(51125),r=a(97644),o=a(15675);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(o.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(n.q,{render:e=>(0,s.jsx)(i.P,{registry:e,module:"./FederatedArtifactRedirectPage"})}),l=c},22322:(e,t,a)=>{a.d(t,{c:()=>n});var s=a(85893),i=a(13179);const n=({registry:e,downloadLabel:t})=>(0,s.jsx)(i.P,{module:"./FederatedDownloadArtifacts",registry:e,fileName:e.name,downloadLinkLabel:t})},13179:(e,t,a)=>{a.d(t,{P:()=>m});var s=a(70655),i=a(85893);var n=a(68698),r=a(73685),o=a(97644),c=a(83463),d=a(93264),l=a(77834),u=a(72548);function p(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){try{const a=new u.PrincipalApi({accessToken:e,basePath:t});return yield a.listPrincipals(-1).then((e=>e.data.data.map((e=>{const t=e;return{id:e.username,principalType:o.PrincipalType.UserAccount,displayName:`${t.first_name} ${t.last_name}`,emailAddress:t.email}}))))}catch(e){console.warn("app-services-ui fetchUserAccounts error",e)}}))}function v(e,t){return(0,s.mG)(this,void 0,void 0,(function*(){try{const a=new l.SecurityApi({accessToken:e,basePath:t});return yield a.getServiceAccounts().then((e=>e.data.items.map((e=>({id:e.client_id,displayName:e.name,principalType:o.PrincipalType.ServiceAccount})))))}catch(e){console.warn("app-services-ui fetchServiceAccounts error",e)}}))}const m=e=>{var{module:t}=e,a=(0,s._T)(e,["module"]);return(0,i.jsx)(n.IG,{scope:"apicurio_registry",module:t,fallback:(0,i.jsx)(c.AppServicesLoading,{}),render:e=>(0,i.jsx)(f,Object.assign({Component:e},a))})},f=e=>{var{Component:t,registry:a}=e,n=(0,s._T)(e,["Component","registry"]);let l;const u=(0,o.useAlert)(),m=(0,o.useAuth)(),f=(0,o.useConfig)(),h=(0,r.useHistory)(),g=(0,o.useBasename)(),{loading:k,allPrincipals:b}=function(){const e=(0,o.useConfig)(),t=(0,o.useAuth)(),[a,i]=(0,d.useState)(!0),[n,r]=(0,d.useState)(),[c,l]=(0,d.useState)();return(0,d.useEffect)((()=>{(()=>{(0,s.mG)(this,void 0,void 0,(function*(){i(!0);try{const a=yield t.kas.getToken(),s=e.rbac.basePath,n=e.kas.apiBasePath;if(a){const[e,t]=yield Promise.allSettled([p(a,s),v(a,n)]);"fulfilled"===e.status&&l(e.value),"fulfilled"===t.status&&r(t.value)}else console.warn("app-services-ui no access token in usePrincipals");i(!1)}catch(e){i(!1)}}))})()}),[t,e]),{loading:a,users:c,services:n,allPrincipals:c||n?[...c||[],...n||[]]:void 0}}(),y=null==m?void 0:m.apicurio_registry.getToken;let{groupId:P,artifactId:x,version:S}=(0,r.useParams)();return P=decodeURIComponent(P),x=decodeURIComponent(x),S=decodeURIComponent(S),void 0===f||void 0===a||k?(0,i.jsx)(c.AppServicesLoading,{}):y&&g?(l=((e,t,a,s,i,n)=>({artifacts:{url:`${a}/apis/registry`},auth:{type:"gettoken",getToken:i},features:{readOnly:!1,breadcrumbs:!1,roleManagement:!0,multiTenant:!0,settings:!0,alerts:t},ui:{navPrefixPath:s},principals:n}))(0,u,a.registryUrl,`${g.getBasename()}/t/${null==a?void 0:a.id}`,y,b),(0,i.jsx)(t,Object.assign({config:l,tenantId:a.id,groupId:P,artifactId:x,version:S,history:h},n))):null}},42789:(e,t,a)=>{a.r(t),a.d(t,{RulesPage:()=>c,default:()=>l});var s=a(85893),i=a(13179),n=a(51125),r=a(97644),o=a(15675);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(o.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(n.q,{breadcrumbId:"srs.global_rules",render:e=>(0,s.jsx)(i.P,{registry:e,module:"./FederatedRulesPage"})}),l=c},92225:(e,t,a)=>{a.r(t),a.d(t,{ServiceRegistryPage:()=>f,ServiceRegistryPageConnected:()=>h,default:()=>g});var s=a(70655),i=a(85893),n=a(93264),r=a(15847),o=a(68698),c=a(15675),d=a(40493),l=a(83463),u=a(97644),p=a(22322),v=a(15529),m=a(85169);const f=()=>{const{getQuota:e}=(0,d.fA)(u.ProductType.srs);return(0,i.jsx)(u.QuotaContext.Provider,Object.assign({value:{getQuota:e}},{children:(0,i.jsx)(o.A6,{children:(0,i.jsx)(o.IG,{scope:"srs",module:"./ServiceRegistry",fallback:(0,i.jsx)(l.AppServicesLoading,{}),render:e=>(0,i.jsx)(h,{Component:e})})})}))},h=({Component:e})=>{const t=(0,u.useConfig)(),a=(0,m.a)(),{t:o}=(0,r.useTranslation)(["service-registry"]),f=(0,v.t)(),{preCreateInstance:h,shouldOpenCreateModal:g}=(0,d.UI)({eventCode:f.serviceRegistry.ams.termsAndConditionsEventCode,siteCode:f.serviceRegistry.ams.termsAndConditionsSiteCode}),[k,b]=(0,n.useState)(!1),[y,P]=(0,n.useState)(""),x=(0,n.useCallback)((e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const{shouldOpenCreateModal:t,url:a}=yield h(e);return!1!==t||!a||(b(!0),P(a),!1)}))),[h,b,P]),S=(0,n.useCallback)((()=>{b(!1)}),[b]),j=(0,n.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){window.location.href=y}))),[y]);return void 0===t?(0,i.jsx)(l.AppServicesLoading,{}):t.serviceDown?(0,i.jsx)(c.dB,{}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l.TermsAndConditionModal,{isModalOpen:k,serviceName:o("service_registry"),ouiaIdModal:"modal-SrvRegTerms",ouiaIdButtonViewTerms:"button-view-terms",ouiaIdButtonCancel:"button-cancel",onClickViewTermsConditions:j,onCancel:S}),(0,i.jsx)(l.DevelopmentPreview,{children:(0,i.jsx)(e,{preCreateInstance:x,shouldOpenCreateModal:g,tokenEndPointUrl:null==a?void 0:a.tokenEndPointUrl,renderDownloadArtifacts:(e,t)=>(0,i.jsx)(p.c,{registry:e,downloadLabel:t})})})]})},g=f},51125:(e,t,a)=>{a.d(t,{q:()=>c});var s=a(85893),i=a(68698),n=a(83463),r=a(22322),o=a(85169);const c=e=>(0,s.jsx)(i.IG,{scope:"srs",module:"./ApicurioRegistry",fallback:(0,s.jsx)(n.AppServicesLoading,{}),render:t=>(0,s.jsx)(d,Object.assign({Component:t},e))}),d=({Component:e,render:t,breadcrumbId:a,groupId:n,artifactId:c,version:d})=>{const l=(0,o.a)();return(0,s.jsx)(i.A6,{children:(0,s.jsx)(e,{render:t,breadcrumbId:a,tokenEndPointUrl:null==l?void 0:l.tokenEndPointUrl,groupId:n,artifactId:c,version:d,renderDownloadArtifacts:(e,t)=>(0,s.jsx)(r.c,{registry:e,downloadLabel:t})})})}},17779:(e,t,a)=>{a.d(t,{vJ:()=>c});a(8172),a(74856),a(15113),a(42789),a(92225);var s=a(85893),i=a(73685),n=a(13179),r=a(68698),o=a(83463);const c=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.IG,{scope:"srs",module:"./ServiceRegistryMapping",fallback:(0,s.jsx)(o.AppServicesLoading,{}),render:e=>(0,s.jsx)(d,{Component:e})})}),d=({Component:e})=>{const{topicName:t}=(0,i.useParams)(),a="/service-registry";return(0,s.jsx)(e,{basename:a,topicName:t,renderSchema:e=>(0,s.jsx)(n.P,{module:"./FederatedSchemaMapping",registry:e,topicName:t,groupId:null,version:"latest",registryId:null==e?void 0:e.id,basename:a})})}},15675:(e,t,a)=>{a.d(t,{Xx:()=>d,cQ:()=>l.cQ,PS:()=>l.PS,Jh:()=>l.Jh,EP:()=>l.EP,A:()=>l.A,dB:()=>u.d,nT:()=>l.nT,Fn:()=>l.Fn,dS:()=>l.dS});var s=a(85893),i=a(55189),n=a(28682),r=a(15847),o=a(73685);const c=({href:e,children:t})=>(0,s.jsx)(o.Link,Object.assign({to:e||""},{children:t})),d=()=>{const{t:e}=(0,r.useTranslation)(["appTemporaryFixMe"]),t=(0,s.jsx)(r.Trans,{i18nKey:"accessdenied.accessDeniedDescription",t:e,components:[(0,s.jsx)(c,{href:"/streams/kafkas"},"kafkas")]});return(0,s.jsx)(i.ZP,{children:(0,s.jsx)(n.Z,{title:e("accessdenied.accessDeniedTitle"),description:t,prevPageButtonText:e("accessdenied.accessDeniedButtonText"),showReturnButton:!0})})};a(37272),a(23456),a(75401);var l=a(49291),u=(a(44735),a(77745),a(83857),a(60766),a(15822),a(3241));a(17779)},85169:(e,t,a)=>{a.d(t,{V:()=>i,a:()=>n});var s=a(93264);const i=(0,s.createContext)(void 0),n=()=>{const e=(0,s.useContext)(i);if(void 0===e)throw new Error("must be used inside an AuthContext provider");return e}},26836:(e,t,a)=>{a.d(t,{N:()=>u});var s=a(70655),i=a(85893),n=a(93264),r=a(97644);const o=JSON.parse('{"Q":{"kas":{"basePath":"/mas-local-fm/kas","proxyTarget":"http://0.0.0.0:9000","fallbackBasePath":"/beta/apps/rhosak-control-plane-ui-build"},"kafka":{"basePath":"/mas-local-fm/kafka","proxyTarget":"http://0.0.0.0:8080","fallbackBasePath":"/beta/apps/rhosak-data-plane-ui-build"},"guides":{"basePath":"/mas-local-fm/guides","proxyTarget":"http://0.0.0.0:9001","fallbackBasePath":"/beta/apps/rhoas-guides-build"},"apicurio_registry":{"basePath":"/mas-local-fm/apicurio_registry","proxyTarget":"http://0.0.0.0:8888","fallbackBasePath":"/beta/apps/sr-ui-build"},"srs":{"basePath":"/mas-local-fm/srs","proxyTarget":"http://0.0.0.0:9005","fallbackBasePath":"/beta/apps/srs-ui-build"},"cos":{"basePath":"/mas-local-fm/cos","proxyTarget":"http://0.0.0.0:9002","fallbackBasePath":"/beta/apps/cos-ui-build"},"ads":{"basePath":"/mas-local-fm/ads","proxyTarget":"http://0.0.0.0:9009","fallbackBasePath":"/beta/apps/ads-ui-build"},"smart_events":{"basePath":"/mas-local-fm/smart_events","proxyTarget":"http://0.0.0.0:9006","fallbackBasePath":"/beta/apps/se-ui-build"},"sas_ui":{"basePath":"/mas-local-fm/sas_ui","proxyTarget":"http://0.0.0.0:9000","fallbackBasePath":"/beta/apps/rhosak-control-plane-ui-build"}},"v":[{"hostnames":["prod.foo.redhat.com"],"fetchConfig":true,"type":"proxy","config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"sas_ui":{"apiBasePath":"https://sso.redhat.com/auth/realms/redhat-external"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"apicurio_registry":{"apiBasePath":""},"rbac":{"basePath":"/api/rbac/v1"},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"ads":{"editorsBasePath":"http://0.0.0.0:9011"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"smart_events":{"apiBasePath":"https://lcstem2z9g006s6.api.stage.openshift.com"}}},{"hostnames":["qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":true},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"sas_ui":{"apiBasePath":"https://sso.redhat.com/auth/realms/redhat-external"},"kafka":{},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"ads":{"editorsBasePath":"https://qaprodauth.console.redhat.com/beta/apps/ads-editors-build/index.html"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"smart_events":{"apiBasePath":"https://lcstem2z9g006s6.api.stage.openshift.com"}}},{"hostnames":["cloud.redhat.com","console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.openshift.com"},"kas":{"apiBasePath":"https://api.openshift.com"},"sas_ui":{"apiBasePath":"https://sso.redhat.com/auth/realms/redhat-external"},"kafka":{},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.openshift.com"},"ads":{"editorsBasePath":"https://console.redhat.com/beta/apps/ads-editors-build/index.html"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://api.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"smart_events":{"apiBasePath":""}}}]}'),c=e=>{const t=window.location.hostname;console.log(`Filter config for ${t}`);const a=e.filter((e=>e.hostnames.includes(t)));if(a.length>1)throw new Error(`Unable to find config for ${t}, more than one config matched ${a}`);if(a.length<1){const t=e.filter((e=>e.hostnames.includes("console.redhat.com")));if(t.length>1)throw new Error(`Unable to load default config, more than one config matched ${a}`);if(t.length<1)throw new Error("Unable to load default config, no configs matched");return t[0]}return a[0]},d=(e,t,a)=>{const s={};return Object.entries(t).forEach((([t,i])=>{let n,{basePath:r}=i;"proxy"!==e.type?r=i.fallbackBasePath:n=i.fallbackBasePath,a||(r.startsWith("/beta")&&(r=r.substring(5)),(null==n?void 0:n.startsWith("/beta"))&&(n=n.substring(5))),s[t]={basePath:r,fallbackBasePath:n}})),Object.assign(Object.assign({},e.config),{federatedModules:s})};var l=a(31589);const u=({children:e})=>{const{beta:t}=(0,l.gV)(),[u,p]=(0,n.useState)((()=>{const e=o.v,a=c(e);if(a.fetchConfig)return;const s=d(a,o.Q,t);return console.log("Done loading config",s),s}));return(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0===u){const e=yield fetch(`${a.p}config.json`),s=yield e.json(),i=c(s.config),n=d(i,s.federatedModules,t);console.debug("Done loading config",n),p(n)}}))}),[t,u]),(0,i.jsx)(r.ConfigContext.Provider,Object.assign({value:u},{children:e}))}},15529:(e,t,a)=>{a.d(t,{A:()=>i,t:()=>n});var s=a(93264);const i=(0,s.createContext)(void 0),n=()=>{const e=(0,s.useContext)(i);if(void 0===e)throw new Error("useConstants must be used inside an ServiceConstantsContextProvider");return e}},18047:(e,t,a)=>{a.d(t,{B:()=>r});var s=a(85893),i=a(15529);const n=JSON.parse('{"version":1,"kafka":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosak|standard","trialQuotaId":"cluster|rhinfra|rhosaktrial|standard","quotaProductId":"RHOSAK","trialQuotaProductId":"RHOSAKTrial","resourceName":"rhosak"}},"serviceRegistry":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosr|any","trialQuotaId":"cluster|rhinfra|rhosrtrial|any","quotaProductId":"RHOSR","trialQuotaProductId":"RHOSRTrial","resourceName":"rhosr"}}}'),r=({children:e})=>(0,s.jsx)(i.A.Provider,Object.assign({value:n},{children:e}))},31589:(e,t,a)=>{a.d(t,{O1:()=>o,gV:()=>r});var s=a(85893),i=a(93264);const n=(0,i.createContext)(void 0),r=()=>{const e=(0,i.useContext)(n);if(void 0===e)throw new Error("useFeatureFlags must be used inside a FeatureFlagContext provider");return e},o=({children:e})=>{const t={beta:window.location.pathname.startsWith("/beta")};return(0,s.jsx)(n.Provider,Object.assign({value:t},{children:e}))}},36494:(e,t,a)=>{a.d(t,{S:()=>c});var s=a(39133),i=a.n(s),n=a(5068),r=a(83215);let o;function c(...e){return o||(o=new(i())({},[n.ZP,...e]),o.register({notifications:r.ee})),o}},73322:(e,t,a)=>{a.d(t,{S:()=>d,c:()=>c});var s=a(85893),i=a(93264),n=a(73685),r=a(9903);const o=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,77745)))),c=({title:e})=>((0,r.j)(e),(0,s.jsx)(n.Route,{component:o})),d=e=>e.reduce(((e,t)=>[...e,...t.routes?t.routes:[t]]),[])},37687:(e,t,a)=>{a.d(t,{Z:()=>s});const s=function(e){let t="/";const a=e.split("/");return a.shift(),"beta"===a[0]&&(a.shift(),t="/beta/"),`${t}${a[0]}`}},9903:(e,t,a)=>{a.d(t,{j:()=>i});var s=a(93264);function i(e){(0,s.useEffect)((()=>{const t=document.title;return document.title=e,()=>{document.title=t}}),[e])}}}]);
//# sourceMappingURL=5754.66b9a82c02346d5a8da2.js.map