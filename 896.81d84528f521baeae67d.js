"use strict";(self.webpackChunkapplication_services_ui=self.webpackChunkapplication_services_ui||[]).push([[896],{28495:(e,t,a)=>{a.d(t,{Z:()=>L});var o=a(85893),i=a(75418),s=a(68199),r=a(78625),n=a(83811),c=a(70655),d=a(98823),l=a(71987),u=a(79905),v=a(62579),p=a(27326),f=a(36734),m=a(5854),h=a(41970),g=a(99922);const k=(0,i.lazy)((()=>a.e(3271).then(a.bind(a,33271)))),b=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,15447)))),y=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,29913)))),_=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,13117)))),P=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,64765)))),S=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,62808)))),x=(0,i.lazy)((()=>a.e(4720).then(a.bind(a,44720)))),j=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,88530)))),w=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,69372)))),A=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,91285)))),C=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,31841)))),O=(0,i.lazy)((()=>a.e(4359).then(a.bind(a,54359)))),I=(0,i.lazy)((()=>a.e(1586).then(a.bind(a,31586)))),T=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,80140)))),R=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,44055)))),E=()=>(0,o.jsx)(s.Redirect,{to:"/streams/kafkas"},void 0),B=[{component:()=>(0,o.jsx)(s.Redirect,{to:"/overview"},void 0),exact:!0,label:"Overview",path:"/",title:"Overview | Red Hat OpenShift Application Services"},{component:w,exact:!0,label:"Overview",path:"/overview",title:"Overview | Red Hat OpenShift Application Services"},{component:b,exact:!0,label:"API Management",path:"/api-management",title:"API Management | Red Hat OpenShift Application Services"},{component:S,exact:!0,label:"Data Science",path:"/data-science",title:"Data Science | Red Hat OpenShift Application Services"},{component:A,exact:!0,label:"Learning Resources | Red Hat OpenShift Application Services",path:"/learning-resources",title:"Learning Resources | Red Hat OpenShift Application Services",devPreview:!1},{component:E,exact:!0,label:"Streams for Apache Kafka",path:"/streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:x,exact:!0,label:"Streams for Apache Kafka",path:"/streams/overview",title:"Overview | Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:j,exact:!0,label:"Streams for Apache Kafka",path:"/streams/kafkas",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas",devPreview:!1},{component:(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,62655)))),exact:!0,label:"Service Registry",path:"/service-registry",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:_,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:()=>(0,o.jsx)(s.Redirect,{to:"/service-accounts"},void 0),exact:!0,label:"Service Accounts",path:"/streams/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:()=>(0,o.jsx)(s.Redirect,{to:"/learning-resources"},void 0),label:"QuickStarts for Red Hat OpenShift Application Services",path:"/streams/resources",title:"QuickStarts for Red Hat OpenShift Application Services",devPreview:!0},{component:f.aH,label:"Streams for Apache Kafka",path:"/streams/kafkas/:id",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas/:id",devPreview:!1},{component:_,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:C,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/rules",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:O,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/roles",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:I,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/settings",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:y,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId/versions/:version",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:R,exact:!1,label:"COS",path:"/connectors",title:"Connectors | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/connectors`,devPreview:!0},{component:T,exact:!0,label:"Service Accounts",path:"/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:E,exact:!0,label:"Streams for Apache Kafka",path:"/openshift-streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"}],D=e=>{var{component:t,title:a,basename:r,devPreview:n}=e,l=(0,c.__rest)(e,["component","title","basename","devPreview"]);const{t:v}=(0,h.useTranslation)(),f=(0,s.useHistory)();(0,p.jr)(a);const k=(0,i.useCallback)((()=>r||""),[r]),b=(0,i.useCallback)((()=>f.push("/")),[f]),y=(0,i.useCallback)((e=>(0,o.jsx)(d.ErrorBoundary,Object.assign({fallbackRender:({error:e})=>"404"===e.message?(0,o.jsx)(u.AppServicesPageNotFound,{},void 0):(0,o.jsx)(u.AppServicesEmptyState,Object.assign({emptyStateProps:{variant:u.AppServicesEmptyStateVariant.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:v("common:something_went_wrong")},emptyStateBodyProps:{body:v("common:unexpected_error")}},{children:(0,o.jsx)(g.Button,Object.assign({onClick:b},{children:v("common:return_to_home_page")}),void 0)}),void 0)},{children:(0,o.jsx)(u.DevelopmentPreview,Object.assign({show:n},{children:(0,o.jsx)(m.BasenameContext.Provider,Object.assign({value:{getBasename:k}},{children:(0,o.jsx)(t,Object.assign({},l,e),void 0)}),void 0)}),void 0)}),void 0)),[t,n,k,b,l,v]);return(0,o.jsx)(s.Route,Object.assign({render:y},l),void 0)},H=()=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.Suspense,Object.assign({fallback:(0,o.jsx)(u.AppServicesLoading,{},void 0)},{children:(0,o.jsxs)(s.Switch,{children:[(0,v.S)(B).map(((e,t)=>{var{path:a,exact:i,component:s,title:r,isAsync:n}=e,d=(0,c.__rest)(e,["path","exact","component","title","isAsync"]);return(0,o.jsx)(D,Object.assign({path:a,exact:i,component:s,title:r,isAsync:n},d),t)})),(0,o.jsx)(v.c,{title:"404 Page Not Found"},void 0)]},void 0)}),void 0),(0,o.jsx)(k,{},void 0)]},void 0);var K=a(98307),$=a(86437);const L=(0,r.connect)()((()=>{const e=(0,$.pp)(),t=(0,s.useHistory)(),a=(0,i.useCallback)((()=>{const e="overview",a=t.location.pathname.split("/");return a.length>1?""===a[1]?e:"openshift-streams"===a[1]?"streams":a[1]:e}),[t]);return(0,i.useEffect)((()=>{e.chrome.init();const o=a();e.chrome.identifyApp(o);const i=e.chrome.on("APP_NAVIGATION",(e=>{t.push(`/${["kafkas","service-accounts","resources"].includes(e.navId)?"streams/":""}${e.navId}`)}));return()=>{i()}}),[a,t,e.chrome]),(0,o.jsxs)(K.Gg,{children:[(0,o.jsx)(n.NotificationsPortal,{},void 0),(0,o.jsx)(g.Page,{children:(0,o.jsx)(H,{},void 0)},void 0)]},void 0)}))},85859:(e,t,a)=>{a.d(t,{I:()=>l});var o=a(70655),i=a(85893),s=a(75418),r=a(5854),n=a(98307),c=a(79905);const d=()=>{const e=(0,s.useRef)(!1);return(0,s.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e};const l=({scope:e,module:t,render:a,fallback:r})=>{console.log("Dynamic federated module",e,t);const c=d(),{getModuleInfo:l,modules:v}=(0,n.N)(),[p,f]=(0,s.useState)();return(0,s.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield l(v[e].basePath,e,v[e].fallbackBasePath);c.current&&f(t)}))}),[e,v,l,c]),void 0!==p?(0,i.jsx)(u,{scope:e,module:t,render:a,moduleInfo:p},void 0):void 0!==r?(0,i.jsx)(i.Fragment,{children:r},void 0):null},u=({moduleInfo:e,fallback:t,scope:n,render:l,module:u})=>{const{ready:v,failed:p}=(e=>{const t=d(),[a,o]=(0,s.useState)(!1),[i,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{let a;if(t.current){if(!e)return void r(!0);a=document.createElement("script"),a.src=e,a.type="text/javascript",a.async=!0,o(!1),r(!1),a.onload=()=>{console.log(`Dynamic federated module Loaded: ${e}`),o(!0)},a.onerror=()=>{console.error(`Dynamic federated module Error: ${e}`),o(!1),r(!0)},document.head.appendChild(a)}return()=>{a&&(console.log(`Dynamic federated module Removed: ${e}`),document.head.removeChild(a))}}),[t,e]),{ready:a,failed:i}})(e.entryPoint);if(v&&!p){const t=(0,s.lazy)(function(e,t){return()=>(0,o.__awaiter)(this,void 0,void 0,(function*(){yield a.I("default");const o=window[e];yield o.init(a.S.default);const i=(yield o.get(t))();return console.debug(`loaded ${t} from ${e}`),i}))}(n,u)),d=()=>e.basePath;return(0,i.jsx)(r.AssetsContext.Provider,Object.assign({value:{getPath:d}},{children:(0,i.jsx)(s.Suspense,Object.assign({fallback:(0,i.jsx)(c.AppServicesLoading,{},void 0)},{children:l(t)}),void 0)}),void 0)}return t?(0,i.jsx)(i.Fragment,{children:t},void 0):null}},82436:(e,t,a)=>{a.d(t,{j:()=>d,w:()=>l});var o=a(70655),i=a(85893),s=a(75418),r=a(28929),n=a(5854),c=a(97744);const d=()=>{const e=(0,n.useConfig)(),t=(0,n.useAuth)(),[a,i]=(0,s.useState)(),[d,l]=(0,s.useState)();(0,s.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),o=new c.PrincipalApi({accessToken:a,basePath:null==e?void 0:e.rbac.basePath});try{const e=yield o.listPrincipals(-1).then((e=>e.data.data.map((e=>({id:e.username,principalType:n.PrincipalType.UserAccount,displayName:`${e.first_name} ${e.last_name}`,emailAddress:e.email})))));l(e)}catch(e){}}}))}),[t,e]),(0,s.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),o=new r.SecurityApi({accessToken:a,basePath:e.kas.apiBasePath}),s=yield o.getServiceAccounts().then((e=>e.data.items.map((e=>({id:e.client_id,displayName:e.name,principalType:n.PrincipalType.ServiceAccount})))));i(s)}}))}),[t,e]);return{getAllPrincipals:(0,s.useCallback)((()=>{let e=[];return void 0!==d&&void 0!==a&&(e=e.concat(d)),void 0!==a&&(e=e.concat(a)),e}),[a,d]),getAllUserAccounts:(0,s.useCallback)((()=>d||[]),[d]),getAllServiceAccounts:(0,s.useCallback)((()=>a||[]),[a])}},l=({children:e})=>{const t=d();return(0,i.jsx)(n.PrincipalsContext.Provider,Object.assign({value:t},{children:e}),void 0)}},98307:(e,t,a)=>{a.d(t,{IG:()=>n.I,Gg:()=>p,A6:()=>h,N:()=>f,fh:()=>r,jg:()=>m.j});var o=a(75418),i=a(68199),s=a(86437);function r(){const e=(0,i.useHistory)(),[t,a]=(0,o.useState)(!1),[r,n]=(0,o.useState)(void 0),c=(0,o.useCallback)((e=>{e&&n(e),a(!0)}),[]),d=(0,o.useCallback)((()=>{n(void 0),a(!1)}),[]),{getTokenEndPointUrl:l}=(0,s.NG)();return{isDrawerOpen:t,drawerActiveTab:r,setDrawerActiveTab:n,openDrawer:c,closeDrawer:d,tokenEndPointUrl:l(),onDeleteInstance:()=>{e.push("/streams/kafkas")}}}var n=a(85859),c=a(70655),d=a(85893),l=a(5854),u=a(79905);const v=(0,o.createContext)(void 0),p=({children:e})=>{const t=(0,o.useRef)({}),a=(0,l.useConfig)();if(void 0===a)return(0,d.jsx)(u.AppServicesLoading,{},void 0);return(0,d.jsx)(v.Provider,Object.assign({value:{modules:a.federatedModules,getModuleInfo:(e,a,o)=>(0,c.__awaiter)(void 0,void 0,void 0,(function*(){if(void 0!==t.current[a])return t.current[a];const i=yield((e,t,a)=>(0,c.__awaiter)(void 0,void 0,void 0,(function*(){const o=e=>(0,c.__awaiter)(void 0,void 0,void 0,(function*(){const a=`${e}/fed-mods.json?ts=${Date.now()}`,o=yield fetch(a);return yield o.json().then((e=>e)).then((e=>e[t])).then((e=>e.entry[0])).then((t=>t.startsWith(e)?{entryPoint:t,basePath:e}:{entryPoint:`${e}${t}`,basePath:e}))}));try{return yield o(e)}catch(e){if(a)try{return yield o(a)}catch(e){return}}})))(e,a,o);return void 0!==i&&(t.current[a]=i),i}))}},{children:e}),void 0)},f=()=>{const e=(0,o.useContext)(v);if(void 0===e)throw new Error("must be used inside FederatedModuleContext provider");return e};var m=a(82436);const h=({children:e})=>(0,d.jsx)(n.I,{scope:"kas",module:"./KasModalLoader",fallback:null,render:t=>(0,d.jsx)(t,{children:e},void 0)},void 0)},86437:(e,t,a)=>{a.d(t,{aC:()=>g,pp:()=>m,NG:()=>k,UI:()=>f,fA:()=>c});var o=a(70655),i=a(75418),s=a(5854),r=a(11483),n=a(84875);const c=e=>{const t=(0,s.useConfig)(),a=(0,s.useAuth)(),c=(0,n.t)(),[d,l]=(0,i.useState)();(0,i.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if(!d){const e=yield null==a?void 0:a.ams.getToken(),o=new r.AppServicesApi({accessToken:e,basePath:(null==t?void 0:t.ams.apiBasePath)||""});yield o.apiAccountsMgmtV1CurrentAccountGet().then((e=>{var t,a;const o=null===(a=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.organization)||void 0===a?void 0:a.id;l(o)}))}}))}),[t,a,d]);const u=(0,i.useCallback)((()=>{const t=c.kafka.ams.quotaProductId,a=c.kafka.ams.trialQuotaProductId,o=c.kafka.ams.resourceName,i=c.serviceRegistry.ams.quotaProductId,r=c.serviceRegistry.ams.trialQuotaProductId,n=c.serviceRegistry.ams.resourceName;if(e===s.ProductType.kas)return{quotaProductId:t,trialQuotaProductId:a,resourceName:o,quotaKey:s.QuotaType.kas,trialQuotaKey:s.QuotaType.kasTrial};if(e===s.ProductType.srs)return{quotaProductId:i,trialQuotaProductId:r,resourceName:n,quotaKey:s.QuotaType.srs,trialQuotaKey:s.QuotaType.srsTrial};throw new Error(`getQuotaTypesByProductId error, unrecognized productId ${e}`)}),[c,e]),v=(0,i.useCallback)((()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){var e,o,i,s;const n=new Map,c={loading:!0,isServiceDown:!1,data:void 0};if(d){const{quotaProductId:l,trialQuotaProductId:v,resourceName:p,quotaKey:f,trialQuotaKey:m}=u()||{},h=yield null==a?void 0:a.ams.getToken(),g=new r.AppServicesApi({accessToken:h,basePath:(null==t?void 0:t.ams.apiBasePath)||""});try{const t=yield g.apiAccountsMgmtV1OrganizationsOrgIdQuotaCostGet(d,void 0,!0),a=null===(o=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.items)||void 0===o?void 0:o.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===p&&e.product===l))})),r=null===(s=null===(i=null==t?void 0:t.data)||void 0===i?void 0:i.items)||void 0===s?void 0:s.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===p&&e.product===v))}));if(a&&a.allowed>0){const e=(null==a?void 0:a.allowed)-(null==a?void 0:a.consumed);null==n||n.set(f,{allowed:null==a?void 0:a.allowed,consumed:null==a?void 0:a.consumed,remaining:e<0?0:e})}r&&(null==n||n.set(m,{allowed:null==r?void 0:r.allowed,consumed:null==r?void 0:r.consumed,remaining:(null==r?void 0:r.allowed)-(null==r?void 0:r.consumed)})),c.loading=!1,c.data=n}catch(e){c.loading=!1,c.isServiceDown=!0,console.error(e)}}return c}))),[a,t,u,d]);return{orgId:d,getQuota:v}};var d,l=a(68199),u=a(87211);!function(e){e[e.IDLE=0]="IDLE",e[e.FETCHING=1]="FETCHING",e[e.FETCHED=2]="FETCHED",e[e.FETCH_ERROR=3]="FETCH_ERROR"}(d||(d={}));const v=(e,t,a)=>({key:"selfTermsReview",fetch:()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const o=yield null==t?void 0:t.ams.getToken(),i=new r.AppServicesApi({accessToken:o,basePath:(null==e?void 0:e.ams.apiBasePath)||""});return(yield i.apiAuthorizationsV1SelfTermsReviewPost({event_code:a.eventCode,site_code:a.siteCode})).data}))}),p=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),f=e=>{const t=(e=>{const t=(0,s.useConfig)(),a=(0,s.useAuth)(),r=(0,i.useRef)(),n=(0,i.useCallback)((()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if(void 0!==r.current)return r.current;const o=yield v(t,a,e).fetch().then((e=>e));return r.current=o,o}))),[a,t,e]);return(0,i.useEffect)((()=>{n()}),[t,a,n]),n})(e),a=(0,l.useLocation)();return{shouldOpenCreateModal:()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if("true"===(0,u.parse)(a.search).create){if(!(yield t()).terms_required)return!0}return!1})),preCreateInstance:e=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const a=yield t();if(a.terms_available||a.terms_required){if(void 0===a.redirect_url)throw new Error("terms must be signed but there is no terms url");const e=(0,u.stringifyUrl)({url:window.location.href,query:{create:"true"}}),t=((e,t,a)=>`${e}&${p({redirect:t,cancelRedirect:a})}`)(a.redirect_url,e,window.location.href);return window.location.href=t,!1}return e}))}},m=()=>{const e=window.insights;if(void 0===e)throw new Error("must be used inside an initialized insights context");return e};var h=a(27326);const g=()=>{const e=(0,i.useRef)(),t=(0,s.useConfig)(),a=m();if(void 0===t||void 0===a.chrome.auth)throw new Error("useAuth must be used inside a config provider, and insights auth");const r=a.chrome.auth,n=(0,i.useCallback)((()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const a=e.current;if(void 0===a){const a=yield((e,t)=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const a={url:e.masSso.authServerUrl,clientId:e.masSso.clientId,realm:e.masSso.realm};return yield(0,h.Nn)(a,t)})))(t,r.getToken);return e.current=a,a}return a}))),[t,r]);(0,i.useEffect)((()=>{n()}),[t,n,r]);const c=()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const e=yield n();return(0,h.hP)(e,r.getToken)})),d=r.getToken;return{getUsername:()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){return(yield r.getUser()).identity.user.username})),isOrgAdmin:()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){return(yield r.getUser()).identity.user.is_org_admin})),kafka:{getToken:c},kas:{getToken:d},ams:{getToken:d},srs:{getToken:d},apicurio_registry:{getToken:c},smart_events:{getToken:d}}},k=()=>{const e=(0,s.useConfig)();return{getTokenEndPointUrl:()=>{if(e)return(0,h.jW)(e.masSso.authServerUrl,e.masSso.realm)}}}},15447:(e,t,a)=>{a.r(t),a.d(t,{APIManagementOverviewPage:()=>s,default:()=>r});var o=a(85893),i=a(79905);const s=()=>(0,o.jsx)(i.APIManagementPage,{},void 0),r=s},44055:(e,t,a)=>{a.r(t),a.d(t,{CosPage:()=>c,default:()=>d});var o=a(85893),i=a(98307),s=a(38955),r=a(5854),n=a(79905);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,o.jsx)(s.d,{},void 0):(0,o.jsx)(i.IG,{scope:"cos",fallback:(0,o.jsx)(n.AppServicesLoading,{},void 0),module:"./OpenshiftManagedConnectors",render:e=>(0,o.jsx)(e,{},void 0)},void 0)},d=c},62808:(e,t,a)=>{a.r(t),a.d(t,{DataScienceOverViewPage:()=>s,default:()=>r});var o=a(85893),i=a(79905);const s=()=>(0,o.jsx)(i.DataSciencePage,{},void 0),r=s},36734:(e,t,a)=>{a.d(t,{cQ:()=>p,PS:()=>D,Jh:()=>v,EP:()=>d,A:()=>u,aH:()=>C,nT:()=>c,Fn:()=>n,dS:()=>l});var o=a(85893),i=a(70655),s=a(98307);const r=e=>{var{module:t}=e,a=(0,i.__rest)(e,["module"]);return(0,o.jsx)(s.IG,{"data-ouia-app-id":"dataPlane-streams",scope:"kafka",module:t,render:e=>(0,o.jsx)(e,Object.assign({},a),void 0)},void 0)},n=e=>(0,o.jsx)(r,Object.assign({module:"./Topics"},e),void 0),c=e=>(0,o.jsx)(r,Object.assign({module:"./TopicDetails"},e),void 0),d=e=>(0,o.jsx)(r,Object.assign({module:"./CreateTopic"},e),void 0),l=e=>(0,o.jsx)(r,Object.assign({module:"./UpdateTopic"},e),void 0),u=e=>(0,o.jsx)(r,Object.assign({module:"./Dashboard"},e),void 0),v=e=>(0,o.jsx)(r,Object.assign({module:"./ConsumerGroups"},e),void 0),p=e=>(0,o.jsx)(r,Object.assign({module:"./AclPermissions"},e),void 0);var f=a(75418),m=a(68199),h=a(23173),g=a(82161),k=a(82436),b=a(5854),y=a(79905),_=a(63564),P=a(62579),S=a(27326);const x=[{component:h.Fn,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.nT,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.EP,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/create",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.dS,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/update/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/dashboard",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.Jh,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/consumer-groups",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.cQ,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/acls",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0}],j=(0,P.S)(x),w=e=>{var{component:t,InstanceDrawer:a,isAsync:s=!1,title:r,underlyingProps:n,url:c}=e,d=(0,i.__rest)(e,["component","InstanceDrawer","isAsync","title","underlyingProps","url"]);(0,S.jr)(r);const l=()=>c;return(0,o.jsx)(m.Route,Object.assign({render:e=>(0,o.jsx)(b.BasenameContext.Provider,Object.assign({value:{getBasename:l}},{children:(0,o.jsx)(t,Object.assign({},n,d,e),void 0)}),void 0)},d),void 0)},A=e=>{var{InstanceDrawer:t}=e,a=(0,i.__rest)(e,["InstanceDrawer"]);const r=(0,m.useRouteMatch)(),{kafka:n}=a,c=(0,s.fh)(),d=(0,f.useCallback)(((e,t)=>{e?c.openDrawer(t):c.closeDrawer()}),[c]);return(0,o.jsx)(t,Object.assign({"data-ouia-app-id":"dataPlane-streams",drawerInstance:n,setDrawerInstance:()=>!1},c,{children:(0,o.jsxs)(m.Switch,{children:[j.map(((e,s)=>{var{path:n,exact:c,component:l,title:u,isAsync:v}=e,p=(0,i.__rest)(e,["path","exact","component","title","isAsync"]);const f=`${r.path}${n}`;return console.log(`Creating route for ${f}`),(0,o.jsx)(w,Object.assign({path:f,exact:c,component:l,title:u,isAsync:v,underlyingProps:Object.assign(Object.assign({},a),{handleInstanceDrawer:d}),url:r.url,InstanceDrawer:t},p),s)})),(0,o.jsx)(P.c,{title:"404 Page Not Found"},void 0)]},void 0)}),void 0)},C=()=>{const e=(0,b.useConfig)(),{id:t}=(0,m.useParams)(),a=(0,g.HI)(t);if(null==e?void 0:e.serviceDown)return(0,o.jsx)(h.dB,{},void 0);if(void 0===a)return(0,o.jsx)(y.AppServicesLoading,{},void 0);if(!1===a)throw new Error("404");return(0,o.jsx)(O,{kafka:a},void 0)},O=({kafka:e})=>(0,o.jsx)(k.w,Object.assign({kafkaInstance:e.kafkaDetail},{children:(0,o.jsx)(I,{kafka:e},void 0)}),void 0),I=({kafka:{kafkaDetail:e,adminServerUrl:t}})=>{const{kafka:{getToken:a}}=(0,b.useAuth)(),i=(0,m.useHistory)(),[r,n]=(0,f.useState)(),c=(0,f.useCallback)((e=>{n(e)}),[]),d=(0,f.useCallback)((()=>{i.push("/streams/kafkas")}),[i]),l=(0,f.useMemo)((()=>(0,o.jsx)(h.PS,{kafkaId:e.id,kafkaAdminUrl:t,totalMaxConnections:e.size.total_max_connections||0,maxConnections:e.size.max_connection_attempts_per_sec||0,maxPartitions:e.size.max_partitions||0,kafkaStorageBytes:1073741824*parseInt(e.kafka_storage_size.replace("Gi",""))},void 0)),[t,e]),u=(0,f.useMemo)((()=>(0,o.jsx)(_.vJ,{},void 0)),[]),v=(0,f.useMemo)((()=>({kafkaPageLink:"/streams/kafkas",kafkaInstanceLink:`/streams/kafkas/${e.id}/topics`,showMetrics:l,onError:c,kafkaName:e.name,apiBasePath:t,getToken:a,showSchemas:u,kafka:e,redirectAfterDeleteInstance:d})),[t,a,e,c,d,l,u]);return 401===r?(0,o.jsx)(h.Xx,{},void 0):(0,o.jsx)(s.IG,{scope:"kas",module:"./InstanceDrawer",fallback:null,render:e=>(0,o.jsx)(A,Object.assign({},v,{InstanceDrawer:e}),void 0)},void 0)};var T=a(28929);var R=a(86206);function E({accessToken:e,basePath:t}){return(0,i.__awaiter)(this,void 0,void 0,(function*(){const a=new R.TopicsApi(new T.Configuration({accessToken:e,basePath:t}));return((yield a.getTopics(void 0,100,100,void 0,void 0,void 0,void 0)).data.items||[]).map((e=>e.name))}))}function B({accessToken:e,basePath:t,kafkaId:a,duration:o,interval:s,selectedTopic:r}){return(0,i.__awaiter)(this,void 0,void 0,(function*(){const i=new T.DefaultApi(new T.Configuration({accessToken:e,basePath:t})),n=((yield i.getMetricsByRangeQuery(a,o,s,["kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m","kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m","kafka_topic:kafka_log_log_size:sum","kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name))),c=n.filter((e=>{var t;return void 0===r||(null===(t=e.metric)||void 0===t?void 0:t.topic)===r})),d=Array.from(new Set(n.map((e=>e.metric.topic)))),l={},u={},v={},p={};return c.forEach((e=>{const{__name__:t,topic:a}=e.metric;function o(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m":o(l);break;case"kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m":o(u);break;case"kafka_topic:kafka_log_log_size:sum":!function(){const t=v[a]||{};e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0))),v[a]=t}();break;case"kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m":o(p)}})),{metricsTopics:d,bytesOutgoing:u,bytesIncoming:l,bytesPerPartition:v,incomingMessageRate:p}}))}const D=({kafkaId:e,kafkaAdminUrl:t,totalMaxConnections:a,maxConnections:s,maxPartitions:r,kafkaStorageBytes:n})=>{const c=(0,b.useAuth)(),d=(0,m.useHistory)(),l=(0,b.useConfig)(),{getBasename:u}=(0,b.useBasename)()||{},v=u&&u(),p=`metrics-alert-${e}`,[h,g]=(0,f.useState)(null!==localStorage.getItem(p)),k=(0,f.useCallback)((t=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const o=yield function({kafkaId:e,duration:t,interval:a,accessToken:o,basePath:s}){return(0,i.__awaiter)(this,void 0,void 0,(function*(){const i=new T.DefaultApi(new T.Configuration({accessToken:o,basePath:s})),r=((yield i.getMetricsByRangeQuery(e,t,a,["kubelet_volume_stats_used_bytes","kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum","kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name&&e.metric.persistentvolumeclaim&&e.metric.persistentvolumeclaim.includes("zookeeper")))),n={},c={},d={};return r.forEach((e=>{const{__name__:t}=e.metric;function a(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kubelet_volume_stats_used_bytes":a(n);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum":a(c);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum":a(d)}})),{usedDiskSpaceMetrics:n,clientConnectionsMetrics:d,connectionAttemptRateMetrics:c,diskSpaceLimit:0,connectionRateLimit:0,connectionsLimit:0}}))}(Object.assign(Object.assign({},t),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}));return Object.assign(Object.assign({},o),{diskSpaceLimit:n/1073741824,connectionsLimit:a,connectionRateLimit:s})}))),[c,l,e,n,a,s]),_=(0,f.useCallback)((a=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const[o,i]=yield Promise.all([E({accessToken:null==c?void 0:c.kafka.getToken(),basePath:t}),B(Object.assign(Object.assign({},a),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}))]),{metricsTopics:s,bytesIncoming:r,bytesOutgoing:n,bytesPerPartition:d,incomingMessageRate:u}=i;return{kafkaTopics:o,metricsTopics:s,bytesIncoming:r,bytesOutgoing:n,bytesPerPartition:d,incomingMessageRate:u}}))),[null==c?void 0:c.kafka,null==c?void 0:c.kas,l.kas.apiBasePath,t,e]),P=(0,f.useCallback)((()=>(0,i.__awaiter)(void 0,void 0,void 0,(function*(){const t=yield function({accessToken:e,basePath:t,kafkaId:a}){return(0,i.__awaiter)(this,void 0,void 0,(function*(){const o=new T.DefaultApi(new T.Configuration({accessToken:e,basePath:t}));let i=0,s=0,r=0;return((yield o.getMetricsByInstantQuery(a,["kafka_topic:kafka_topic_partitions:sum","kafka_topic:kafka_topic_partitions:count","consumergroup:kafka_consumergroup_members:count"])).data.items||[]).forEach((({metric:e,value:t})=>{const{__name__:a}=e;switch(a){case"kafka_topic:kafka_topic_partitions:sum":s=t;break;case"kafka_topic:kafka_topic_partitions:count":i=t;break;case"consumergroup:kafka_consumergroup_members:count":r=t}})),{consumerGroups:r,topicPartitions:s,topics:i}}))}({kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()});return Object.assign(Object.assign({},t),{topicPartitionsLimit:r})}))),[null==c?void 0:c.kas,l.kas.apiBasePath,e,r]);return void 0===l?(0,o.jsx)(y.AppServicesLoading,{},void 0):(0,o.jsx)(y.Metrics,{onCreateTopic:()=>{d.push(`${v}/topic/create`)},getTopicsMetrics:_,getKafkaInstanceMetrics:k,getMetricsKpi:P,isClosed:h,onClickClose:()=>{g(!0),localStorage.setItem(p,"true")}},void 0)}},82161:(e,t,a)=>{a.d(t,{HI:()=>c});var o=a(70655),i=a(75418),s=a(28929),r=a(5854);const n=(e,t)=>{if(void 0===t)throw new Error("kafkaRequest cannot be undefined");return e.replace("{}",t.bootstrap_server_host||"")},c=e=>{const{kas:{apiBasePath:t},kafka:a}=(0,r.useConfig)(),{kas:{getToken:c}}=(0,r.useAuth)(),[l,u]=(0,i.useState)(),v=d(),p=(0,i.useCallback)((e=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){u(void 0);const a=new s.DefaultApi({accessToken:c,basePath:t});try{const t=yield a.getKafkaById(e),{cloud_provider:o,region:i,instance_type:s,size_id:r}=t.data;if(!(o&&i&&r&&s))throw new Error(`Kafka instance ${t.data.id} missing some required info: ${o}, ${i}, ${s}, ${r}`);const n=yield v(o,i,r,s);u(Object.assign(Object.assign({},t.data),{size:n}))}catch(e){u(!1)}}))),[t,v,c]);return(0,i.useEffect)((()=>{e?p(e):u(void 0)}),[p,e]),l?{kafkaDetail:l,adminServerUrl:n((null==a?void 0:a.adminServerUrlTemplate)||"https://admin-server-{}",l)}:l},d=()=>{const{kas:{getToken:e}}=(0,r.useAuth)(),{kas:{apiBasePath:t}}=(0,r.useConfig)();return(0,i.useCallback)(((a,i,r,n)=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){var o,c,d;try{const l=new s.DefaultApi(new s.Configuration({accessToken:e(),basePath:t})),u=yield l.getInstanceTypesByCloudProviderAndRegion(a,i);if(!(null===(o=null==u?void 0:u.data)||void 0===o?void 0:o.instance_types))throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${i} ${r}, no instance_types returned`);const v=null===(d=null===(c=null==u?void 0:u.data)||void 0===c?void 0:c.instance_types.find((e=>e.id===n)))||void 0===d?void 0:d.sizes,p=null==v?void 0:v.find((e=>e.id===r));if(!p)throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${i} ${r}, can't find a size matching ${r}`);return p}catch(e){throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${i} ${r}: ${e}`)}}))),[e,t])}},88530:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var o=a(85893),i=a(75418),s=a(5854),r=a(38955),n=a(98307),c=a(86437),d=a(79905),l=a(84875),u=a(82161);const v=({Component:e})=>{const t=(0,s.useConfig)(),a=(0,l.t)(),{preCreateInstance:d,shouldOpenCreateModal:v}=(0,c.UI)({eventCode:a.kafka.ams.termsAndConditionsEventCode,siteCode:a.kafka.ams.termsAndConditionsSiteCode}),{getAllUserAccounts:p}=(0,n.jg)(),[f,m]=(0,i.useState)(void 0),h=(0,u.HI)(f),g=h?h.kafkaDetail:void 0,k=(0,n.fh)();return t.serviceDown?(0,o.jsx)(r.d,{},void 0):(0,o.jsx)(e,Object.assign({preCreateInstance:d,shouldOpenCreateModal:v,drawerInstance:g,setDrawerInstance:m},k,{getAllUserAccounts:p}),void 0)},p=()=>{const{getQuota:e}=(0,c.fA)(null===s.ProductType||void 0===s.ProductType?void 0:s.ProductType.kas);return(0,o.jsx)(s.QuotaContext.Provider,Object.assign({value:{getQuota:e}},{children:(0,o.jsx)(n.IG,{scope:"kas",module:"./OpenshiftStreams",fallback:(0,o.jsx)(d.AppServicesLoading,{},void 0),render:e=>(0,o.jsx)(v,{Component:e},void 0)},void 0)}),void 0)}},45294:(e,t,a)=>{a.r(t),a.d(t,{NotFoundPage:()=>n,default:()=>c});var o=a(85893),i=a(67646),s=a(99922),r=a(68199);const n=()=>(0,o.jsx)(s.PageSection,{children:(0,o.jsxs)(s.EmptyState,Object.assign({variant:"full"},{children:[(0,o.jsx)(s.EmptyStateIcon,{icon:i.ExclamationTriangleIcon},void 0),(0,o.jsx)(s.Title,Object.assign({headingLevel:"h1",size:"lg"},{children:"404 Page not found"}),void 0),(0,o.jsx)(s.EmptyStateBody,{children:"We didn't find a page that matches the address you navigated to."},void 0),(0,o.jsx)((function(){const e=(0,r.useHistory)();return(0,o.jsx)(s.Button,Object.assign({onClick:function(){e.push("/")}},{children:"Take me home"}),void 0)}),{},void 0)]}),void 0)},void 0),c=n},69372:(e,t,a)=>{a.r(t),a.d(t,{ConnectedOverviewPage:()=>s,default:()=>r});var o=a(85893),i=a(79905);const s=()=>(0,o.jsx)(i.OverviewPageV2,{toKafkaHref:"/streams/kafkas",toServiceRegistryHref:"/service-registry",toConnectorsHref:"/connectors"},void 0),r=s},91285:(e,t,a)=>{a.r(t),a.d(t,{ResourcesPage:()=>r,default:()=>n});var o=a(85893),i=a(98307),s=a(79905);const r=()=>(0,o.jsx)(i.IG,{scope:"guides",module:"./QuickStartCatalog",fallback:(0,o.jsx)(s.AppServicesLoading,{},void 0),render:e=>(0,o.jsx)(e,{},void 0)},void 0),n=r},80140:(e,t,a)=>{a.r(t),a.d(t,{ServiceAccountsPage:()=>c,default:()=>l});var o=a(85893),i=a(98307),s=a(5854),r=a(38955),n=a(79905);const c=()=>(0,o.jsx)(i.IG,{scope:"kas",module:"./ServiceAccounts",fallback:(0,o.jsx)(n.AppServicesLoading,{},void 0),render:e=>(0,o.jsx)(d,{Component:e},void 0)},void 0),d=({Component:e})=>{const t=(0,s.useConfig)();return(null==t?void 0:t.serviceDown)?(0,o.jsx)(r.d,{},void 0):(0,o.jsx)(e,{},void 0)},l=c},38955:(e,t,a)=>{a.d(t,{d:()=>n});var o=a(85893),i=a(2112),s=a(99922),r=a(41970);const n=()=>{const{t:e}=(0,r.useTranslation)(["appTemporaryFixMe"]);return(0,o.jsx)(s.PageSection,{children:(0,o.jsxs)(s.EmptyState,Object.assign({variant:"full"},{children:[(0,o.jsx)(s.EmptyStateIcon,{icon:i.ZP},void 0),(0,o.jsx)(s.Title,Object.assign({headingLevel:"h1",size:"lg"},{children:e("serviceDown.serviceDownTitle")}),void 0),(0,o.jsx)(s.EmptyStateBody,{children:e("serviceDown.serviceDownMessage")},void 0),(0,o.jsx)(s.Button,Object.assign({variant:"primary",onClick:()=>{window.location.href="https://status.starter.openshift.com/"}},{children:e("serviceDown.serviceDownButton")}),void 0)]}),void 0)},void 0)}},64765:(e,t,a)=>{a.r(t),a.d(t,{ArtifactVersionDetails:()=>d,default:()=>u});var o=a(85893),i=a(68199),s=a(17631),r=a(48844),n=a(5854),c=a(23173);const d=()=>{const e=(0,n.useConfig)();return(null==e?void 0:e.serviceDown)?(0,o.jsx)(c.dB,{},void 0):(0,o.jsx)(l,{},void 0)},l=()=>{let{artifactId:e}=(0,i.useParams)();return e=decodeURIComponent(e),(0,o.jsx)(r.q,{breadcrumbId:"srs.artifacts_details",artifactId:e,render:e=>(0,o.jsx)(s.P,{registry:e,module:"./FederatedArtifactVersionPage"},void 0)},void 0)},u=d},13117:(e,t,a)=>{a.r(t),a.d(t,{Artifacts:()=>c,default:()=>l});var o=a(85893),i=a(17631),s=a(48844),r=a(5854),n=a(23173);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,o.jsx)(n.dB,{},void 0):(0,o.jsx)(d,{},void 0)},d=()=>(0,o.jsx)(s.q,{breadcrumbId:"srs.artifacts",render:e=>(0,o.jsx)(i.P,{module:"./FederatedArtifactsPage",registry:e},void 0)},void 0),l=c},29913:(e,t,a)=>{a.r(t),a.d(t,{ArtifactRedirect:()=>c,default:()=>l});var o=a(85893),i=a(17631),s=a(48844),r=a(5854),n=a(23173);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,o.jsx)(n.dB,{},void 0):(0,o.jsx)(d,{},void 0)},d=()=>(0,o.jsx)(s.q,{render:e=>(0,o.jsx)(i.P,{registry:e,module:"./FederatedArtifactRedirectPage"},void 0)},void 0),l=c},68789:(e,t,a)=>{a.d(t,{c:()=>s});var o=a(85893),i=a(17631);const s=({registry:e,downloadLabel:t})=>(0,o.jsx)(i.P,{module:"./FederatedDownloadArtifacts",registry:e,fileName:e.name,downloadLinkLabel:t},void 0)},17631:(e,t,a)=>{a.d(t,{P:()=>d});var o=a(70655),i=a(85893);var s=a(98307),r=a(68199),n=a(5854),c=a(79905);const d=e=>{var{module:t}=e,a=(0,o.__rest)(e,["module"]);return(0,i.jsx)(s.IG,{scope:"apicurio_registry",module:t,fallback:(0,i.jsx)(c.AppServicesLoading,{},void 0),render:e=>(0,i.jsx)(l,Object.assign({Component:e},a),void 0)},void 0)},l=e=>{var{Component:t,registry:a,principals:s}=e,d=(0,o.__rest)(e,["Component","registry","principals"]);let l;const u=(0,n.useAuth)(),v=(0,n.useConfig)(),p=(0,r.useHistory)(),f=(0,n.useBasename)(),m=null==u?void 0:u.apicurio_registry.getToken;let{groupId:h,artifactId:g,version:k}=(0,r.useParams)();return h=decodeURIComponent(h),g=decodeURIComponent(g),k=decodeURIComponent(k),void 0===v||void 0===a?(0,i.jsx)(c.AppServicesLoading,{},void 0):m&&f?(l=((e,t,a,o,i)=>({artifacts:{url:`${t}/apis/registry`},auth:{type:"gettoken",getToken:o},features:{readOnly:!1,breadcrumbs:!1,roleManagement:!0,multiTenant:!0,settings:!0},ui:{navPrefixPath:a},principals:i}))(0,a.registryUrl,`${f.getBasename()}/t/${null==a?void 0:a.id}`,m,s),(0,i.jsx)(t,Object.assign({config:l,tenantId:a.id,groupId:h,artifactId:g,version:k,history:p},d),void 0)):null}},31841:(e,t,a)=>{a.r(t),a.d(t,{RulesPage:()=>c,default:()=>l});var o=a(85893),i=a(17631),s=a(48844),r=a(5854),n=a(23173);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,o.jsx)(n.dB,{},void 0):(0,o.jsx)(d,{},void 0)},d=()=>(0,o.jsx)(s.q,{breadcrumbId:"srs.global_rules",render:e=>(0,o.jsx)(i.P,{registry:e,module:"./FederatedRulesPage"},void 0)},void 0),l=c},62655:(e,t,a)=>{a.r(t),a.d(t,{ServiceRegistryPage:()=>u,ServiceRegistryPageConnected:()=>v,default:()=>p});var o=a(85893),i=a(5854),s=a(98307),r=a(23173),n=a(86437),c=a(79905),d=a(68789),l=a(84875);const u=()=>{const e=(0,i.useConfig)();return(null==e?void 0:e.serviceDown)?(0,o.jsx)(r.dB,{},void 0):(0,o.jsx)(v,{},void 0)},v=()=>{const e=(0,i.useConfig)(),t=(0,l.t)(),{getQuota:a}=(0,n.fA)(i.ProductType.srs),{preCreateInstance:r,shouldOpenCreateModal:u}=(0,n.UI)({eventCode:t.serviceRegistry.ams.termsAndConditionsEventCode,siteCode:t.serviceRegistry.ams.termsAndConditionsSiteCode}),{getTokenEndPointUrl:v}=(0,n.NG)();return void 0===e?(0,o.jsx)(c.AppServicesLoading,{},void 0):(0,o.jsx)(c.DevelopmentPreview,{children:(0,o.jsx)(s.IG,{scope:"srs",module:"./ServiceRegistry",fallback:(0,o.jsx)(c.AppServicesLoading,{},void 0),render:e=>(0,o.jsx)(i.QuotaContext.Provider,Object.assign({value:{getQuota:a}},{children:(0,o.jsx)(s.A6,{children:(0,o.jsx)(e,{preCreateInstance:r,shouldOpenCreateModal:u,tokenEndPointUrl:v(),renderDownloadArtifacts:(e,t)=>(0,o.jsx)(d.c,{registry:e,downloadLabel:t},void 0)},void 0)},void 0)}),void 0)},void 0)},void 0)},p=u},48844:(e,t,a)=>{a.d(t,{q:()=>c});var o=a(85893),i=a(98307),s=a(79905),r=a(86437),n=a(68789);const c=e=>(0,o.jsx)(i.IG,{scope:"srs",module:"./ApicurioRegistry",fallback:(0,o.jsx)(s.AppServicesLoading,{},void 0),render:t=>(0,o.jsx)(d,Object.assign({Component:t},e),void 0)},void 0),d=({Component:e,render:t,breadcrumbId:a,artifactId:s})=>{const{getTokenEndPointUrl:c}=(0,r.NG)();return(0,o.jsx)(i.A6,{children:(0,o.jsx)(e,{render:t,breadcrumbId:a,tokenEndPointUrl:c(),artifactId:s,renderDownloadArtifacts:(e,t)=>(0,o.jsx)(n.c,{registry:e,downloadLabel:t},void 0)},void 0)},void 0)}},63564:(e,t,a)=>{a.d(t,{vJ:()=>c});a(13117),a(29913),a(64765),a(31841),a(62655);var o=a(85893),i=a(68199),s=a(17631),r=a(98307),n=a(79905);const c=()=>(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(r.IG,{scope:"srs",module:"./ServiceRegistryMapping",fallback:(0,o.jsx)(n.AppServicesLoading,{},void 0),render:e=>(0,o.jsx)(d,{Component:e},void 0)},void 0)},void 0),d=({Component:e})=>{const{topicName:t}=(0,i.useParams)(),a="/service-registry";return(0,o.jsx)(e,{basename:a,topicName:t,renderSchema:e=>(0,o.jsx)(s.P,{module:"./FederatedSchemaMapping",registry:e,topicName:t,groupId:null,version:"latest",registryId:null==e?void 0:e.id,basename:a},void 0)},void 0)}},23173:(e,t,a)=>{a.d(t,{Xx:()=>c,cQ:()=>d.cQ,PS:()=>d.PS,Jh:()=>d.Jh,EP:()=>d.EP,A:()=>d.A,dB:()=>l.d,nT:()=>d.nT,Fn:()=>d.Fn,dS:()=>d.dS});var o=a(85893),i=a(94469),s=a(41970),r=a(68199);const n=({href:e,children:t})=>(0,o.jsx)(r.Link,Object.assign({to:e||""},{children:t}),void 0),c=()=>{const{t:e}=(0,s.useTranslation)(["appTemporaryFixMe"]),t=(0,o.jsx)(s.Trans,{i18nKey:"accessdenied.accessDeniedDescription",t:e,components:[(0,o.jsx)(n,{href:"/streams/kafkas"},"kafkas")]},void 0);return(0,o.jsx)(i.Main,{children:(0,o.jsx)(i.NotAuthorized,{title:e("accessdenied.accessDeniedTitle"),description:t,prevPageButtonText:e("accessdenied.accessDeniedButtonText"),showReturnButton:!0},void 0)},void 0)};a(15447),a(44055),a(62808);var d=a(36734),l=(a(88530),a(45294),a(69372),a(91285),a(80140),a(38955));a(63564)},36004:(e,t,a)=>{a.d(t,{N:()=>u});var o=a(70655),i=a(85893),s=a(75418),r=a(5854);const n=JSON.parse('{"Q":{"kas":{"basePath":"/mas-local-fm/kas","proxyTarget":"http://localhost:9000","fallbackBasePath":"/beta/apps/rhosak-control-plane-ui-build"},"kafka":{"basePath":"/mas-local-fm/kafka","proxyTarget":"http://localhost:8080","fallbackBasePath":"/beta/apps/rhosak-data-plane-ui-build"},"guides":{"basePath":"/mas-local-fm/guides","proxyTarget":"http://localhost:9001","fallbackBasePath":"/beta/apps/rhoas-guides-build"},"apicurio_registry":{"basePath":"/mas-local-fm/apicurio_registry","proxyTarget":"http://localhost:8888","fallbackBasePath":"/beta/apps/sr-ui-build"},"srs":{"basePath":"/mas-local-fm/srs","proxyTarget":"http://localhost:9005","fallbackBasePath":"/beta/apps/srs-ui-build"},"cos":{"basePath":"/mas-local-fm/cos","proxyTarget":"http://localhost:9002","fallbackBasePath":"/beta/apps/cos-ui-build"},"ads":{"basePath":"/mas-local-fm/ads","proxyTarget":"","fallbackBasePath":""},"smart_events":{"basePath":"/mas-local-fm/smart_events","proxyTarget":"","fallbackBasePath":""}},"v":[{"hostnames":["prod.foo.redhat.com"],"fetchConfig":true,"type":"proxy","config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.stage.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"rbac":{"basePath":"/api/rbac/v1"},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"ads":{"editorsBasePath":""},"smart_events":{"apiBasePath":"https://api.stage.openshift.com"}}},{"hostnames":["qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":true},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.stage.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"ads":{"editorsBasePath":""},"smart_events":{"apiBasePath":"https://api.stage.openshift.com"}}},{"hostnames":["cloud.redhat.com","console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.openshift.com"},"kas":{"apiBasePath":"https://api.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.openshift.com"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://api.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"ads":{"editorsBasePath":""},"smart_events":{"apiBasePath":"https://api.openshift.com"}}}]}'),c=e=>{const t=window.location.hostname;console.log(`Filter config for ${t}`);const a=e.filter((e=>e.hostnames.includes(t)));if(a.length>1)throw new Error(`Unable to find config for ${t}, more than one config matched ${a}`);if(a.length<1){const t=e.filter((e=>e.hostnames.includes("console.redhat.com")));if(t.length>1)throw new Error(`Unable to load default config, more than one config matched ${a}`);if(t.length<1)throw new Error("Unable to load default config, no configs matched");return t[0]}return a[0]},d=(e,t,a)=>{const o={};return Object.entries(t).forEach((([t,i])=>{let s,{basePath:r}=i;"proxy"!==e.type?r=i.fallbackBasePath:s=i.fallbackBasePath,a||(r.startsWith("/beta")&&(r=r.substring(5)),(null==s?void 0:s.startsWith("/beta"))&&(s=s.substring(5))),o[t]={basePath:r,fallbackBasePath:s}})),Object.assign(Object.assign({},e.config),{federatedModules:o})};var l=a(77463);const u=({children:e})=>{const{beta:t}=(0,l.gV)(),[u,v]=(0,s.useState)((()=>{const e=n.v,a=c(e);if(a.fetchConfig)return;const o=d(a,n.Q,t);return console.log("Done loading config",o),o}));return(0,s.useEffect)((()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if(void 0===u){const e=yield fetch(`${a.p}config.json`),o=yield e.json(),i=c(o.config),s=d(i,o.federatedModules,t);console.debug("Done loading config",s),v(s)}}))}),[t,u]),(0,i.jsx)(r.ConfigContext.Provider,Object.assign({value:u},{children:e}),void 0)}},84875:(e,t,a)=>{a.d(t,{A:()=>i,t:()=>s});var o=a(75418);const i=(0,o.createContext)(void 0),s=()=>{const e=(0,o.useContext)(i);if(void 0===e)throw new Error("useConstants must be used inside an ServiceConstantsContextProvider");return e}},9933:(e,t,a)=>{a.d(t,{B:()=>r});var o=a(85893),i=a(84875);const s=JSON.parse('{"version":1,"kafka":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosak|standard","trialQuotaId":"cluster|rhinfra|rhosaktrial|standard","quotaProductId":"RHOSAK","trialQuotaProductId":"RHOSAKTrial","resourceName":"rhosak"}},"serviceRegistry":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosr|any","trialQuotaId":"cluster|rhinfra|rhosrtrial|any","quotaProductId":"RHOSR","trialQuotaProductId":"RHOSRTrial","resourceName":"rhosr"}}}'),r=({children:e})=>(0,o.jsx)(i.A.Provider,Object.assign({value:s},{children:e}),void 0)},77463:(e,t,a)=>{a.d(t,{O1:()=>n,gV:()=>r});var o=a(85893),i=a(75418);const s=(0,i.createContext)(void 0),r=()=>{const e=(0,i.useContext)(s);if(void 0===e)throw new Error("useFeatureFlags must be used inside a FeatureFlagContext provider");return e},n=({children:e})=>{const t={beta:window.location.pathname.startsWith("/beta")};return(0,o.jsx)(s.Provider,Object.assign({value:t},{children:e}),void 0)}},68587:(e,t,a)=>{a.d(t,{S:()=>d});var o=a(39133),i=a.n(o),s=a(68573),r=a.n(s),n=a(63749);let c;function d(...e){return c||(c=new(i())({},[r(),...e]),c.register({notifications:n.ee})),c}},62579:(e,t,a)=>{a.d(t,{S:()=>d,c:()=>c});var o=a(85893),i=a(75418),s=a(68199),r=a(27326);const n=(0,i.lazy)((()=>Promise.resolve().then(a.bind(a,45294)))),c=({title:e})=>((0,r.jr)(e),(0,o.jsx)(s.Route,{component:n},void 0)),d=e=>e.reduce(((e,t)=>[...e,...t.routes?t.routes:[t]]),[])},71987:(e,t,a)=>{a.d(t,{Z:()=>o});const o=function(e){let t="/";const a=e.split("/");return a.shift(),"beta"===a[0]&&(a.shift(),t="/beta/"),`${t}${a[0]}`}},27326:(e,t,a)=>{a.d(t,{jW:()=>_,hP:()=>b,Nn:()=>m,jr:()=>i});var o=a(75418);function i(e){(0,o.useEffect)((()=>{const t=document.title;return document.title=e,()=>{document.title=t}}),[e])}var s=a(70655),r=a(70213),n=a.n(r),c=a(54191),d=a.n(c),l=a(23931),u=a(89053),v=a.n(u),p=a(11018);const f="mrt",m=(e,t)=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const a={responseMode:"query",enableLogging:!1,checkLoginIframe:!1},o=yield h(t);if(void 0!==o&&void 0!==e.url){const t=_(e.url,e.realm),i=new URLSearchParams;i.append("grant_type","refresh_token"),i.append("refresh_token",o),i.append("client_id",e.clientId);const s=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:i});if(200===s.status){console.debug("[KEYCLOAK] found valid access token");const e=(yield s.json()).access_token;a.token=e,a.refreshToken=o}else console.debug("[KEYCLOAK] error getting access token from endpoint"),a.onLoad="login-required"}else{new URLSearchParams(window.location.search).has("state")||(console.debug("[KEYCLOAK] did not find refresh token, will require a full login"),a.onLoad="login-required")}console.debug("[KEYCLOAK] initOptions "+JSON.stringify(a));const i=n()(e),s=yield i.init(a);return console.log("[KEYCLOAK] keycloakSuccess "+s),i.refreshToken?(console.log("[KEYCLOAK] initKeycloak "+i.refreshToken),yield k(i.refreshToken,t)):console.log("[KEYCLOAK] no refresh token"),console.log("[KEYCLOAK] init complete"),i})),h=e=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const t=d().get(f);if(void 0===t)return;const a=l.Base64.decode(t),o=JSON.parse(a);let i;try{i=v()(o.refreshToken)}catch(e){return void g()}if(void 0===i||void 0===i.exp)return void g();if((0,p.Z)(new Date)>i.exp+50)return void g();const s=yield e();if(v()(s).account_id===o.rhUserId)return o.refreshToken;g()})),g=()=>{console.debug("clearing stored refresh token"),d().remove(f)},k=(e,t)=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){const a=yield t(),o=v()(a).account_id,i=JSON.stringify({refreshToken:e,rhUserId:o}),s=l.Base64.encode(i);console.debug("storing refresh token"),d().set(f,s)})),b=(e,t)=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){if(console.log("keycloak.refreshToken "+e.refreshToken),console.log("keycloak.token "+e.token),console.log("keycloak.tokenParsed "+e.tokenParsed),yield e.updateToken(50),console.log("keycloak.token "+e.token),console.log("keycloak.tokenParsed "+e.tokenParsed),!e.token||!e.tokenParsed)throw new Error("No token from keycloak!");const a=yield t(),o=v()(a).account_id,i=e.tokenParsed["rh-user-id"];return o!==i?(console.debug(`Triggering MASSSO logout because sso.redhat.com account_id claim does not match the MASSSO rh-user-id claim. account_id: ${o}, rh-user-id ${i}`),yield y(e),""):(e.refreshToken&&(yield k(e.refreshToken,t)),e.token)})),y=e=>(0,s.__awaiter)(void 0,void 0,void 0,(function*(){e&&(console.debug("Performing MASSSO logout"),yield e.logout())})),_=(e,t)=>`${e}/realms/${t}/protocol/openid-connect/token`}}]);
//# sourceMappingURL=896.81d84528f521baeae67d.js.map