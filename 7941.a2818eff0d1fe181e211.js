"use strict";(self.webpackChunkapplication_services_ui=self.webpackChunkapplication_services_ui||[]).push([[7941],{76166:(e,t,a)=>{a.d(t,{Z:()=>L});var s=a(85893),o=a(93264),n=a(68199),r=a(26718),i=a(3973),c=a(70655),d=a(98823),l=a(37687),u=a(1808),p=a(73322),m=a(62218),v=a(35754),f=a(5854),h=a(93049),g=a(99922);const k=(0,o.lazy)((()=>a.e(8571).then(a.bind(a,58571)))),b=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,37272)))),y=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,74856)))),P=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,8172)))),S=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,15113)))),x=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,75401)))),j=(0,o.lazy)((()=>a.e(9132).then(a.bind(a,9132)))),_=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,44735)))),w=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,83857)))),A=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,60766)))),C=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,42789)))),O=(0,o.lazy)((()=>a.e(1132).then(a.bind(a,31132)))),I=(0,o.lazy)((()=>a.e(4880).then(a.bind(a,54880)))),T=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,15822)))),R=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,23456)))),E=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,92225)))),B=(0,o.lazy)((()=>a.e(2352).then(a.bind(a,82352)))),D=()=>(0,s.jsx)(n.Redirect,{to:"/streams/kafkas"}),H=[{component:()=>(0,s.jsx)(n.Redirect,{to:"/overview"}),exact:!0,label:"Overview",path:"/",title:"Overview | Red Hat OpenShift Application Services"},{component:w,exact:!0,label:"Overview",path:"/overview",title:"Overview | Red Hat OpenShift Application Services"},{component:b,exact:!0,label:"API Management",path:"/api-management",title:"API Management | Red Hat OpenShift Application Services"},{component:x,exact:!0,label:"Data Science",path:"/data-science",title:"Data Science | Red Hat OpenShift Application Services"},{component:A,exact:!0,label:"Learning Resources | Red Hat OpenShift Application Services",path:"/learning-resources",title:"Learning Resources | Red Hat OpenShift Application Services",devPreview:!1},{component:D,exact:!0,label:"Streams for Apache Kafka",path:"/streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:j,exact:!0,label:"Streams for Apache Kafka",path:"/streams/overview",title:"Overview | Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:_,exact:!0,label:"Streams for Apache Kafka",path:"/streams/kafkas",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas",devPreview:!1},{component:E,exact:!0,label:"Service Registry",path:"/service-registry",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:()=>(0,s.jsx)(n.Redirect,{to:"/service-accounts"}),exact:!0,label:"Service Accounts",path:"/streams/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:()=>(0,s.jsx)(n.Redirect,{to:"/learning-resources"}),label:"QuickStarts for Red Hat OpenShift Application Services",path:"/streams/resources",title:"QuickStarts for Red Hat OpenShift Application Services",devPreview:!0},{component:v.aH,label:"Streams for Apache Kafka",path:"/streams/kafkas/:id",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas/:id",devPreview:!1},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:C,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/rules",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:O,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/roles",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:I,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/settings",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:y,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:S,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId/versions/:version",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:R,exact:!1,label:"COS",path:"/connectors",title:"Connectors | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/connectors`,devPreview:!0},{component:T,exact:!0,label:"Service Accounts",path:"/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:B,exact:!1,label:"Smart Events",path:"/smart-events",title:"Smart Events | Red Hat OpenShift Application Services",basename:`${(0,l.Z)(window.location.pathname)}/smart-events`,devPreview:!0},{component:D,exact:!0,label:"Streams for Apache Kafka",path:"/openshift-streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"}],G=e=>{var{component:t,title:a,basename:r,devPreview:i}=e,l=(0,c._T)(e,["component","title","basename","devPreview"]);const{t:p}=(0,h.useTranslation)(),v=(0,n.useHistory)();(0,m.jr)(a);const k=(0,o.useCallback)((()=>r||""),[r]),b=(0,o.useCallback)((()=>v.push("/")),[v]),y=(0,o.useCallback)((e=>(0,s.jsx)(d.ErrorBoundary,Object.assign({fallbackRender:({error:e})=>"404"===e.message?(0,s.jsx)(u.AppServicesPageNotFound,{}):(0,s.jsx)(u.AppServicesEmptyState,Object.assign({emptyStateProps:{variant:u.AppServicesEmptyStateVariant.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:p("common:something_went_wrong")},emptyStateBodyProps:{body:p("common:unexpected_error")}},{children:(0,s.jsx)(g.Button,Object.assign({onClick:b},{children:p("common:return_to_home_page")}))}))},{children:(0,s.jsx)(u.DevelopmentPreview,Object.assign({show:i},{children:(0,s.jsx)(f.BasenameContext.Provider,Object.assign({value:{getBasename:k}},{children:(0,s.jsx)(t,Object.assign({},l,e))}))}))}))),[t,i,k,b,l,p]);return(0,s.jsx)(n.Route,Object.assign({render:y},l))},K=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Suspense,Object.assign({fallback:(0,s.jsx)(u.AppServicesLoading,{})},{children:(0,s.jsxs)(n.Switch,{children:[(0,p.S)(H).map(((e,t)=>{var{path:a,exact:o,component:n,title:r,isAsync:i}=e,d=(0,c._T)(e,["path","exact","component","title","isAsync"]);return(0,s.jsx)(G,Object.assign({path:a,exact:o,component:n,title:r,isAsync:i},d),t)})),(0,s.jsx)(p.c,{title:"404 Page Not Found"})]})})),(0,s.jsx)(k,{})]});var $=a(68698),z=a(25);const L=(0,r.connect)()((()=>{const e=(0,z.pp)(),t=(0,n.useHistory)(),a=(0,o.useCallback)((()=>{const e="overview",a=t.location.pathname.split("/");return a.length>1?""===a[1]?e:"openshift-streams"===a[1]?"streams":a[1]:e}),[t]);return(0,o.useEffect)((()=>{e.chrome.init();const s=a();e.chrome.identifyApp(s);const o=e.chrome.on("APP_NAVIGATION",(e=>{t.push(`/${["kafkas","service-accounts","resources"].includes(e.navId)?"streams/":""}${e.navId}`)}));return()=>{o()}}),[a,t,e.chrome]),(0,s.jsxs)($.Gg,{children:[(0,s.jsx)(i.NotificationsPortal,{}),(0,s.jsx)(g.Page,{children:(0,s.jsx)(K,{})})]})}))},78866:(e,t,a)=>{a.d(t,{I:()=>l});var s=a(70655),o=a(85893),n=a(93264),r=a(5854),i=a(68698),c=a(1808);const d=()=>{const e=(0,n.useRef)(!1);return(0,n.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e};const l=({scope:e,module:t,render:a,fallback:r})=>{console.log("Dynamic federated module",e,t);const c=d(),{getModuleInfo:l,modules:p}=(0,i.N)(),[m,v]=(0,n.useState)();return(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){const t=yield l(p[e].basePath,e,p[e].fallbackBasePath);c.current&&v(t)}))}),[e,p,l,c]),void 0!==m?(0,o.jsx)(u,{scope:e,module:t,render:a,moduleInfo:m}):void 0!==r?(0,o.jsx)(o.Fragment,{children:r}):null},u=({moduleInfo:e,fallback:t,scope:i,render:l,module:u})=>{const{ready:p,failed:m}=(e=>{const t=d(),[a,s]=(0,n.useState)(!1),[o,r]=(0,n.useState)(!1);return(0,n.useEffect)((()=>{let a;if(t.current){if(!e)return void r(!0);a=document.createElement("script"),a.src=e,a.type="text/javascript",a.async=!0,s(!1),r(!1),a.onload=()=>{console.log(`Dynamic federated module Loaded: ${e}`),s(!0)},a.onerror=()=>{console.error(`Dynamic federated module Error: ${e}`),s(!1),r(!0)},document.head.appendChild(a)}return()=>{a&&(console.log(`Dynamic federated module Removed: ${e}`),document.head.removeChild(a))}}),[t,e]),{ready:a,failed:o}})(e.entryPoint);if(p&&!m){const t=(0,n.lazy)(function(e,t){return()=>(0,s.mG)(this,void 0,void 0,(function*(){yield a.I("default");const s=window[e];yield s.init(a.S.default);const o=(yield s.get(t))();return console.debug(`loaded ${t} from ${e}`),o}))}(i,u)),d=()=>e.basePath;return(0,o.jsx)(r.AssetsContext.Provider,Object.assign({value:{getPath:d}},{children:(0,o.jsx)(n.Suspense,Object.assign({fallback:(0,o.jsx)(c.AppServicesLoading,{})},{children:l(t)}))}))}return t?(0,o.jsx)(o.Fragment,{children:t}):null}},25458:(e,t,a)=>{a.d(t,{j:()=>d,w:()=>l});var s=a(70655),o=a(85893),n=a(93264),r=a(28929),i=a(5854),c=a(34199);const d=()=>{const e=(0,i.useConfig)(),t=(0,i.useAuth)(),[a,o]=(0,n.useState)(),[d,l]=(0,n.useState)();(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),s=new c.PrincipalApi({accessToken:a,basePath:null==e?void 0:e.rbac.basePath});try{const e=yield s.listPrincipals(-1).then((e=>e.data.data.map((e=>({id:e.username,principalType:i.PrincipalType.UserAccount,displayName:`${e.first_name} ${e.last_name}`,emailAddress:e.email})))));l(e)}catch(e){}}}))}),[t,e]),(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==e&&void 0!==t&&void 0!==e.rbac.basePath){const a=yield t.kas.getToken(),s=new r.SecurityApi({accessToken:a,basePath:e.kas.apiBasePath}),n=yield s.getServiceAccounts().then((e=>e.data.items.map((e=>({id:e.client_id,displayName:e.name,principalType:i.PrincipalType.ServiceAccount})))));o(n)}}))}),[t,e]);return{getAllPrincipals:(0,n.useCallback)((()=>{let e=[];return void 0!==d&&void 0!==a&&(e=e.concat(d)),void 0!==a&&(e=e.concat(a)),e}),[a,d]),getAllUserAccounts:(0,n.useCallback)((()=>d||[]),[d]),getAllServiceAccounts:(0,n.useCallback)((()=>a||[]),[a])}},l=({children:e})=>{const t=d();return(0,o.jsx)(i.PrincipalsContext.Provider,Object.assign({value:t},{children:e}))}},68698:(e,t,a)=>{a.d(t,{IG:()=>i.I,Gg:()=>m,A6:()=>h,N:()=>v,fh:()=>r,jg:()=>f.j});var s=a(93264),o=a(68199),n=a(25);function r(){const e=(0,o.useHistory)(),[t,a]=(0,s.useState)(!1),[r,i]=(0,s.useState)(void 0),c=(0,s.useCallback)((e=>{e&&i(e),a(!0)}),[]),d=(0,s.useCallback)((()=>{i(void 0),a(!1)}),[]),{getTokenEndPointUrl:l}=(0,n.NG)();return{isDrawerOpen:t,drawerActiveTab:r,setDrawerActiveTab:i,openDrawer:c,closeDrawer:d,tokenEndPointUrl:l(),onDeleteInstance:()=>{e.push("/streams/kafkas")}}}var i=a(78866),c=a(70655),d=a(85893),l=a(5854),u=a(1808);const p=(0,s.createContext)(void 0),m=({children:e})=>{const t=(0,s.useRef)({}),a=(0,l.useConfig)();if(void 0===a)return(0,d.jsx)(u.AppServicesLoading,{});return(0,d.jsx)(p.Provider,Object.assign({value:{modules:a.federatedModules,getModuleInfo:(e,a,s)=>(0,c.mG)(void 0,void 0,void 0,(function*(){if(void 0!==t.current[a])return t.current[a];const o=yield((e,t,a)=>(0,c.mG)(void 0,void 0,void 0,(function*(){const s=e=>(0,c.mG)(void 0,void 0,void 0,(function*(){const a=`${e}/fed-mods.json?ts=${Date.now()}`,s=yield fetch(a);return yield s.json().then((e=>e)).then((e=>e[t])).then((e=>e.entry[0])).then((t=>t.startsWith(e)?{entryPoint:t,basePath:e}:{entryPoint:`${e}${t}`,basePath:e}))}));try{return yield s(e)}catch(e){if(a)try{return yield s(a)}catch(e){return}}})))(e,a,s);return void 0!==o&&(t.current[a]=o),o}))}},{children:e}))},v=()=>{const e=(0,s.useContext)(p);if(void 0===e)throw new Error("must be used inside FederatedModuleContext provider");return e};var f=a(25458);const h=({children:e})=>(0,d.jsx)(i.I,{scope:"kas",module:"./KasModalLoader",fallback:null,render:t=>(0,d.jsx)(t,{children:e})})},25:(e,t,a)=>{a.d(t,{aC:()=>g,pp:()=>f,NG:()=>k,UI:()=>v,fA:()=>c});var s=a(70655),o=a(93264),n=a(5854),r=a(11483),i=a(15529);const c=e=>{const t=(0,n.useConfig)(),a=(0,n.useAuth)(),c=(0,i.t)(),[d,l]=(0,o.useState)();(0,o.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(!d){const e=yield null==a?void 0:a.ams.getToken(),s=new r.AppServicesApi({accessToken:e,basePath:(null==t?void 0:t.ams.apiBasePath)||""});yield s.apiAccountsMgmtV1CurrentAccountGet().then((e=>{var t,a;const s=null===(a=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.organization)||void 0===a?void 0:a.id;l(s)}))}}))}),[t,a,d]);const u=(0,o.useCallback)((()=>{const t=c.kafka.ams.quotaProductId,a=c.kafka.ams.trialQuotaProductId,s=c.kafka.ams.resourceName,o=c.serviceRegistry.ams.quotaProductId,r=c.serviceRegistry.ams.trialQuotaProductId,i=c.serviceRegistry.ams.resourceName;if(e===n.ProductType.kas)return{quotaProductId:t,trialQuotaProductId:a,resourceName:s,quotaKey:n.QuotaType.kas,trialQuotaKey:n.QuotaType.kasTrial};if(e===n.ProductType.srs)return{quotaProductId:o,trialQuotaProductId:r,resourceName:i,quotaKey:n.QuotaType.srs,trialQuotaKey:n.QuotaType.srsTrial};throw new Error(`getQuotaTypesByProductId error, unrecognized productId ${e}`)}),[c,e]),p=(0,o.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){var e,s,o,n;const i=new Map,c={loading:!0,isServiceDown:!1,data:void 0};if(d){const{quotaProductId:l,trialQuotaProductId:p,resourceName:m,quotaKey:v,trialQuotaKey:f}=u()||{},h=yield null==a?void 0:a.ams.getToken(),g=new r.AppServicesApi({accessToken:h,basePath:(null==t?void 0:t.ams.apiBasePath)||""});try{const t=yield g.apiAccountsMgmtV1OrganizationsOrgIdQuotaCostGet(d,void 0,!0),a=null===(s=null===(e=null==t?void 0:t.data)||void 0===e?void 0:e.items)||void 0===s?void 0:s.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===m&&e.product===l))})),r=null===(n=null===(o=null==t?void 0:t.data)||void 0===o?void 0:o.items)||void 0===n?void 0:n.find((e=>{var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((e=>e.resource_name===m&&e.product===p))}));if(a&&a.allowed>0){const e=(null==a?void 0:a.allowed)-(null==a?void 0:a.consumed);null==i||i.set(v,{allowed:null==a?void 0:a.allowed,consumed:null==a?void 0:a.consumed,remaining:e<0?0:e})}r&&(null==i||i.set(f,{allowed:null==r?void 0:r.allowed,consumed:null==r?void 0:r.consumed,remaining:(null==r?void 0:r.allowed)-(null==r?void 0:r.consumed)})),c.loading=!1,c.data=i}catch(e){c.loading=!1,c.isServiceDown=!0,console.error(e)}}return c}))),[a,t,u,d]);return{orgId:d,getQuota:p}};var d,l=a(68199),u=a(99751);!function(e){e[e.IDLE=0]="IDLE",e[e.FETCHING=1]="FETCHING",e[e.FETCHED=2]="FETCHED",e[e.FETCH_ERROR=3]="FETCH_ERROR"}(d||(d={}));const p=(e,t,a)=>({key:"selfTermsReview",fetch:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){const s=yield null==t?void 0:t.ams.getToken(),o=new r.AppServicesApi({accessToken:s,basePath:(null==e?void 0:e.ams.apiBasePath)||""});return(yield o.apiAuthorizationsV1SelfTermsReviewPost({event_code:a.eventCode,site_code:a.siteCode})).data}))}),m=e=>Object.keys(e).map((t=>`${t}=${encodeURIComponent(e[t])}`)).join("&"),v=e=>{const t=(e=>{const t=(0,n.useConfig)(),a=(0,n.useAuth)(),r=(0,o.useRef)(),i=(0,o.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0!==r.current)return r.current;const s=yield p(t,a,e).fetch().then((e=>e));return r.current=s,s}))),[a,t,e]);return(0,o.useEffect)((()=>{i()}),[t,a,i]),i})(e),a=(0,l.useLocation)();return{shouldOpenCreateModal:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){if("true"===(0,u.parse)(a.search).create){if(!(yield t()).terms_required)return!0}return!1})),preCreateInstance:e=>(0,s.mG)(void 0,void 0,void 0,(function*(){const a=yield t();if(a.terms_available||a.terms_required){if(void 0===a.redirect_url)throw new Error("terms must be signed but there is no terms url");const e=(0,u.stringifyUrl)({url:window.location.href,query:{create:"true"}}),t=((e,t,a)=>`${e}&${m({redirect:t,cancelRedirect:a})}`)(a.redirect_url,e,window.location.href);return window.location.href=t,!1}return e}))}},f=()=>{const e=window.insights;if(void 0===e)throw new Error("must be used inside an initialized insights context");return e};var h=a(62218);const g=()=>{const e=(0,o.useRef)(),t=(0,n.useConfig)(),a=f();if(void 0===t||void 0===a.chrome.auth)throw new Error("useAuth must be used inside a config provider, and insights auth");const r=a.chrome.auth,i=(0,o.useCallback)((()=>(0,s.mG)(void 0,void 0,void 0,(function*(){const a=e.current;if(void 0===a){const a=yield((e,t)=>(0,s.mG)(void 0,void 0,void 0,(function*(){const a={url:e.masSso.authServerUrl,clientId:e.masSso.clientId,realm:e.masSso.realm};return yield(0,h.Nn)(a,t)})))(t,r.getToken);return e.current=a,a}return a}))),[t,r]);(0,o.useEffect)((()=>{i()}),[t,i,r]);const c=()=>(0,s.mG)(void 0,void 0,void 0,(function*(){const e=yield i();return(0,h.hP)(e,r.getToken)})),d=r.getToken;return{getUsername:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield r.getUser()).identity.user.username})),isOrgAdmin:()=>(0,s.mG)(void 0,void 0,void 0,(function*(){return(yield r.getUser()).identity.user.is_org_admin})),kafka:{getToken:c},kas:{getToken:d},ams:{getToken:d},srs:{getToken:d},apicurio_registry:{getToken:c},smart_events:{getToken:d}}},k=()=>{const e=(0,n.useConfig)();return{getTokenEndPointUrl:()=>{if(e)return(0,h.jW)(e.masSso.authServerUrl,e.masSso.realm)}}}},37272:(e,t,a)=>{a.r(t),a.d(t,{APIManagementOverviewPage:()=>n,default:()=>r});var s=a(85893),o=a(1808);const n=()=>(0,s.jsx)(o.APIManagementPage,{}),r=n},23456:(e,t,a)=>{a.r(t),a.d(t,{CosPage:()=>c,default:()=>d});var s=a(85893),o=a(68698),n=a(3241),r=a(5854),i=a(1808);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(n.d,{}):(0,s.jsx)(o.IG,{scope:"cos",fallback:(0,s.jsx)(i.AppServicesLoading,{}),module:"./OpenshiftManagedConnectors",render:e=>(0,s.jsx)(e,{})})},d=c},75401:(e,t,a)=>{a.r(t),a.d(t,{DataScienceOverViewPage:()=>n,default:()=>r});var s=a(85893),o=a(1808);const n=()=>(0,s.jsx)(o.DataSciencePage,{}),r=n},35754:(e,t,a)=>{a.d(t,{cQ:()=>m,PS:()=>D,Jh:()=>p,EP:()=>d,A:()=>u,aH:()=>C,nT:()=>c,Fn:()=>i,dS:()=>l});var s=a(85893),o=a(70655),n=a(68698);const r=e=>{var{module:t}=e,a=(0,o._T)(e,["module"]);return(0,s.jsx)(n.IG,{"data-ouia-app-id":"dataPlane-streams",scope:"kafka",module:t,render:e=>(0,s.jsx)(e,Object.assign({},a))})},i=e=>(0,s.jsx)(r,Object.assign({module:"./Topics"},e)),c=e=>(0,s.jsx)(r,Object.assign({module:"./TopicDetails"},e)),d=e=>(0,s.jsx)(r,Object.assign({module:"./CreateTopic"},e)),l=e=>(0,s.jsx)(r,Object.assign({module:"./UpdateTopic"},e)),u=e=>(0,s.jsx)(r,Object.assign({module:"./Dashboard"},e)),p=e=>(0,s.jsx)(r,Object.assign({module:"./ConsumerGroups"},e)),m=e=>(0,s.jsx)(r,Object.assign({module:"./AclPermissions"},e));var v=a(93264),f=a(68199),h=a(15675),g=a(75408),k=a(25458),b=a(5854),y=a(1808),P=a(17779),S=a(73322),x=a(62218);const j=[{component:h.Fn,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.nT,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.EP,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/create",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.dS,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/update/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/dashboard",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.Jh,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/consumer-groups",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.cQ,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/acls",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0}],_=(0,S.S)(j),w=e=>{var{component:t,InstanceDrawer:a,isAsync:n=!1,title:r,underlyingProps:i,url:c}=e,d=(0,o._T)(e,["component","InstanceDrawer","isAsync","title","underlyingProps","url"]);(0,x.jr)(r);const l=()=>c;return(0,s.jsx)(f.Route,Object.assign({render:e=>(0,s.jsx)(b.BasenameContext.Provider,Object.assign({value:{getBasename:l}},{children:(0,s.jsx)(t,Object.assign({},i,d,e))}))},d))},A=e=>{var{InstanceDrawer:t}=e,a=(0,o._T)(e,["InstanceDrawer"]);const r=(0,f.useRouteMatch)(),{kafka:i}=a,c=(0,n.fh)(),d=(0,v.useCallback)(((e,t)=>{e?c.openDrawer(t):c.closeDrawer()}),[c]);return(0,s.jsx)(t,Object.assign({"data-ouia-app-id":"dataPlane-streams",drawerInstance:i,setDrawerInstance:()=>!1},c,{children:(0,s.jsxs)(f.Switch,{children:[_.map(((e,n)=>{var{path:i,exact:c,component:l,title:u,isAsync:p}=e,m=(0,o._T)(e,["path","exact","component","title","isAsync"]);const v=`${r.path}${i}`;return console.log(`Creating route for ${v}`),(0,s.jsx)(w,Object.assign({path:v,exact:c,component:l,title:u,isAsync:p,underlyingProps:Object.assign(Object.assign({},a),{handleInstanceDrawer:d}),url:r.url,InstanceDrawer:t},m),n)})),(0,s.jsx)(S.c,{title:"404 Page Not Found"})]})}))},C=()=>{const e=(0,b.useConfig)(),{id:t}=(0,f.useParams)(),a=(0,g.HI)(t);if(null==e?void 0:e.serviceDown)return(0,s.jsx)(h.dB,{});if(void 0===a)return(0,s.jsx)(y.AppServicesLoading,{});if(!1===a)throw new Error("404");return(0,s.jsx)(O,{kafka:a})},O=({kafka:e})=>(0,s.jsx)(k.w,Object.assign({kafkaInstance:e.kafkaDetail},{children:(0,s.jsx)(I,{kafka:e})})),I=({kafka:{kafkaDetail:e,adminServerUrl:t}})=>{const{kafka:{getToken:a}}=(0,b.useAuth)(),o=(0,f.useHistory)(),[r,i]=(0,v.useState)(),c=(0,v.useCallback)((e=>{i(e)}),[]),d=(0,v.useCallback)((()=>{o.push("/streams/kafkas")}),[o]),l=(0,v.useMemo)((()=>(0,s.jsx)(h.PS,{kafkaId:e.id,kafkaAdminUrl:t,totalMaxConnections:e.size.total_max_connections||0,maxConnections:e.size.max_connection_attempts_per_sec||0,maxPartitions:e.size.max_partitions||0,kafkaStorageBytes:1073741824*parseInt(e.kafka_storage_size.replace("Gi",""))})),[t,e]),u=(0,v.useMemo)((()=>(0,s.jsx)(P.vJ,{})),[]),p=(0,v.useMemo)((()=>({kafkaPageLink:"/streams/kafkas",kafkaInstanceLink:`/streams/kafkas/${e.id}/topics`,showMetrics:l,onError:c,kafkaName:e.name,apiBasePath:t,getToken:a,showSchemas:u,kafka:e,redirectAfterDeleteInstance:d})),[t,a,e,c,d,l,u]);return 401===r?(0,s.jsx)(h.Xx,{}):(0,s.jsx)(n.IG,{scope:"kas",module:"./InstanceDrawer",fallback:null,render:e=>(0,s.jsx)(A,Object.assign({},p,{InstanceDrawer:e}))})};var T=a(28929);var R=a(86206);function E({accessToken:e,basePath:t}){return(0,o.mG)(this,void 0,void 0,(function*(){const a=new R.TopicsApi(new T.Configuration({accessToken:e,basePath:t}));return((yield a.getTopics(void 0,100,100,void 0,void 0,void 0,void 0)).data.items||[]).map((e=>e.name))}))}function B({accessToken:e,basePath:t,kafkaId:a,duration:s,interval:n,selectedTopic:r}){return(0,o.mG)(this,void 0,void 0,(function*(){const o=new T.DefaultApi(new T.Configuration({accessToken:e,basePath:t})),i=((yield o.getMetricsByRangeQuery(a,s,n,["kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m","kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m","kafka_topic:kafka_log_log_size:sum","kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name))),c=i.filter((e=>{var t;return void 0===r||(null===(t=e.metric)||void 0===t?void 0:t.topic)===r})),d=Array.from(new Set(i.map((e=>e.metric.topic)))),l={},u={},p={},m={};return c.forEach((e=>{const{__name__:t,topic:a}=e.metric;function s(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m":s(l);break;case"kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m":s(u);break;case"kafka_topic:kafka_log_log_size:sum":!function(){const t=p[a]||{};e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0))),p[a]=t}();break;case"kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m":s(m)}})),{metricsTopics:d,bytesOutgoing:u,bytesIncoming:l,bytesPerPartition:p,incomingMessageRate:m}}))}const D=({kafkaId:e,kafkaAdminUrl:t,totalMaxConnections:a,maxConnections:n,maxPartitions:r,kafkaStorageBytes:i})=>{const c=(0,b.useAuth)(),d=(0,f.useHistory)(),l=(0,b.useConfig)(),{getBasename:u}=(0,b.useBasename)()||{},p=u&&u(),m=`metrics-alert-${e}`,[h,g]=(0,v.useState)(null!==localStorage.getItem(m)),k=(0,v.useCallback)((t=>(0,o.mG)(void 0,void 0,void 0,(function*(){const s=yield function({kafkaId:e,duration:t,interval:a,accessToken:s,basePath:n}){return(0,o.mG)(this,void 0,void 0,(function*(){const o=new T.DefaultApi(new T.Configuration({accessToken:s,basePath:n})),r=((yield o.getMetricsByRangeQuery(e,t,a,["kubelet_volume_stats_used_bytes","kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum","kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum"])).data.items||[]).filter((e=>!(e.values&&e.metric&&e.metric.topic&&e.metric.name&&e.metric.persistentvolumeclaim&&e.metric.persistentvolumeclaim.includes("zookeeper")))),i={},c={},d={};return r.forEach((e=>{const{__name__:t}=e.metric;function a(t){e.values.forEach((({value:e,timestamp:a})=>t[a]=e+(t[a]||0)))}switch(t){case"kubelet_volume_stats_used_bytes":a(i);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum":a(c);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum":a(d)}})),{usedDiskSpaceMetrics:i,clientConnectionsMetrics:d,connectionAttemptRateMetrics:c,diskSpaceLimit:0,connectionRateLimit:0,connectionsLimit:0}}))}(Object.assign(Object.assign({},t),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}));return Object.assign(Object.assign({},s),{diskSpaceLimit:i/1073741824,connectionsLimit:a,connectionRateLimit:n})}))),[c,l,e,i,a,n]),P=(0,v.useCallback)((a=>(0,o.mG)(void 0,void 0,void 0,(function*(){const[s,o]=yield Promise.all([E({accessToken:null==c?void 0:c.kafka.getToken(),basePath:t}),B(Object.assign(Object.assign({},a),{kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()}))]),{metricsTopics:n,bytesIncoming:r,bytesOutgoing:i,bytesPerPartition:d,incomingMessageRate:u}=o;return{kafkaTopics:s,metricsTopics:n,bytesIncoming:r,bytesOutgoing:i,bytesPerPartition:d,incomingMessageRate:u}}))),[null==c?void 0:c.kafka,null==c?void 0:c.kas,l.kas.apiBasePath,t,e]),S=(0,v.useCallback)((()=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=yield function({accessToken:e,basePath:t,kafkaId:a}){return(0,o.mG)(this,void 0,void 0,(function*(){const s=new T.DefaultApi(new T.Configuration({accessToken:e,basePath:t}));let o=0,n=0,r=0;return((yield s.getMetricsByInstantQuery(a,["kafka_topic:kafka_topic_partitions:sum","kafka_topic:kafka_topic_partitions:count","consumergroup:kafka_consumergroup_members:count"])).data.items||[]).forEach((({metric:e,value:t})=>{const{__name__:a}=e;switch(a){case"kafka_topic:kafka_topic_partitions:sum":n=t;break;case"kafka_topic:kafka_topic_partitions:count":o=t;break;case"consumergroup:kafka_consumergroup_members:count":r=t}})),{consumerGroups:r,topicPartitions:n,topics:o}}))}({kafkaId:e,basePath:l.kas.apiBasePath,accessToken:null==c?void 0:c.kas.getToken()});return Object.assign(Object.assign({},t),{topicPartitionsLimit:r})}))),[null==c?void 0:c.kas,l.kas.apiBasePath,e,r]);return void 0===l?(0,s.jsx)(y.AppServicesLoading,{}):(0,s.jsx)(y.Metrics,{onCreateTopic:()=>{d.push(`${p}/topic/create`)},getTopicsMetrics:P,getKafkaInstanceMetrics:k,getMetricsKpi:S,isClosed:h,onClickClose:()=>{g(!0),localStorage.setItem(m,"true")}})}},75408:(e,t,a)=>{a.d(t,{HI:()=>c});var s=a(70655),o=a(93264),n=a(28929),r=a(5854);const i=(e,t)=>{if(void 0===t)throw new Error("kafkaRequest cannot be undefined");return e.replace("{}",t.bootstrap_server_host||"")},c=e=>{const{kas:{apiBasePath:t},kafka:a}=(0,r.useConfig)(),{kas:{getToken:c}}=(0,r.useAuth)(),[l,u]=(0,o.useState)(),p=d(),m=(0,o.useCallback)((e=>(0,s.mG)(void 0,void 0,void 0,(function*(){u(void 0);const a=new n.DefaultApi({accessToken:c,basePath:t});try{const t=yield a.getKafkaById(e),{cloud_provider:s,region:o,instance_type:n,size_id:r}=t.data;if(!(s&&o&&r&&n))throw new Error(`Kafka instance ${t.data.id} missing some required info: ${s}, ${o}, ${n}, ${r}`);const i=yield p(s,o,r,n);u(Object.assign(Object.assign({},t.data),{size:i}))}catch(e){u(!1)}}))),[t,p,c]);return(0,o.useEffect)((()=>{e?m(e):u(void 0)}),[m,e]),l?{kafkaDetail:l,adminServerUrl:i((null==a?void 0:a.adminServerUrlTemplate)||"https://admin-server-{}",l)}:l},d=()=>{const{kas:{getToken:e}}=(0,r.useAuth)(),{kas:{apiBasePath:t}}=(0,r.useConfig)();return(0,o.useCallback)(((a,o,r,i)=>(0,s.mG)(void 0,void 0,void 0,(function*(){var s,c,d;try{const l=new n.DefaultApi(new n.Configuration({accessToken:e(),basePath:t})),u=yield l.getInstanceTypesByCloudProviderAndRegion(a,o);if(!(null===(s=null==u?void 0:u.data)||void 0===s?void 0:s.instance_types))throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${o} ${r}, no instance_types returned`);const p=null===(d=null===(c=null==u?void 0:u.data)||void 0===c?void 0:c.instance_types.find((e=>e.id===i)))||void 0===d?void 0:d.sizes,m=null==p?void 0:p.find((e=>e.id===r));if(!m)throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${o} ${r}, can't find a size matching ${r}`);return m}catch(e){throw new Error(`getInstanceTypesByCloudProviderAndRegion api failed for ${a} ${o} ${r}: ${e}`)}}))),[e,t])}},44735:(e,t,a)=>{a.r(t),a.d(t,{default:()=>m});var s=a(85893),o=a(93264),n=a(5854),r=a(3241),i=a(68698),c=a(25),d=a(1808),l=a(15529),u=a(75408);const p=({Component:e})=>{const t=(0,n.useConfig)(),a=(0,l.t)(),{preCreateInstance:d,shouldOpenCreateModal:p}=(0,c.UI)({eventCode:a.kafka.ams.termsAndConditionsEventCode,siteCode:a.kafka.ams.termsAndConditionsSiteCode}),{getAllUserAccounts:m}=(0,i.jg)(),[v,f]=(0,o.useState)(void 0),h=(0,u.HI)(v),g=h?h.kafkaDetail:void 0,k=(0,i.fh)();return t.serviceDown?(0,s.jsx)(r.d,{}):(0,s.jsx)(e,Object.assign({preCreateInstance:d,shouldOpenCreateModal:p,drawerInstance:g,setDrawerInstance:f},k,{getAllUserAccounts:m}))},m=()=>{const{getQuota:e}=(0,c.fA)(null===n.ProductType||void 0===n.ProductType?void 0:n.ProductType.kas);return(0,s.jsx)(n.QuotaContext.Provider,Object.assign({value:{getQuota:e}},{children:(0,s.jsx)(i.IG,{scope:"kas",module:"./OpenshiftStreams",fallback:(0,s.jsx)(d.AppServicesLoading,{}),render:e=>(0,s.jsx)(p,{Component:e})})}))}},77745:(e,t,a)=>{a.r(t),a.d(t,{NotFoundPage:()=>i,default:()=>c});var s=a(85893),o=a(67646),n=a(99922),r=a(68199);const i=()=>(0,s.jsx)(n.PageSection,{children:(0,s.jsxs)(n.EmptyState,Object.assign({variant:"full"},{children:[(0,s.jsx)(n.EmptyStateIcon,{icon:o.ExclamationTriangleIcon}),(0,s.jsx)(n.Title,Object.assign({headingLevel:"h1",size:"lg"},{children:"404 Page not found"})),(0,s.jsx)(n.EmptyStateBody,{children:"We didn't find a page that matches the address you navigated to."}),(0,s.jsx)((function(){const e=(0,r.useHistory)();return(0,s.jsx)(n.Button,Object.assign({onClick:function(){e.push("/")}},{children:"Take me home"}))}),{})]}))}),c=i},83857:(e,t,a)=>{a.r(t),a.d(t,{ConnectedOverviewPage:()=>n,default:()=>r});var s=a(85893),o=a(1808);const n=()=>(0,s.jsx)(o.OverviewPageV2,{toKafkaHref:"/streams/kafkas",toServiceRegistryHref:"/service-registry",toConnectorsHref:"/connectors"}),r=n},60766:(e,t,a)=>{a.r(t),a.d(t,{ResourcesPage:()=>r,default:()=>i});var s=a(85893),o=a(68698),n=a(1808);const r=()=>(0,s.jsx)(o.IG,{scope:"guides",module:"./QuickStartCatalog",fallback:(0,s.jsx)(n.AppServicesLoading,{}),render:e=>(0,s.jsx)(e,{})}),i=r},15822:(e,t,a)=>{a.r(t),a.d(t,{ServiceAccountsPage:()=>c,default:()=>l});var s=a(85893),o=a(68698),n=a(5854),r=a(3241),i=a(1808);const c=()=>(0,s.jsx)(o.IG,{scope:"kas",module:"./ServiceAccounts",fallback:(0,s.jsx)(i.AppServicesLoading,{}),render:e=>(0,s.jsx)(d,{Component:e})}),d=({Component:e})=>{const t=(0,n.useConfig)();return(null==t?void 0:t.serviceDown)?(0,s.jsx)(r.d,{}):(0,s.jsx)(e,{})},l=c},3241:(e,t,a)=>{a.d(t,{d:()=>i});var s=a(85893),o=a(67646),n=a(99922),r=a(93049);const i=()=>{const{t:e}=(0,r.useTranslation)(["appTemporaryFixMe"]);return(0,s.jsx)(n.PageSection,{children:(0,s.jsxs)(n.EmptyState,Object.assign({variant:"full"},{children:[(0,s.jsx)(n.EmptyStateIcon,{icon:o.WrenchIcon}),(0,s.jsx)(n.Title,Object.assign({headingLevel:"h1",size:"lg"},{children:e("serviceDown.serviceDownTitle")})),(0,s.jsx)(n.EmptyStateBody,{children:e("serviceDown.serviceDownMessage")}),(0,s.jsx)(n.Button,Object.assign({variant:"primary",onClick:()=>{window.location.href="https://status.starter.openshift.com/"}},{children:e("serviceDown.serviceDownButton")}))]}))})}},15113:(e,t,a)=>{a.r(t),a.d(t,{ArtifactVersionDetails:()=>d,default:()=>u});var s=a(85893),o=a(68199),n=a(868),r=a(51125),i=a(5854),c=a(15675);const d=()=>{const e=(0,i.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(c.dB,{}):(0,s.jsx)(l,{})},l=()=>{let{artifactId:e}=(0,o.useParams)();return e=decodeURIComponent(e),(0,s.jsx)(r.q,{breadcrumbId:"srs.artifacts_details",artifactId:e,render:e=>(0,s.jsx)(n.P,{registry:e,module:"./FederatedArtifactVersionPage"})})},u=d},8172:(e,t,a)=>{a.r(t),a.d(t,{Artifacts:()=>c,default:()=>l});var s=a(85893),o=a(868),n=a(51125),r=a(5854),i=a(15675);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(i.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(n.q,{breadcrumbId:"srs.artifacts",render:e=>(0,s.jsx)(o.P,{module:"./FederatedArtifactsPage",registry:e})}),l=c},74856:(e,t,a)=>{a.r(t),a.d(t,{ArtifactRedirect:()=>c,default:()=>l});var s=a(85893),o=a(868),n=a(51125),r=a(5854),i=a(15675);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(i.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(n.q,{render:e=>(0,s.jsx)(o.P,{registry:e,module:"./FederatedArtifactRedirectPage"})}),l=c},22322:(e,t,a)=>{a.d(t,{c:()=>n});var s=a(85893),o=a(868);const n=({registry:e,downloadLabel:t})=>(0,s.jsx)(o.P,{module:"./FederatedDownloadArtifacts",registry:e,fileName:e.name,downloadLinkLabel:t})},868:(e,t,a)=>{a.d(t,{P:()=>d});var s=a(70655),o=a(85893);var n=a(68698),r=a(68199),i=a(5854),c=a(1808);const d=e=>{var{module:t}=e,a=(0,s._T)(e,["module"]);return(0,o.jsx)(n.IG,{scope:"apicurio_registry",module:t,fallback:(0,o.jsx)(c.AppServicesLoading,{}),render:e=>(0,o.jsx)(l,Object.assign({Component:e},a))})},l=e=>{var{Component:t,registry:a,principals:n}=e,d=(0,s._T)(e,["Component","registry","principals"]);let l;const u=(0,i.useAuth)(),p=(0,i.useConfig)(),m=(0,r.useHistory)(),v=(0,i.useBasename)(),f=null==u?void 0:u.apicurio_registry.getToken;let{groupId:h,artifactId:g,version:k}=(0,r.useParams)();return h=decodeURIComponent(h),g=decodeURIComponent(g),k=decodeURIComponent(k),void 0===p||void 0===a?(0,o.jsx)(c.AppServicesLoading,{}):f&&v?(l=((e,t,a,s,o)=>({artifacts:{url:`${t}/apis/registry`},auth:{type:"gettoken",getToken:s},features:{readOnly:!1,breadcrumbs:!1,roleManagement:!0,multiTenant:!0,settings:!0},ui:{navPrefixPath:a},principals:o}))(0,a.registryUrl,`${v.getBasename()}/t/${null==a?void 0:a.id}`,f,n),(0,o.jsx)(t,Object.assign({config:l,tenantId:a.id,groupId:h,artifactId:g,version:k,history:m},d))):null}},42789:(e,t,a)=>{a.r(t),a.d(t,{RulesPage:()=>c,default:()=>l});var s=a(85893),o=a(868),n=a(51125),r=a(5854),i=a(15675);const c=()=>{const e=(0,r.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(i.dB,{}):(0,s.jsx)(d,{})},d=()=>(0,s.jsx)(n.q,{breadcrumbId:"srs.global_rules",render:e=>(0,s.jsx)(o.P,{registry:e,module:"./FederatedRulesPage"})}),l=c},92225:(e,t,a)=>{a.r(t),a.d(t,{ServiceRegistryPage:()=>u,ServiceRegistryPageConnected:()=>p,default:()=>m});var s=a(85893),o=a(5854),n=a(68698),r=a(15675),i=a(25),c=a(1808),d=a(22322),l=a(15529);const u=()=>{const e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?(0,s.jsx)(r.dB,{}):(0,s.jsx)(p,{})},p=()=>{const e=(0,o.useConfig)(),t=(0,l.t)(),{getQuota:a}=(0,i.fA)(o.ProductType.srs),{preCreateInstance:r,shouldOpenCreateModal:u}=(0,i.UI)({eventCode:t.serviceRegistry.ams.termsAndConditionsEventCode,siteCode:t.serviceRegistry.ams.termsAndConditionsSiteCode}),{getTokenEndPointUrl:p}=(0,i.NG)();return void 0===e?(0,s.jsx)(c.AppServicesLoading,{}):(0,s.jsx)(c.DevelopmentPreview,{children:(0,s.jsx)(n.IG,{scope:"srs",module:"./ServiceRegistry",fallback:(0,s.jsx)(c.AppServicesLoading,{}),render:e=>(0,s.jsx)(o.QuotaContext.Provider,Object.assign({value:{getQuota:a}},{children:(0,s.jsx)(n.A6,{children:(0,s.jsx)(e,{preCreateInstance:r,shouldOpenCreateModal:u,tokenEndPointUrl:p(),renderDownloadArtifacts:(e,t)=>(0,s.jsx)(d.c,{registry:e,downloadLabel:t})})})}))})})},m=u},51125:(e,t,a)=>{a.d(t,{q:()=>c});var s=a(85893),o=a(68698),n=a(1808),r=a(25),i=a(22322);const c=e=>(0,s.jsx)(o.IG,{scope:"srs",module:"./ApicurioRegistry",fallback:(0,s.jsx)(n.AppServicesLoading,{}),render:t=>(0,s.jsx)(d,Object.assign({Component:t},e))}),d=({Component:e,render:t,breadcrumbId:a,artifactId:n})=>{const{getTokenEndPointUrl:c}=(0,r.NG)();return(0,s.jsx)(o.A6,{children:(0,s.jsx)(e,{render:t,breadcrumbId:a,tokenEndPointUrl:c(),artifactId:n,renderDownloadArtifacts:(e,t)=>(0,s.jsx)(i.c,{registry:e,downloadLabel:t})})})}},17779:(e,t,a)=>{a.d(t,{vJ:()=>c});a(8172),a(74856),a(15113),a(42789),a(92225);var s=a(85893),o=a(68199),n=a(868),r=a(68698),i=a(1808);const c=()=>(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.IG,{scope:"srs",module:"./ServiceRegistryMapping",fallback:(0,s.jsx)(i.AppServicesLoading,{}),render:e=>(0,s.jsx)(d,{Component:e})})}),d=({Component:e})=>{const{topicName:t}=(0,o.useParams)(),a="/service-registry";return(0,s.jsx)(e,{basename:a,topicName:t,renderSchema:e=>(0,s.jsx)(n.P,{module:"./FederatedSchemaMapping",registry:e,topicName:t,groupId:null,version:"latest",registryId:null==e?void 0:e.id,basename:a})})}},15675:(e,t,a)=>{a.d(t,{Xx:()=>c,cQ:()=>d.cQ,PS:()=>d.PS,Jh:()=>d.Jh,EP:()=>d.EP,A:()=>d.A,dB:()=>l.d,nT:()=>d.nT,Fn:()=>d.Fn,dS:()=>d.dS});var s=a(85893),o=a(2008),n=a(93049),r=a(68199);const i=({href:e,children:t})=>(0,s.jsx)(r.Link,Object.assign({to:e||""},{children:t})),c=()=>{const{t:e}=(0,n.useTranslation)(["appTemporaryFixMe"]),t=(0,s.jsx)(n.Trans,{i18nKey:"accessdenied.accessDeniedDescription",t:e,components:[(0,s.jsx)(i,{href:"/streams/kafkas"},"kafkas")]});return(0,s.jsx)(o.Main,{children:(0,s.jsx)(o.NotAuthorized,{title:e("accessdenied.accessDeniedTitle"),description:t,prevPageButtonText:e("accessdenied.accessDeniedButtonText"),showReturnButton:!0})})};a(37272),a(23456),a(75401);var d=a(35754),l=(a(44735),a(77745),a(83857),a(60766),a(15822),a(3241));a(17779)},26836:(e,t,a)=>{a.d(t,{N:()=>u});var s=a(70655),o=a(85893),n=a(93264),r=a(5854);const i=JSON.parse('{"Q":{"kas":{"basePath":"/mas-local-fm/kas","proxyTarget":"http://localhost:9000","fallbackBasePath":"/beta/apps/rhosak-control-plane-ui-build"},"kafka":{"basePath":"/mas-local-fm/kafka","proxyTarget":"http://localhost:8080","fallbackBasePath":"/beta/apps/rhosak-data-plane-ui-build"},"guides":{"basePath":"/mas-local-fm/guides","proxyTarget":"http://localhost:9001","fallbackBasePath":"/beta/apps/rhoas-guides-build"},"apicurio_registry":{"basePath":"/mas-local-fm/apicurio_registry","proxyTarget":"http://localhost:8888","fallbackBasePath":"/beta/apps/sr-ui-build"},"srs":{"basePath":"/mas-local-fm/srs","proxyTarget":"http://localhost:9005","fallbackBasePath":"/beta/apps/srs-ui-build"},"cos":{"basePath":"/mas-local-fm/cos","proxyTarget":"http://localhost:9002","fallbackBasePath":"/beta/apps/cos-ui-build"},"ads":{"basePath":"/mas-local-fm/ads","proxyTarget":"","fallbackBasePath":""},"smart_events":{"basePath":"/mas-local-fm/smart_events","proxyTarget":"http://localhost:9006","fallbackBasePath":"/beta/apps/se-ui-build"}},"v":[{"hostnames":["prod.foo.redhat.com"],"fetchConfig":true,"type":"proxy","config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.stage.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"rbac":{"basePath":"/api/rbac/v1"},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"ads":{"editorsBasePath":""},"smart_events":{"apiBasePath":"https://lcstem2z9g006s6.api.stage.openshift.com"}}},{"hostnames":["qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":true},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.stage.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"ads":{"editorsBasePath":""},"smart_events":{"apiBasePath":"https://lcstem2z9g006s6.api.stage.openshift.com"}}},{"hostnames":["cloud.redhat.com","console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.openshift.com"},"kas":{"apiBasePath":"https://api.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.openshift.com"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://api.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}},"ads":{"editorsBasePath":""},"smart_events":{"apiBasePath":""}}}]}'),c=e=>{const t=window.location.hostname;console.log(`Filter config for ${t}`);const a=e.filter((e=>e.hostnames.includes(t)));if(a.length>1)throw new Error(`Unable to find config for ${t}, more than one config matched ${a}`);if(a.length<1){const t=e.filter((e=>e.hostnames.includes("console.redhat.com")));if(t.length>1)throw new Error(`Unable to load default config, more than one config matched ${a}`);if(t.length<1)throw new Error("Unable to load default config, no configs matched");return t[0]}return a[0]},d=(e,t,a)=>{const s={};return Object.entries(t).forEach((([t,o])=>{let n,{basePath:r}=o;"proxy"!==e.type?r=o.fallbackBasePath:n=o.fallbackBasePath,a||(r.startsWith("/beta")&&(r=r.substring(5)),(null==n?void 0:n.startsWith("/beta"))&&(n=n.substring(5))),s[t]={basePath:r,fallbackBasePath:n}})),Object.assign(Object.assign({},e.config),{federatedModules:s})};var l=a(31589);const u=({children:e})=>{const{beta:t}=(0,l.gV)(),[u,p]=(0,n.useState)((()=>{const e=i.v,a=c(e);if(a.fetchConfig)return;const s=d(a,i.Q,t);return console.log("Done loading config",s),s}));return(0,n.useEffect)((()=>{(0,s.mG)(void 0,void 0,void 0,(function*(){if(void 0===u){const e=yield fetch(`${a.p}config.json`),s=yield e.json(),o=c(s.config),n=d(o,s.federatedModules,t);console.debug("Done loading config",n),p(n)}}))}),[t,u]),(0,o.jsx)(r.ConfigContext.Provider,Object.assign({value:u},{children:e}))}},15529:(e,t,a)=>{a.d(t,{A:()=>o,t:()=>n});var s=a(93264);const o=(0,s.createContext)(void 0),n=()=>{const e=(0,s.useContext)(o);if(void 0===e)throw new Error("useConstants must be used inside an ServiceConstantsContextProvider");return e}},18047:(e,t,a)=>{a.d(t,{B:()=>r});var s=a(85893),o=a(15529);const n=JSON.parse('{"version":1,"kafka":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosak|standard","trialQuotaId":"cluster|rhinfra|rhosaktrial|standard","quotaProductId":"RHOSAK","trialQuotaProductId":"RHOSAKTrial","resourceName":"rhosak"}},"serviceRegistry":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosr|any","trialQuotaId":"cluster|rhinfra|rhosrtrial|any","quotaProductId":"RHOSR","trialQuotaProductId":"RHOSRTrial","resourceName":"rhosr"}}}'),r=({children:e})=>(0,s.jsx)(o.A.Provider,Object.assign({value:n},{children:e}))},31589:(e,t,a)=>{a.d(t,{O1:()=>i,gV:()=>r});var s=a(85893),o=a(93264);const n=(0,o.createContext)(void 0),r=()=>{const e=(0,o.useContext)(n);if(void 0===e)throw new Error("useFeatureFlags must be used inside a FeatureFlagContext provider");return e},i=({children:e})=>{const t={beta:window.location.pathname.startsWith("/beta")};return(0,s.jsx)(n.Provider,Object.assign({value:t},{children:e}))}},36494:(e,t,a)=>{a.d(t,{S:()=>d});var s=a(39133),o=a.n(s),n=a(68573),r=a.n(n),i=a(83215);let c;function d(...e){return c||(c=new(o())({},[r(),...e]),c.register({notifications:i.ee})),c}},73322:(e,t,a)=>{a.d(t,{S:()=>d,c:()=>c});var s=a(85893),o=a(93264),n=a(68199),r=a(62218);const i=(0,o.lazy)((()=>Promise.resolve().then(a.bind(a,77745)))),c=({title:e})=>((0,r.jr)(e),(0,s.jsx)(n.Route,{component:i})),d=e=>e.reduce(((e,t)=>[...e,...t.routes?t.routes:[t]]),[])},37687:(e,t,a)=>{a.d(t,{Z:()=>s});const s=function(e){let t="/";const a=e.split("/");return a.shift(),"beta"===a[0]&&(a.shift(),t="/beta/"),`${t}${a[0]}`}},62218:(e,t,a)=>{a.d(t,{jW:()=>P,hP:()=>b,Nn:()=>f,jr:()=>o});var s=a(93264);function o(e){(0,s.useEffect)((()=>{const t=document.title;return document.title=e,()=>{document.title=t}}),[e])}var n=a(70655),r=a(70213),i=a.n(r),c=a(54191),d=a.n(c),l=a(23931),u=a(89053),p=a.n(u),m=a(42902);const v="mrt",f=(e,t)=>(0,n.mG)(void 0,void 0,void 0,(function*(){const a={responseMode:"query",enableLogging:!1,checkLoginIframe:!1},s=yield h(t);if(void 0!==s&&void 0!==e.url){const t=P(e.url,e.realm),o=new URLSearchParams;o.append("grant_type","refresh_token"),o.append("refresh_token",s),o.append("client_id",e.clientId);const n=yield fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o});if(200===n.status){console.debug("[KEYCLOAK] found valid access token");const e=(yield n.json()).access_token;a.token=e,a.refreshToken=s}else console.debug("[KEYCLOAK] error getting access token from endpoint"),a.onLoad="login-required"}else{new URLSearchParams(window.location.search).has("state")||(console.debug("[KEYCLOAK] did not find refresh token, will require a full login"),a.onLoad="login-required")}console.debug("[KEYCLOAK] initOptions "+JSON.stringify(a));const o=i()(e),n=yield o.init(a);return console.log("[KEYCLOAK] keycloakSuccess "+n),o.refreshToken?(console.log("[KEYCLOAK] initKeycloak "+o.refreshToken),yield k(o.refreshToken,t)):console.log("[KEYCLOAK] no refresh token"),console.log("[KEYCLOAK] init complete"),o})),h=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){const t=d().get(v);if(void 0===t)return;const a=l.Base64.decode(t),s=JSON.parse(a);let o;try{o=p()(s.refreshToken)}catch(e){return void g()}if(void 0===o||void 0===o.exp)return void g();if((0,m.Z)(new Date)>o.exp+50)return void g();const n=yield e();if(p()(n).account_id===s.rhUserId)return s.refreshToken;g()})),g=()=>{console.debug("clearing stored refresh token"),d().remove(v)},k=(e,t)=>(0,n.mG)(void 0,void 0,void 0,(function*(){const a=yield t(),s=p()(a).account_id,o=JSON.stringify({refreshToken:e,rhUserId:s}),n=l.Base64.encode(o);console.debug("storing refresh token"),d().set(v,n)})),b=(e,t)=>(0,n.mG)(void 0,void 0,void 0,(function*(){if(console.log("keycloak.refreshToken "+e.refreshToken),console.log("keycloak.token "+e.token),console.log("keycloak.tokenParsed "+e.tokenParsed),yield e.updateToken(50),console.log("keycloak.token "+e.token),console.log("keycloak.tokenParsed "+e.tokenParsed),!e.token||!e.tokenParsed)throw new Error("No token from keycloak!");const a=yield t(),s=p()(a).account_id,o=e.tokenParsed["rh-user-id"];return s!==o?(console.debug(`Triggering MASSSO logout because sso.redhat.com account_id claim does not match the MASSSO rh-user-id claim. account_id: ${s}, rh-user-id ${o}`),yield y(e),""):(e.refreshToken&&(yield k(e.refreshToken,t)),e.token)})),y=e=>(0,n.mG)(void 0,void 0,void 0,(function*(){e&&(console.debug("Performing MASSSO logout"),yield e.logout())})),P=(e,t)=>`${e}/realms/${t}/protocol/openid-connect/token`}}]);
