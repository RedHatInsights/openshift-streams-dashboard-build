"use strict";(self.webpackChunkapplication_services_ui=self.webpackChunkapplication_services_ui||[]).push([[896],{28495:(e,t,n)=>{n.d(t,{Z:()=>U});var r=n(75418),a=n.n(r),o=n(68199),i=n(78625),c=n(71355),s=n(70655),u=n(19581),l=n(98823),d=n(71987),f=n(64120),m=n(62579),v=n(35145),p=n(36734),h=n(5854),g=n(41970),k=n(99922),_=a().lazy((function(){return n.e(3271).then(n.bind(n,33271))})),b=a().lazy((function(){return Promise.resolve().then(n.bind(n,15447))})),y=a().lazy((function(){return Promise.resolve().then(n.bind(n,29913))})),P=a().lazy((function(){return Promise.resolve().then(n.bind(n,13117))})),w=a().lazy((function(){return Promise.resolve().then(n.bind(n,64765))})),S=a().lazy((function(){return Promise.resolve().then(n.bind(n,62808))})),E=a().lazy((function(){return n.e(4720).then(n.bind(n,44720))})),A=a().lazy((function(){return Promise.resolve().then(n.bind(n,88530))})),C=a().lazy((function(){return Promise.resolve().then(n.bind(n,69372))})),I=a().lazy((function(){return Promise.resolve().then(n.bind(n,91285))})),T=a().lazy((function(){return Promise.resolve().then(n.bind(n,31841))})),R=a().lazy((function(){return n.e(4359).then(n.bind(n,54359))})),O=a().lazy((function(){return n.e(1586).then(n.bind(n,31586))})),x=a().lazy((function(){return Promise.resolve().then(n.bind(n,80140))})),B=a().lazy((function(){return Promise.resolve().then(n.bind(n,44055))})),D=function(){return a().createElement(o.Redirect,{to:"/streams/kafkas"})},H=[{component:function(){return a().createElement(o.Redirect,{to:"/overview"})},exact:!0,label:"Overview",path:"/",title:"Overview | Red Hat OpenShift Application Services"},{component:C,exact:!0,label:"Overview",path:"/overview",title:"Overview | Red Hat OpenShift Application Services"},{component:b,exact:!0,label:"API Management",path:"/api-management",title:"API Management | Red Hat OpenShift Application Services"},{component:S,exact:!0,label:"Data Science",path:"/data-science",title:"Data Science | Red Hat OpenShift Application Services"},{component:I,exact:!0,label:"Learning Resources | Red Hat OpenShift Application Services",path:"/learning-resources",title:"Learning Resources | Red Hat OpenShift Application Services",devPreview:!1},{component:D,exact:!0,label:"Streams for Apache Kafka",path:"/streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:E,exact:!0,label:"Streams for Apache Kafka",path:"/streams/overview",title:"Overview | Streams for Apache Kafka | Red Hat OpenShift Application Services"},{component:A,exact:!0,label:"Streams for Apache Kafka",path:"/streams/kafkas",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas",devPreview:!1},{component:a().lazy((function(){return Promise.resolve().then(n.bind(n,62655))})),exact:!0,label:"Service Registry",path:"/service-registry",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:function(){return a().createElement(o.Redirect,{to:"/service-accounts"})},exact:!0,label:"Service Accounts",path:"/streams/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:function(){return a().createElement(o.Redirect,{to:"/learning-resources"})},label:"QuickStarts for Red Hat OpenShift Application Services",path:"/streams/resources",title:"QuickStarts for Red Hat OpenShift Application Services",devPreview:!0},{component:p.aH,label:"Streams for Apache Kafka",path:"/streams/kafkas/:id",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services",basename:"/streams/kafkas/:id",devPreview:!1},{component:P,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:T,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/rules",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:R,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/roles",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:O,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/settings",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:y,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:w,exact:!0,label:"Service Registry",path:"/service-registry/t/:tenantId/artifacts/:groupId/:artifactId/versions/:version",title:"Service Registry | Red Hat OpenShift Application Services",basename:"/service-registry"},{component:B,exact:!1,label:"COS",path:"/connectors",title:"Connectors | Red Hat OpenShift Application Services",basename:"".concat((0,d.Z)(window.location.pathname),"/connectors"),devPreview:!0},{component:x,exact:!0,label:"Service Accounts",path:"/service-accounts",title:"Service Accounts | Red Hat OpenShift Application Services",devPreview:!1},{component:D,exact:!0,label:"Streams for Apache Kafka",path:"/openshift-streams",title:"Streams for Apache Kafka | Red Hat OpenShift Application Services"}],K=function(e){var t=e.component,n=e.isAsync,i=void 0!==n&&n,c=e.title,u=e.basename,d=e.devPreview,p=(0,s.__rest)(e,["component","isAsync","title","basename","devPreview"]),_=(0,g.useTranslation)().t,b=(0,o.useHistory)();(0,m.bi)(i),(0,v.jr)(c);var y=(0,r.useCallback)((function(){return u||""}),[u]),P=(0,r.useCallback)((function(){return b.push("/")}),[b]),w=(0,r.useCallback)((function(e){return a().createElement(l.ErrorBoundary,{fallbackRender:function(e){return"404"===e.error.message?a().createElement(f.AppServicesPageNotFound,null):a().createElement(f.AppServicesEmptyState,{emptyStateProps:{variant:f.AppServicesEmptyStateVariant.UnexpectedError},emptyStateIconProps:{className:"icon-color"},titleProps:{title:_("common:something_went_wrong")},emptyStateBodyProps:{body:_("common:unexpected_error")}},a().createElement(k.Button,{onClick:P},_("common:return_to_home_page")))}},a().createElement(f.DevelopmentPreview,{show:d},a().createElement(h.BasenameContext.Provider,{value:{getBasename:y}},a().createElement(t,(0,s.__assign)({},p,e)))))}),[t,d,y,P,p,_]);return a().createElement(o.Route,(0,s.__assign)({render:w},p))},L=function(){return a().createElement(a().Fragment,null,a().createElement(u.LastLocationProvider,null,a().createElement(a().Suspense,{fallback:a().createElement(f.AppServicesLoading,null)},a().createElement(o.Switch,null,(0,m.SV)(H).map((function(e,t){var n=e.path,r=e.exact,o=e.component,i=e.title,c=e.isAsync,u=(0,s.__rest)(e,["path","exact","component","title","isAsync"]);return a().createElement(K,(0,s.__assign)({path:n,exact:r,component:o,key:t,title:i,isAsync:c},u))})),a().createElement(m.c5,{title:"404 Page Not Found"})))),a().createElement(_,null))},M=n(98307),z=n(86437);const U=(0,i.connect)()((function(){var e=(0,z.pp)(),t=(0,o.useHistory)(),n=function(){var e="overview",n=t.location.pathname.split("/");return n.length>1?""===n[1]?e:"openshift-streams"===n[1]?"streams":n[1]:e};return(0,r.useEffect)((function(){e.chrome.init();var r=n();e.chrome.identifyApp(r);var a=e.chrome.on("APP_NAVIGATION",(function(e){t.push("/".concat(["kafkas","service-accounts","resources"].includes(e.navId)?"streams/":"").concat(e.navId))}));return function(){a()}}),[n,t,e.chrome]),a().createElement(M.Gg,null,a().createElement(c.qJ,null),a().createElement(k.Page,null,a().createElement(L,null)))}))},85859:(e,t,n)=>{n.d(t,{I:()=>l});var r=n(70655),a=n(75418),o=n.n(a),i=n(5854),c=n(98307),s=n(64120),u=function(){var e=(0,a.useRef)(!1);return(0,a.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e};var l=function(e){var t=e.scope,n=e.module,i=e.render,s=e.fallback;console.log("Dynamic federated module",t,n);var l=u(),f=(0,c.N)(),m=f.getModuleInfo,v=f.modules,p=(0,a.useState)(),h=p[0],g=p[1];return(0,a.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,m(v[t].basePath,t,v[t].fallbackBasePath)];case 1:return e=n.sent(),l.current&&g(e),[2]}}))}))}),[t,v,m,l]),void 0!==h?o().createElement(d,{scope:t,module:n,render:i,moduleInfo:h}):void 0!==s?o().createElement(o().Fragment,null,s):null},d=function(e){var t=e.moduleInfo,a=e.fallback,c=e.scope,l=e.render,d=e.module,f=function(e){var t=u(),n=o().useState(!1),r=n[0],a=n[1],i=o().useState(!1),c=i[0],s=i[1];return o().useEffect((function(){var n;if(t.current){if(!e)return void s(!0);(n=document.createElement("script")).src=e,n.type="text/javascript",n.async=!0,a(!1),s(!1),n.onload=function(){console.log("Dynamic federated module Loaded: ".concat(e)),a(!0)},n.onerror=function(){console.error("Dynamic federated module Error: ".concat(e)),a(!1),s(!0)},document.head.appendChild(n)}return function(){n&&(console.log("Dynamic federated module Removed: ".concat(e)),document.head.removeChild(n))}}),[e]),{ready:r,failed:c}}(t.entryPoint),m=f.ready,v=f.failed;if(m&&!v){var p=o().lazy(function(e,t){var a=this;return function(){return(0,r.__awaiter)(a,void 0,void 0,(function(){var a,o,i;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.I("default")];case 1:return r.sent(),[4,(a=window[e]).init(n.S.default)];case 2:return r.sent(),[4,a.get(t)];case 3:return o=r.sent(),i=o(),console.debug("loaded ".concat(t," from ").concat(e)),[2,i]}}))}))}}(c,d));return o().createElement(i.AssetsContext.Provider,{value:{getPath:function(){return t.basePath}}},o().createElement(o().Suspense,{fallback:o().createElement(s.AppServicesLoading,null)},l(p)))}return a?o().createElement(o().Fragment,null,a):null}},82436:(e,t,n)=>{n.d(t,{j:()=>u,w:()=>l});var r=n(70655),a=n(75418),o=n.n(a),i=n(99137),c=n(5854),s=n(97744),u=function(){var e=(0,c.useConfig)(),t=(0,c.useAuth)(),n=(0,a.useState)(),o=n[0],u=n[1],l=(0,a.useState)(),d=l[0],f=l[1];return(0,a.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n,a,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return void 0===e||void 0===t||void 0===e.rbac.basePath?[3,5]:[4,t.kas.getToken()];case 1:n=r.sent(),a=new s.PrincipalApi({accessToken:n,basePath:null==e?void 0:e.rbac.basePath}),r.label=2;case 2:return r.trys.push([2,4,,5]),[4,a.listPrincipals(-1).then((function(e){return e.data.data.map((function(e){return{id:e.username,principalType:c.PrincipalType.UserAccount,displayName:"".concat(e.first_name," ").concat(e.last_name),emailAddress:e.email}}))}))];case 3:return o=r.sent(),f(o),[3,5];case 4:return r.sent(),[3,5];case 5:return[2]}}))}))}),[t,e]),(0,a.useEffect)((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n,a;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return void 0===e||void 0===t||void 0===e.rbac.basePath?[3,3]:[4,t.kas.getToken()];case 1:return n=r.sent(),[4,new i.SecurityApi({accessToken:n,basePath:e.kas.apiBasePath}).getServiceAccounts().then((function(e){return e.data.items.map((function(e){return{id:e.client_id,displayName:e.name,principalType:c.PrincipalType.ServiceAccount}}))}))];case 2:a=r.sent(),u(a),r.label=3;case 3:return[2]}}))}))}),[t,e]),{getAllPrincipals:function(){var e=[];return void 0!==d&&void 0!==o&&(e=e.concat(d)),void 0!==o&&(e=e.concat(o)),e},getAllUserAccounts:function(){return d},getAllServiceAccounts:function(){return o}}},l=function(e){var t=e.children,n=u().getAllPrincipals;return o().createElement(c.PrincipalsContext.Provider,{value:{getAllPrincipals:n}},t)}},98307:(e,t,n)=>{n.d(t,{IG:()=>s.I,Gg:()=>v,A6:()=>g,N:()=>p,fh:()=>c,jg:()=>h.j});var r=n(75418),a=n.n(r),o=n(68199),i=n(86437);function c(){var e=(0,o.useHistory)(),t=(0,r.useState)(!1),n=t[0],a=t[1],c=(0,r.useState)(void 0),s=c[0],u=c[1],l=(0,r.useCallback)((function(e){e&&u(e),a(!0)}),[]),d=(0,r.useCallback)((function(){u(void 0),a(!1)}),[]),f=(0,i.NG)().getTokenEndPointUrl;return{isDrawerOpen:n,drawerActiveTab:s,setDrawerActiveTab:u,openDrawer:l,closeDrawer:d,tokenEndPointUrl:f(),onDeleteInstance:function(){e.push("/streams/kafkas")}}}var s=n(85859),u=n(70655),l=n(5854),d=n(64120),f=function(e,t,n){return(0,u.__awaiter)(void 0,void 0,void 0,(function(){var r;return(0,u.__generator)(this,(function(a){switch(a.label){case 0:"fed-mods.json",r=function(e){return(0,u.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,u.__generator)(this,(function(r){switch(r.label){case 0:return n="".concat(e,"/").concat("fed-mods.json","?ts=").concat(Date.now()),[4,fetch(n)];case 1:return[4,r.sent().json().then((function(e){return e})).then((function(e){return e[t]})).then((function(e){return e.entry[0]})).then((function(t){return t.startsWith(e)?{entryPoint:t,basePath:e}:{entryPoint:"".concat(e).concat(t),basePath:e}}))];case 2:return[2,r.sent()]}}))}))},a.label=1;case 1:return a.trys.push([1,3,,8]),[4,r(e)];case 2:return[2,a.sent()];case 3:if(a.sent(),!n)return[3,7];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,r(n)];case 5:return[2,a.sent()];case 6:return a.sent(),[2,void 0];case 7:return[3,8];case 8:return[2,void 0]}}))}))},m=a().createContext(void 0),v=function(e){var t=e.children,n=(0,r.useRef)({}),o=(0,l.useConfig)();if(void 0===o)return a().createElement(d.AppServicesLoading,null);return a().createElement(m.Provider,{value:{modules:o.federatedModules,getModuleInfo:function(e,t,r){return(0,u.__awaiter)(void 0,void 0,void 0,(function(){var a;return(0,u.__generator)(this,(function(o){switch(o.label){case 0:return void 0!==n.current[t]?[2,n.current[t]]:[4,f(e,t,r)];case 1:return void 0!==(a=o.sent())&&(n.current[t]=a),[2,a]}}))}))}}},t)},p=function(){var e=a().useContext(m);if(void 0===e)throw new Error("must be used inside FederatedModuleContext provider");return e},h=n(82436),g=function(e){var t=e.children;return a().createElement(s.I,{scope:"kas",module:"./KasModalLoader",fallback:null,render:function(e){return a().createElement(e,null,t)}})}},86437:(e,t,n)=>{n.d(t,{aC:()=>k,pp:()=>p,NG:()=>_,UI:()=>v,fA:()=>u});var r,a=n(70655),o=n(75418),i=n(5854),c=n(6283),s=n(84875),u=function(e){var t=(0,i.useConfig)(),n=(0,i.useAuth)(),r=(0,s.t)(),u=(0,o.useState)(),l=u[0],d=u[1];(0,o.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return l?[3,3]:[4,null==n?void 0:n.ams.getToken()];case 1:return e=r.sent(),[4,new c.AppServicesApi({accessToken:e,basePath:(null==t?void 0:t.ams.apiBasePath)||""}).apiAccountsMgmtV1CurrentAccountGet().then((function(e){var t,n,r=null===(n=null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.organization)||void 0===n?void 0:n.id;d(r)}))];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}),[null==t?void 0:t.ams.apiBasePath,n]);var f=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var o,s,u,d,f,m,v,p,h,g,k,_,b,y,P,w,S,E,A;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return o=new Map,s={loading:!0,isServiceDown:!1,data:void 0},l?(C=r.kafka.ams.quotaProductId,I=r.kafka.ams.trialQuotaProductId,T=r.kafka.ams.resourceName,R=r.serviceRegistry.ams.quotaProductId,O=r.serviceRegistry.ams.trialQuotaProductId,x=r.serviceRegistry.ams.resourceName,u=(e===i.ProductType.kas?{quotaProductId:C,trialQuotaProductId:I,resourceName:T,quotaKey:i.QuotaType.kas,trialQuotaKey:i.QuotaType.kasTrial}:e===i.ProductType.srs?{quotaProductId:R,trialQuotaProductId:O,resourceName:x,quotaKey:i.QuotaType.srs,trialQuotaKey:i.QuotaType.srsTrial}:void 0)||{},d=u.quotaProductId,f=u.trialQuotaProductId,m=u.resourceName,v=u.quotaKey,p=u.trialQuotaKey,[4,null==n?void 0:n.ams.getToken()]):[3,5];case 1:h=a.sent(),g=new c.AppServicesApi({accessToken:h,basePath:(null==t?void 0:t.ams.apiBasePath)||""}),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,g.apiAccountsMgmtV1OrganizationsOrgIdQuotaCostGet(l,void 0,!0)];case 3:return k=a.sent(),_=null===(S=null===(w=null==k?void 0:k.data)||void 0===w?void 0:w.items)||void 0===S?void 0:S.find((function(e){var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((function(e){return e.resource_name===m&&e.product===d}))})),b=null===(A=null===(E=null==k?void 0:k.data)||void 0===E?void 0:E.items)||void 0===A?void 0:A.find((function(e){var t;return null===(t=e.related_resources)||void 0===t?void 0:t.find((function(e){return e.resource_name===m&&e.product===f}))})),_&&_.allowed>0&&(y=(null==_?void 0:_.allowed)-(null==_?void 0:_.consumed),null==o||o.set(v,{allowed:null==_?void 0:_.allowed,consumed:null==_?void 0:_.consumed,remaining:y<0?0:y})),b&&(null==o||o.set(p,{allowed:null==b?void 0:b.allowed,consumed:null==b?void 0:b.consumed,remaining:(null==b?void 0:b.allowed)-(null==b?void 0:b.consumed)})),s.loading=!1,s.data=o,[3,5];case 4:return P=a.sent(),s.loading=!1,s.isServiceDown=!0,console.error(P),[3,5];case 5:return[2,s]}var C,I,T,R,O,x}))}))};return(0,o.useMemo)((function(){return{orgId:l,getQuota:f}}),[l,f])},l=n(68199),d=n(87211);!function(e){e[e.IDLE=0]="IDLE",e[e.FETCHING=1]="FETCHING",e[e.FETCHED=2]="FETCHED",e[e.FETCH_ERROR=3]="FETCH_ERROR"}(r||(r={}));var f=function(e,t,n){return{key:"selfTermsReview",fetch:function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var r;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,null==t?void 0:t.ams.getToken()];case 1:return r=a.sent(),[4,new c.AppServicesApi({accessToken:r,basePath:(null==e?void 0:e.ams.apiBasePath)||""}).apiAuthorizationsV1SelfTermsReviewPost({event_code:n.eventCode,site_code:n.siteCode})];case 2:return[2,a.sent()]}}))}))}}},m=function(e){return Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&")},v=function(e){var t=function(e){var t=(0,i.useConfig)(),n=(0,i.useAuth)(),r=(0,o.useRef)(),c=function(){return(0,a.__awaiter)(void 0,void 0,Promise,(function(){var o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return void 0!==r.current?[2,r.current]:[4,f(t,n,e).fetch().then((function(e){return e.data}))];case 1:return o=a.sent(),r.current=o,[2,o]}}))}))};return(0,o.useEffect)((function(){c()}),[t,n]),c}(e),n=(0,l.useLocation)();return{shouldOpenCreateModal:function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return e=(0,d.parse)(n.search),"true"===e.create?[4,t()]:[3,2];case 1:if(!r.sent().terms_required)return[2,!0];r.label=2;case 2:return[2,!1]}}))}))},preCreateInstance:function(e){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var n,r,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,t()];case 1:if((n=a.sent()).terms_available||n.terms_required){if(void 0===n.redirect_url)throw new Error("terms must be signed but there is no terms url");return r=(0,d.stringifyUrl)({url:window.location.href,query:{create:"true"}}),o=function(e,t,n){var r={redirect:t,cancelRedirect:n};return"".concat(e,"&").concat(m(r))}(n.redirect_url,r,window.location.href),window.location.href=o,[2,!1]}return[2,e]}}))}))}}},p=function(){var e=window.insights;if(void 0===e)throw new Error("must be used inside an initialized insights context");return e},h=n(35145),g=function(e,t){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return n={url:e.masSso.authServerUrl,clientId:e.masSso.clientId,realm:e.masSso.realm},[4,(0,h.Nn)(n,t)];case 1:return[2,r.sent()]}}))}))},k=function(){var e=(0,o.useRef)(),t=(0,i.useConfig)(),n=p();if(void 0===t||void 0===n.chrome.auth)throw new Error("useAuth must be used inside a config provider, and insights auth");var r=n.chrome.auth,c=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var n,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return void 0!==(n=e.current)?[3,2]:[4,g(t,r.getToken)];case 1:return o=a.sent(),e.current=o,[2,o];case 2:return[2,n]}}))}))};(0,o.useEffect)((function(){c()}),[t,r]);var s=function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,c()];case 1:return e=t.sent(),[2,(0,h.hP)(e,r.getToken)]}}))}))},u=r.getToken;return{getUsername:function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,r.getUser()];case 1:return[2,e.sent().identity.user.username]}}))}))},isOrgAdmin:function(){return(0,a.__awaiter)(void 0,void 0,void 0,(function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,r.getUser()];case 1:return[2,e.sent().identity.user.is_org_admin]}}))}))},kafka:{getToken:s},kas:{getToken:u},ams:{getToken:u},srs:{getToken:u},apicurio_registry:{getToken:s}}},_=function(){var e=(0,i.useConfig)();return{getTokenEndPointUrl:function(){if(e)return(0,h.jW)(e.masSso.authServerUrl,e.masSso.realm)}}}},15447:(e,t,n)=>{n.r(t),n.d(t,{APIManagementOverviewPage:()=>i,default:()=>c});var r=n(75418),a=n.n(r),o=n(64120),i=function(){return a().createElement(o.APIManagementPage,null)};const c=i},44055:(e,t,n)=>{n.r(t),n.d(t,{CosPage:()=>u,default:()=>l});var r=n(98307),a=n(38955),o=n(5854),i=n(75418),c=n.n(i),s=n(64120),u=function(){var e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?c().createElement(a.d,null):c().createElement(r.IG,{scope:"cos",fallback:c().createElement(s.AppServicesLoading,null),module:"./OpenshiftManagedConnectors",render:function(e){return c().createElement(e,null)}})};const l=u},62808:(e,t,n)=>{n.r(t),n.d(t,{DataScienceOverViewPage:()=>i,default:()=>c});var r=n(75418),a=n.n(r),o=n(64120),i=function(){return a().createElement(o.DataSciencePage,null)};const c=i},36734:(e,t,n)=>{n.d(t,{cQ:()=>v,PS:()=>L,Jh:()=>m,EP:()=>l,A:()=>f,aH:()=>I,nT:()=>u,Fn:()=>s,dS:()=>d});var r=n(70655),a=n(75418),o=n.n(a),i=n(98307),c=function(e){var t=e.module,n=(0,r.__rest)(e,["module"]);return o().createElement(i.IG,{"data-ouia-app-id":"dataPlane-streams",scope:"kafka",module:t,render:function(e){return o().createElement(e,(0,r.__assign)({},n))}})},s=function(e){return o().createElement(c,(0,r.__assign)({module:"./Topics"},e))},u=function(e){return o().createElement(c,(0,r.__assign)({module:"./TopicDetails"},e))},l=function(e){return o().createElement(c,(0,r.__assign)({module:"./CreateTopic"},e))},d=function(e){return o().createElement(c,(0,r.__assign)({module:"./UpdateTopic"},e))},f=function(e){return o().createElement(c,(0,r.__assign)({module:"./Dashboard"},e))},m=function(e){return o().createElement(c,(0,r.__assign)({module:"./ConsumerGroups"},e))},v=function(e){return o().createElement(c,(0,r.__assign)({module:"./AclPermissions"},e))},p=n(68199),h=n(23173),g=n(82161),k=n(82436),_=n(5854),b=n(64120),y=n(63564),P=n(62579),w=n(35145),S=[{component:h.Fn,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.nT,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topics/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.EP,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/create",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.dS,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/topic/update/:topicName",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.A,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/dashboard",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.Jh,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/consumer-groups",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0},{component:h.cQ,exact:!0,label:"Red Hat OpenShift Streams for Apache Kafka",path:"/acls",title:"Red Hat OpenShift Streams for Apache Kafka",devPreview:!0}],E=(0,P.SV)(S),A=function(e){var t=e.component,n=(e.InstanceDrawer,e.isAsync),a=void 0!==n&&n,i=e.title,c=e.underlyingProps,s=e.url,u=(0,r.__rest)(e,["component","InstanceDrawer","isAsync","title","underlyingProps","url"]);(0,P.bi)(a),(0,w.jr)(i);var l=function(){return s};return o().createElement(p.Route,(0,r.__assign)({render:function(e){return o().createElement(_.BasenameContext.Provider,{value:{getBasename:l}},o().createElement(t,(0,r.__assign)({},c,u,e)))}},u))},C=function(e){var t=e.InstanceDrawer,n=(0,r.__rest)(e,["InstanceDrawer"]),c=(0,p.useRouteMatch)(),s=n.kafka,u=(0,i.fh)(),l=(0,a.useCallback)((function(e,t){e?u.openDrawer(t):u.closeDrawer()}),[u]);return o().createElement(t,(0,r.__assign)({"data-ouia-app-id":"dataPlane-streams",drawerInstance:s,setDrawerInstance:function(){return!1}},u),o().createElement(p.Switch,null,E.map((function(e,a){var i=e.path,s=e.exact,u=e.component,d=e.title,f=e.isAsync,m=(0,r.__rest)(e,["path","exact","component","title","isAsync"]),v="".concat(c.path).concat(i);return console.log("Creating route for ".concat(v)),o().createElement(A,(0,r.__assign)({path:v,exact:s,component:u,key:a,title:d,isAsync:f,underlyingProps:(0,r.__assign)((0,r.__assign)({},n),{handleInstanceDrawer:l}),url:c.url,InstanceDrawer:t},m))})),o().createElement(P.c5,{title:"404 Page Not Found"})))},I=function(){var e=(0,_.useConfig)(),t=(0,p.useParams)().id,n=(0,g.HI)(t);if(null==e?void 0:e.serviceDown)return o().createElement(h.dB,null);if(void 0===n)return o().createElement(b.AppServicesLoading,null);if(!1===n)throw new Error("404");return o().createElement(T,{kafka:n})},T=function(e){var t=e.kafka;return o().createElement(k.w,{kafkaInstance:t.kafkaDetail},o().createElement(R,{kafka:t}))},R=function(e){var t=e.kafka,n=t.kafkaDetail,c=t.adminServerUrl,s=(0,_.useAuth)().kafka.getToken,u=(0,p.useHistory)(),l=(0,a.useState)(),d=l[0],f=l[1],m=(0,a.useCallback)((function(e){f(e)}),[]),v=(0,a.useCallback)((function(){u.push("/streams/kafkas")}),[u]),g=(0,a.useMemo)((function(){return o().createElement(h.PS,{kafkaId:n.id,kafkaAdminUrl:c,totalMaxConnections:n.size.total_max_connections||0,maxConnections:n.size.max_connection_attempts_per_sec||0,maxPartitions:n.size.max_partitions||0,kafkaStorageBytes:1073741824*parseInt(n.kafka_storage_size.replace("Gi",""))})}),[c,n]),k=(0,a.useMemo)((function(){return o().createElement(y.vJ,null)}),[]),b=(0,a.useMemo)((function(){return{kafkaPageLink:"/streams/kafkas",kafkaInstanceLink:"/streams/kafkas/".concat(n.id,"/topics"),showMetrics:g,onError:m,kafkaName:n.name,apiBasePath:c,getToken:s,showSchemas:k,kafka:n,redirectAfterDeleteInstance:v}}),[c,s,n,m,v,g,k]);return 401===d?o().createElement(h.Xx,null):o().createElement(i.IG,{scope:"kas",module:"./InstanceDrawer",fallback:null,render:function(e){return o().createElement(C,(0,r.__assign)({},b,{InstanceDrawer:e}))}})},O=n(99137);function x(e){var t=e.kafkaId,n=e.duration,a=e.interval,o=e.accessToken,i=e.basePath;return(0,r.__awaiter)(this,void 0,Promise,(function(){var e,c,s,u,l;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,new O.DefaultApi(new O.Configuration({accessToken:o,basePath:i})).getMetricsByRangeQuery(t,n,a,["kubelet_volume_stats_used_bytes","kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum","kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum"])];case 1:return e=r.sent(),c=(e.data.items||[]).filter((function(e){return!(e.values&&e.metric&&e.metric.topic&&e.metric.name&&e.metric.persistentvolumeclaim&&e.metric.persistentvolumeclaim.includes("zookeeper"))})),s={},u={},l={},0,0,0,c.forEach((function(e){function t(t){e.values.forEach((function(e){var n=e.value,r=e.timestamp;return t[r]=n+(t[r]||0)}))}switch(e.metric.__name__){case"kubelet_volume_stats_used_bytes":t(s);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_creation_rate:sum":t(u);break;case"kafka_namespace:kafka_server_socket_server_metrics_connection_count:sum":t(l)}})),[2,{usedDiskSpaceMetrics:s,clientConnectionsMetrics:l,connectionAttemptRateMetrics:u,diskSpaceLimit:0,connectionRateLimit:0,connectionsLimit:0}]}}))}))}var B=n(40799);function D(e){var t=e.accessToken,n=e.basePath;return(0,r.__awaiter)(this,void 0,Promise,(function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,new B.TopicsApi(new O.Configuration({accessToken:t,basePath:n})).getTopics(void 0,100,100,void 0,void 0,void 0,void 0)];case 1:return[2,(e.sent().data.items||[]).map((function(e){return e.name}))]}}))}))}function H(e){var t=e.accessToken,n=e.basePath,a=e.kafkaId;return(0,r.__awaiter)(this,void 0,Promise,(function(){var e,o,i,c,s,u;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return e=new O.DefaultApi(new O.Configuration({accessToken:t,basePath:n})),o=0,i=0,c=0,s=0,[4,e.getMetricsByInstantQuery(a,["kafka_topic:kafka_topic_partitions:sum","kafka_topic:kafka_topic_partitions:count","consumergroup:kafka_consumergroup_members:count"])];case 1:return u=r.sent(),(u.data.items||[]).forEach((function(e){var t=e.metric,n=e.value;switch(t.__name__){case"kafka_topic:kafka_topic_partitions:sum":i=n;break;case"kafka_topic:kafka_topic_partitions:count":o=n;break;case"consumergroup:kafka_consumergroup_members:count":c=n}})),[2,{consumerGroups:c,topicPartitions:i,topics:o,topicPartitionsLimit:s}]}}))}))}function K(e){var t=e.accessToken,n=e.basePath,a=e.kafkaId,o=e.duration,i=e.interval,c=e.selectedTopic;return(0,r.__awaiter)(this,void 0,Promise,(function(){var e,s,u,l,d,f,m,v;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return[4,new O.DefaultApi(new O.Configuration({accessToken:t,basePath:n})).getMetricsByRangeQuery(a,o,i,["kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m","kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m","kafka_topic:kafka_log_log_size:sum","kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m"])];case 1:return e=r.sent(),s=(e.data.items||[]).filter((function(e){return!(e.values&&e.metric&&e.metric.topic&&e.metric.name)})),u=s.filter((function(e){var t;return void 0===c||(null===(t=e.metric)||void 0===t?void 0:t.topic)===c})),l=Array.from(new Set(s.map((function(e){return e.metric.topic})))),d={},f={},m={},v={},u.forEach((function(e){var t,n=e.metric,r=n.__name__,a=n.topic;function o(t){e.values.forEach((function(e){var n=e.value,r=e.timestamp;return t[r]=n+(t[r]||0)}))}switch(r){case"kafka_topic:kafka_server_brokertopicmetrics_bytes_in_total:rate5m":o(d);break;case"kafka_topic:kafka_server_brokertopicmetrics_bytes_out_total:rate5m":o(f);break;case"kafka_topic:kafka_log_log_size:sum":t=m[a]||{},e.values.forEach((function(e){var n=e.value,r=e.timestamp;return t[r]=n+(t[r]||0)})),m[a]=t;break;case"kafka_topic:kafka_server_brokertopicmetrics_messages_in_total:rate5m":o(v)}})),[2,{metricsTopics:l,bytesOutgoing:f,bytesIncoming:d,bytesPerPartition:m,incomingMessageRate:v}]}}))}))}var L=function(e){var t=e.kafkaId,n=e.kafkaAdminUrl,i=e.totalMaxConnections,c=e.maxConnections,s=e.maxPartitions,u=e.kafkaStorageBytes,l=(0,_.useAuth)(),d=(0,p.useHistory)(),f=(0,_.useConfig)(),m=((0,_.useBasename)()||{}).getBasename,v=m&&m(),h="metrics-alert-".concat(t),g=(0,a.useState)(null!==localStorage.getItem(h)),k=g[0],y=g[1],P=(0,a.useCallback)((function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var n;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return[4,x((0,r.__assign)((0,r.__assign)({},e),{kafkaId:t,basePath:f.kas.apiBasePath,accessToken:null==l?void 0:l.kas.getToken()}))];case 1:return n=a.sent(),[2,(0,r.__assign)((0,r.__assign)({},n),{diskSpaceLimit:u/1073741824,connectionsLimit:i,connectionRateLimit:c})]}}))}))}),[null==l?void 0:l.kas,f.kas.apiBasePath,t,i,c]),w=(0,a.useCallback)((function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var a,o,i,c,s,u,d,m;return(0,r.__generator)(this,(function(v){switch(v.label){case 0:return[4,Promise.all([D({accessToken:null==l?void 0:l.kafka.getToken(),basePath:n}),K((0,r.__assign)((0,r.__assign)({},e),{kafkaId:t,basePath:f.kas.apiBasePath,accessToken:null==l?void 0:l.kas.getToken()}))])];case 1:return a=v.sent(),o=a[0],i=a[1],c=i.metricsTopics,s=i.bytesIncoming,u=i.bytesOutgoing,d=i.bytesPerPartition,m=i.incomingMessageRate,[2,{kafkaTopics:o,metricsTopics:c,bytesIncoming:s,bytesOutgoing:u,bytesPerPartition:d,incomingMessageRate:m}]}}))}))}),[null==l?void 0:l.kafka,null==l?void 0:l.kas,f.kas.apiBasePath,n,t]),S=(0,a.useCallback)((function(){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,H({kafkaId:t,basePath:f.kas.apiBasePath,accessToken:null==l?void 0:l.kas.getToken()})];case 1:return e=n.sent(),[2,(0,r.__assign)((0,r.__assign)({},e),{topicPartitionsLimit:s})]}}))}))}),[null==l?void 0:l.kas,f.kas.apiBasePath,t,s]);return void 0===f?o().createElement(b.AppServicesLoading,null):o().createElement(b.Metrics,{onCreateTopic:function(){d.push("".concat(v,"/topic/create"))},getTopicsMetrics:w,getKafkaInstanceMetrics:P,getMetricsKpi:S,isClosed:k,onClickClose:function(){y(!0),localStorage.setItem(h,"true")}})}},82161:(e,t,n)=>{n.d(t,{HI:()=>s});var r=n(70655),a=n(75418),o=n(99137),i=n(5854),c=function(e,t){if(void 0===t)throw new Error("kafkaRequest cannot be undefined");return e.replace("{}",t.bootstrap_server_host||"")},s=function(e){var t=(0,i.useConfig)(),n=t.kas.apiBasePath,s=t.kafka,l=(0,i.useAuth)().kas.getToken,d=(0,a.useState)(),f=d[0],m=d[1],v=u(),p=(0,a.useCallback)((function(e){return(0,r.__awaiter)(void 0,void 0,void 0,(function(){var t,a,i,c,s,u,d,f;return(0,r.__generator)(this,(function(p){switch(p.label){case 0:m(void 0),t=new o.DefaultApi({accessToken:l,basePath:n}),p.label=1;case 1:return p.trys.push([1,4,,5]),[4,t.getKafkaById(e)];case 2:if(a=p.sent(),i=a.data,c=i.cloud_provider,s=i.region,u=i.instance_type,d=i.size_id,!(c&&s&&d&&u))throw new Error("Kafka instance ".concat(a.data.id," missing some required info: ").concat(c,", ").concat(s,", ").concat(u,", ").concat(d));return[4,v(c,s,d,u)];case 3:return f=p.sent(),m((0,r.__assign)((0,r.__assign)({},a.data),{size:f})),[3,5];case 4:return p.sent(),m(!1),[3,5];case 5:return[2]}}))}))}),[n,v,l]);return(0,a.useEffect)((function(){e?p(e):m(void 0)}),[e]),f?{kafkaDetail:f,adminServerUrl:c((null==s?void 0:s.adminServerUrlTemplate)||"https://admin-server-{}",f)}:f},u=function(){var e=(0,i.useAuth)().kas.getToken,t=(0,i.useConfig)().kas.apiBasePath;return(0,a.useCallback)((function(n,a,i,c){return(0,r.__awaiter)(void 0,void 0,Promise,(function(){var s,u,l,d,f,m,v;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,new o.DefaultApi(new o.Configuration({accessToken:e(),basePath:t})).getInstanceTypesByCloudProviderAndRegion(n,a)];case 1:if(s=r.sent(),!(null===(f=null==s?void 0:s.data)||void 0===f?void 0:f.instance_types))throw new Error("getInstanceTypesByCloudProviderAndRegion api failed for ".concat(n," ").concat(a," ").concat(i,", no instance_types returned"));if(u=null===(v=null===(m=null==s?void 0:s.data)||void 0===m?void 0:m.instance_types.find((function(e){return e.id===c})))||void 0===v?void 0:v.sizes,!(l=null==u?void 0:u.find((function(e){return e.id===i}))))throw new Error("getInstanceTypesByCloudProviderAndRegion api failed for ".concat(n," ").concat(a," ").concat(i,", can't find a size matching ").concat(i));return[2,l];case 2:throw d=r.sent(),new Error("getInstanceTypesByCloudProviderAndRegion api failed for ".concat(n," ").concat(a," ").concat(i,": ").concat(d));case 3:return[2]}}))}))}),[e,t])}},88530:(e,t,n)=>{n.r(t),n.d(t,{default:()=>v});var r=n(70655),a=n(75418),o=n.n(a),i=n(5854),c=n(38955),s=n(98307),u=n(86437),l=n(64120),d=n(84875),f=n(82161),m=function(e){var t=e.Component,n=(0,i.useConfig)(),l=(0,d.t)(),m=(0,u.UI)({eventCode:l.kafka.ams.termsAndConditionsEventCode,siteCode:l.kafka.ams.termsAndConditionsSiteCode}),v=m.preCreateInstance,p=m.shouldOpenCreateModal,h=(0,s.jg)().getAllUserAccounts,g=(0,a.useState)(void 0),k=g[0],_=g[1],b=(0,f.HI)(k),y=b?b.kafkaDetail:void 0,P=(0,s.fh)();return n.serviceDown?o().createElement(c.d,null):o().createElement(t,(0,r.__assign)({preCreateInstance:v,shouldOpenCreateModal:p,drawerInstance:y,setDrawerInstance:_},P,{getAllUserAccounts:h}))};const v=function(){var e=(0,u.fA)(null===i.ProductType||void 0===i.ProductType?void 0:i.ProductType.kas).getQuota;return o().createElement(i.QuotaContext.Provider,{value:{getQuota:e}},o().createElement(s.IG,{scope:"kas",module:"./OpenshiftStreams",fallback:o().createElement(l.AppServicesLoading,null),render:function(e){return o().createElement(m,{Component:e})}}))}},45294:(e,t,n)=>{n.r(t),n.d(t,{NotFoundPage:()=>c,default:()=>s});var r=n(75418),a=n(67646),o=n(99922),i=n(68199),c=function(){return r.createElement(o.PageSection,null,r.createElement(o.EmptyState,{variant:"full"},r.createElement(o.EmptyStateIcon,{icon:a.ExclamationTriangleIcon}),r.createElement(o.Title,{headingLevel:"h1",size:"lg"},"404 Page not found"),r.createElement(o.EmptyStateBody,null,"We didn't find a page that matches the address you navigated to."),r.createElement((function(){var e=(0,i.useHistory)();return r.createElement(o.Button,{onClick:function(){e.push("/")}},"Take me home")}),null)))};const s=c},69372:(e,t,n)=>{n.r(t),n.d(t,{ConnectedOverviewPage:()=>i,default:()=>c});var r=n(64120),a=n(75418),o=n.n(a),i=function(){return o().createElement(r.OverviewPageV2,{toKafkaHref:"/streams/kafkas",toServiceRegistryHref:"/service-registry",toConnectorsHref:"/connectors"})};const c=i},91285:(e,t,n)=>{n.r(t),n.d(t,{ResourcesPage:()=>c,default:()=>s});var r=n(75418),a=n.n(r),o=n(98307),i=n(64120),c=function(){return a().createElement(o.IG,{scope:"guides",module:"./QuickStartCatalog",fallback:a().createElement(i.AppServicesLoading,null),render:function(e){return a().createElement(e,null)}})};const s=c},80140:(e,t,n)=>{n.r(t),n.d(t,{ServiceAccountsPage:()=>u,default:()=>d});var r=n(75418),a=n.n(r),o=n(98307),i=n(5854),c=n(38955),s=n(64120),u=function(){return a().createElement(o.IG,{scope:"kas",module:"./ServiceAccounts",fallback:a().createElement(s.AppServicesLoading,null),render:function(e){return a().createElement(l,{Component:e})}})},l=function(e){var t=e.Component,n=(0,i.useConfig)();return(null==n?void 0:n.serviceDown)?a().createElement(c.d,null):a().createElement(t,null)};const d=u},38955:(e,t,n)=>{n.d(t,{d:()=>s});var r=n(75418),a=n.n(r),o=n(2112),i=n(99922),c=n(41970),s=function(){var e=(0,c.useTranslation)(["appTemporaryFixMe"]).t;return a().createElement(i.PageSection,null,a().createElement(i.EmptyState,{variant:"full"},a().createElement(i.EmptyStateIcon,{icon:o.ZP}),a().createElement(i.Title,{headingLevel:"h1",size:"lg"},e("serviceDown.serviceDownTitle")),a().createElement(i.EmptyStateBody,null,e("serviceDown.serviceDownMessage")),a().createElement(i.Button,{variant:"primary",onClick:function(){window.location.href="https://status.starter.openshift.com/"}},e("serviceDown.serviceDownButton"))))}},64765:(e,t,n)=>{n.r(t),n.d(t,{ArtifactVersionDetails:()=>l,default:()=>f});var r=n(75418),a=n.n(r),o=n(68199),i=n(17631),c=n(48844),s=n(5854),u=n(23173),l=function(){var e=(0,s.useConfig)();return(null==e?void 0:e.serviceDown)?a().createElement(u.dB,null):a().createElement(d,null)},d=function(){var e=(0,o.useParams)().artifactId;return e=decodeURIComponent(e),a().createElement(c.q,{breadcrumbId:"srs.artifacts_details",artifactId:e,render:function(e){return a().createElement(i.P,{registry:e,module:"./FederatedArtifactVersionPage"})}})};const f=l},13117:(e,t,n)=>{n.r(t),n.d(t,{Artifacts:()=>u,default:()=>d});var r=n(17631),a=n(75418),o=n.n(a),i=n(48844),c=n(5854),s=n(23173),u=function(){var e=(0,c.useConfig)();return(null==e?void 0:e.serviceDown)?o().createElement(s.dB,null):o().createElement(l,null)},l=function(){return o().createElement(i.q,{breadcrumbId:"srs.artifacts",render:function(e){return o().createElement(r.P,{module:"./FederatedArtifactsPage",registry:e})}})};const d=u},29913:(e,t,n)=>{n.r(t),n.d(t,{ArtifactRedirect:()=>u,default:()=>d});var r=n(17631),a=n(75418),o=n.n(a),i=n(48844),c=n(5854),s=n(23173),u=function(){var e=(0,c.useConfig)();return(null==e?void 0:e.serviceDown)?o().createElement(s.dB,null):o().createElement(l,null)},l=function(){return o().createElement(i.q,{render:function(e){return o().createElement(r.P,{registry:e,module:"./FederatedArtifactRedirectPage"})}})};const d=u},68789:(e,t,n)=>{n.d(t,{c:()=>i});var r=n(75418),a=n.n(r),o=n(17631),i=function(e){var t=e.registry,n=e.downloadLabel;return a().createElement(o.P,{module:"./FederatedDownloadArtifacts",registry:t,fileName:t.name,downloadLinkLabel:n})}},17631:(e,t,n)=>{n.d(t,{P:()=>l});var r=n(70655),a=n(75418),o=n.n(a),i=n(98307),c=n(68199),s=n(5854),u=n(64120),l=function(e){var t=e.module,n=(0,r.__rest)(e,["module"]);return o().createElement(i.IG,{scope:"apicurio_registry",module:t,fallback:o().createElement(u.AppServicesLoading,null),render:function(e){return o().createElement(d,(0,r.__assign)({Component:e},n))}})},d=function(e){var t,n=e.Component,a=e.registry,i=e.principals,l=(0,r.__rest)(e,["Component","registry","principals"]),d=(0,s.useAuth)(),f=(0,s.useConfig)(),m=(0,c.useHistory)(),v=(0,s.useBasename)(),p=null==d?void 0:d.apicurio_registry.getToken,h=(0,c.useParams)(),g=h.groupId,k=h.artifactId,_=h.version;return g=decodeURIComponent(g),k=decodeURIComponent(k),_=decodeURIComponent(_),void 0===f||void 0===a?o().createElement(u.AppServicesLoading,null):p&&v?(t=function(e,t,n,r,a){return{artifacts:{url:"".concat(t,"/apis/registry")},auth:{type:"gettoken",getToken:r},features:{readOnly:!1,breadcrumbs:!1,roleManagement:!0,multiTenant:!0,settings:!0},ui:{navPrefixPath:n},principals:a}}(0,a.registryUrl,"".concat(v.getBasename(),"/t/").concat(null==a?void 0:a.id),p,i),o().createElement(n,(0,r.__assign)({config:t,tenantId:a.id,groupId:g,artifactId:k,version:_,history:m},l))):null}},31841:(e,t,n)=>{n.r(t),n.d(t,{RulesPage:()=>u,default:()=>d});var r=n(17631),a=n(75418),o=n.n(a),i=n(48844),c=n(5854),s=n(23173),u=function(){var e=(0,c.useConfig)();return(null==e?void 0:e.serviceDown)?o().createElement(s.dB,null):o().createElement(l,null)},l=function(){return o().createElement(i.q,{breadcrumbId:"srs.global_rules",render:function(e){return o().createElement(r.P,{registry:e,module:"./FederatedRulesPage"})}})};const d=u},62655:(e,t,n)=>{n.r(t),n.d(t,{ServiceRegistryPage:()=>f,ServiceRegistryPageConnected:()=>m,default:()=>v});var r=n(75418),a=n.n(r),o=n(5854),i=n(98307),c=n(23173),s=n(86437),u=n(64120),l=n(68789),d=n(84875),f=function(){var e=(0,o.useConfig)();return(null==e?void 0:e.serviceDown)?a().createElement(c.dB,null):a().createElement(m,null)},m=function(){var e=(0,o.useConfig)(),t=(0,d.t)(),n=(0,s.fA)(o.ProductType.srs).getQuota,r=(0,s.UI)({eventCode:t.serviceRegistry.ams.termsAndConditionsEventCode,siteCode:t.serviceRegistry.ams.termsAndConditionsSiteCode}),c=r.preCreateInstance,f=r.shouldOpenCreateModal,m=(0,s.NG)().getTokenEndPointUrl;return void 0===e?a().createElement(u.AppServicesLoading,null):a().createElement(u.DevelopmentPreview,null,a().createElement(i.IG,{scope:"srs",module:"./ServiceRegistry",fallback:a().createElement(u.AppServicesLoading,null),render:function(e){return a().createElement(o.QuotaContext.Provider,{value:{getQuota:n}},a().createElement(i.A6,null,a().createElement(e,{preCreateInstance:c,shouldOpenCreateModal:f,tokenEndPointUrl:m(),renderDownloadArtifacts:function(e,t){return a().createElement(l.c,{registry:e,downloadLabel:t})}})))}}))};const v=f},48844:(e,t,n)=>{n.d(t,{q:()=>l});var r=n(70655),a=n(75418),o=n.n(a),i=n(98307),c=n(64120),s=n(86437),u=n(68789),l=function(e){return o().createElement(i.IG,{scope:"srs",module:"./ApicurioRegistry",fallback:o().createElement(c.AppServicesLoading,null),render:function(t){return o().createElement(d,(0,r.__assign)({Component:t},e))}})},d=function(e){var t=e.Component,n=e.render,r=e.breadcrumbId,a=e.artifactId,c=(0,s.NG)().getTokenEndPointUrl;return o().createElement(i.A6,null,o().createElement(t,{render:n,breadcrumbId:r,tokenEndPointUrl:c(),artifactId:a,renderDownloadArtifacts:function(e,t){return o().createElement(u.c,{registry:e,downloadLabel:t})}}))}},63564:(e,t,n)=>{n.d(t,{vJ:()=>u});n(13117),n(29913),n(64765),n(31841),n(62655);var r=n(75418),a=n.n(r),o=n(68199),i=n(17631),c=n(98307),s=n(64120),u=function(){return a().createElement(a().Fragment,null,a().createElement(c.IG,{scope:"srs",module:"./ServiceRegistryMapping",fallback:a().createElement(s.AppServicesLoading,null),render:function(e){return a().createElement(l,{Component:e})}}))},l=function(e){var t=e.Component,n=(0,o.useParams)().topicName,r="/service-registry";return a().createElement(t,{basename:r,topicName:n,renderSchema:function(e){return a().createElement(i.P,{module:"./FederatedSchemaMapping",registry:e,topicName:n,groupId:null,version:"latest",registryId:null==e?void 0:e.id,basename:r})}})}},23173:(e,t,n)=>{n.d(t,{Xx:()=>u,cQ:()=>l.cQ,PS:()=>l.PS,Jh:()=>l.Jh,EP:()=>l.EP,A:()=>l.A,dB:()=>d.d,nT:()=>l.nT,Fn:()=>l.Fn,dS:()=>l.dS});var r=n(75418),a=n.n(r),o=n(94469),i=n(41970),c=n(68199),s=function(e){var t=e.href,n=e.children;return a().createElement(c.Link,{to:t||""},n)},u=function(){var e=(0,i.useTranslation)(["appTemporaryFixMe"]).t,t=a().createElement(i.Trans,{i18nKey:"accessdenied.accessDeniedDescription",t:e,components:[a().createElement(s,{key:"kafkas",href:"/streams/kafkas"})]});return a().createElement(o.Main,null,a().createElement(o.NotAuthorized,{title:e("accessdenied.accessDeniedTitle"),description:t,prevPageButtonText:e("accessdenied.accessDeniedButtonText"),showReturnButton:!0}))},l=(n(15447),n(44055),n(62808),n(36734)),d=(n(88530),n(45294),n(69372),n(91285),n(80140),n(38955));n(63564)},36004:(e,t,n)=>{n.d(t,{N:()=>d});var r=n(70655),a=n(75418),o=n.n(a),i=n(5854);const c=JSON.parse('{"Q":{"kas":{"basePath":"/mas-local-fm/kas","proxyTarget":"http://localhost:9000","fallbackBasePath":"/beta/apps/rhosak-control-plane-ui-build"},"kafka":{"basePath":"/mas-local-fm/kafka","proxyTarget":"http://localhost:8080","fallbackBasePath":"/beta/apps/rhosak-data-plane-ui-build"},"guides":{"basePath":"/mas-local-fm/guides","proxyTarget":"http://localhost:9001","fallbackBasePath":"/beta/apps/rhoas-guides-build"},"apicurio_registry":{"basePath":"/mas-local-fm/apicurio_registry","proxyTarget":"http://localhost:8888","fallbackBasePath":"/beta/apps/sr-ui-build"},"srs":{"basePath":"/mas-local-fm/srs","proxyTarget":"http://localhost:9005","fallbackBasePath":"/beta/apps/srs-ui-build"},"cos":{"basePath":"/mas-local-fm/cos","proxyTarget":"http://localhost:9002","fallbackBasePath":"/beta/apps/cos-ui-build"}},"v":[{"hostnames":["prod.foo.redhat.com"],"fetchConfig":true,"type":"proxy","config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.stage.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"rbac":{"basePath":"/api/rbac/v1"},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}}}},{"hostnames":["qaprodauth.cloud.redhat.com","qaprodauth.console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":true},"ams":{"apiBasePath":"https://api.stage.openshift.com"},"kas":{"apiBasePath":"https://api.stage.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.stage.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.stage.openshift.com"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://wxn4aqqc8bqvxcy6unfe.api.stage.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}}}},{"hostnames":["cloud.redhat.com","console.redhat.com"],"config":{"serviceDown":false,"guides":{"showDrafts":false},"ams":{"apiBasePath":"https://api.openshift.com"},"kas":{"apiBasePath":"https://api.openshift.com"},"kafka":{},"masSso":{"authServerUrl":"https://identity.api.openshift.com/auth","clientId":"strimzi-ui","realm":"rhoas"},"apicurio_registry":{"apiBasePath":""},"srs":{"apiBasePath":"https://api.openshift.com"},"rbac":{"basePath":"/api/rbac/v1"},"cos":{"apiBasePath":"https://api.openshift.com","configurators":{"debezium":{"remoteEntry":"/beta/apps/dbz-ui-build/dbz-connector-configurator.remoteEntry.js","scope":"debezium_ui","module":"./config"}}}}}]}');var s=function(e){var t=window.location.hostname;console.log("Filter config for ".concat(t));var n=e.filter((function(e){return e.hostnames.includes(t)}));if(n.length>1)throw new Error("Unable to find config for ".concat(t,", more than one config matched ").concat(n));if(n.length<1){var r=e.filter((function(e){return e.hostnames.includes("console.redhat.com")}));if(r.length>1)throw new Error("Unable to load default config, more than one config matched ".concat(n));if(r.length<1)throw new Error("Unable to load default config, no configs matched");return r[0]}return n[0]},u=function(e,t,n){var a={};return Object.entries(t).forEach((function(t){var r=t[0],o=t[1],i=o.basePath,c=void 0;"proxy"!==e.type?i=o.fallbackBasePath:c=o.fallbackBasePath,n||(i.startsWith("/beta")&&(i=i.substring(5)),(null==c?void 0:c.startsWith("/beta"))&&(c=c.substring(5))),a[r]={basePath:i,fallbackBasePath:c}})),(0,r.__assign)((0,r.__assign)({},e.config),{federatedModules:a})},l=n(77463),d=function(e){var t=e.children,a=(0,l.gV)().beta,d=o().useState((function(){var e=s(c.v);if(!e.fetchConfig){var t=u(e,c.Q,a);return console.log("Done loading config",t),t}})),f=d[0],m=d[1];return o().useEffect((function(){(0,r.__awaiter)(void 0,void 0,void 0,(function(){var e,t,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return void 0!==f?[3,3]:[4,fetch("".concat(n.p,"config.json"))];case 1:return[4,r.sent().json()];case 2:e=r.sent(),t=s(e.config),o=u(t,e.federatedModules,a),console.debug("Done loading config",o),m(o),r.label=3;case 3:return[2]}}))}))}),[]),o().createElement(i.ConfigContext.Provider,{value:f},t)}},84875:(e,t,n)=>{n.d(t,{A:()=>a,t:()=>o});var r=n(75418),a=n.n(r)().createContext(void 0),o=function(){var e=(0,r.useContext)(a);if(void 0===e)throw new Error("useConstants must be used inside an ServiceConstantsContextProvider");return e}},9933:(e,t,n)=>{n.d(t,{B:()=>c});var r=n(75418),a=n.n(r),o=n(84875);const i=JSON.parse('{"version":1,"kafka":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosak|standard","trialQuotaId":"cluster|rhinfra|rhosaktrial|standard","quotaProductId":"RHOSAK","trialQuotaProductId":"RHOSAKTrial","resourceName":"rhosak"}},"serviceRegistry":{"ams":{"termsAndConditionsEventCode":"register","termsAndConditionsSiteCode":"ocm","instanceQuotaId":"cluster|rhinfra|rhosr|any","trialQuotaId":"cluster|rhinfra|rhosrtrial|any","quotaProductId":"RHOSR","trialQuotaProductId":"RHOSRTrial","resourceName":"rhosr"}}}');var c=function(e){var t=e.children;return a().createElement(o.A.Provider,{value:i},t)}},77463:(e,t,n)=>{n.d(t,{gV:()=>i,O1:()=>c});var r=n(75418),a=n.n(r),o=a().createContext(void 0),i=function(){var e=(0,r.useContext)(o);if(void 0===e)throw new Error("useFeatureFlags must be used inside a FeatureFlagContext provider");return e},c=function(e){var t=e.children,n={beta:window.location.pathname.startsWith("/beta")};return a().createElement(o.Provider,{value:n},t)}},68587:(e,t,n)=>{n.d(t,{S1:()=>l});var r,a=n(70655),o=n(39133),i=n.n(o),c=n(68573),s=n.n(c),u=n(63749);function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r||(r=new(i())({},(0,a.__spreadArray)([s()],e,!0))).register({notifications:u.ee}),r}},62579:(e,t,n)=>{n.d(t,{bi:()=>d,c5:()=>f,SV:()=>m});var r,a=n(70655),o=n(75418),i=n.n(o),c=n(68199),s=n(35145),u=n(19581),l=i().lazy((function(){return Promise.resolve().then(n.bind(n,45294))})),d=function(e){var t=(0,u.useLastLocation)();i().useEffect((function(){return e||null===t||(r=(0,s.mh)()),function(){window.clearTimeout(r)}}),[e,t])},f=function(e){var t=e.title;return(0,s.jr)(t),i().createElement(c.Route,{component:l})},m=function(e){return e.reduce((function(e,t){return(0,a.__spreadArray)((0,a.__spreadArray)([],e,!0),t.routes?t.routes:[t],!0)}),[])}},71987:(e,t,n)=>{n.d(t,{Z:()=>r});const r=function(e){var t="/",n=e.split("/");return n.shift(),"beta"===n[0]&&(n.shift(),t="/beta/"),"".concat(t).concat(n[0])}},35145:(e,t,n)=>{function r(){return window.setTimeout((function(){var e=document.getElementById("primary-app-container");e&&e.focus()}),50)}n.d(t,{mh:()=>r,jW:()=>P,hP:()=>b,Nn:()=>h,jr:()=>o});var a=n(75418);function o(e){a.useEffect((function(){var t=document.title;return document.title=e,function(){document.title=t}}),[e])}var i=n(70655),c=n(70213),s=n.n(c),u=n(54191),l=n.n(u),d=n(23931),f=n(89053),m=n.n(f),v=n(11018),p="mrt",h=function(e,t){return(0,i.__awaiter)(void 0,void 0,Promise,(function(){var n,r,a,o,c,u,l,d,f;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return n={responseMode:"query",enableLogging:!1,checkLoginIframe:!1},[4,g(t)];case 1:return void 0===(r=i.sent())||void 0===e.url?[3,6]:(a=P(e.url,e.realm),(o=new URLSearchParams).append("grant_type","refresh_token"),o.append("refresh_token",r),o.append("client_id",e.clientId),[4,fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o})]);case 2:return 200!==(c=i.sent()).status?[3,4]:(console.debug("[KEYCLOAK] found valid access token"),[4,c.json()]);case 3:return u=i.sent(),l=u.access_token,n.token=l,n.refreshToken=r,[3,5];case 4:console.debug("[KEYCLOAK] error getting access token from endpoint"),n.onLoad="login-required",i.label=5;case 5:return[3,7];case 6:new URLSearchParams(window.location.search).has("state")||(console.debug("[KEYCLOAK] did not find refresh token, will require a full login"),n.onLoad="login-required"),i.label=7;case 7:return console.debug("[KEYCLOAK] initOptions "+JSON.stringify(n)),[4,(d=s()(e)).init(n)];case 8:return f=i.sent(),console.log("[KEYCLOAK] keycloakSuccess "+f),d.refreshToken?(console.log("[KEYCLOAK] initKeycloak "+d.refreshToken),[4,_(d.refreshToken,t)]):[3,10];case 9:return i.sent(),[3,11];case 10:console.log("[KEYCLOAK] no refresh token"),i.label=11;case 11:return console.log("[KEYCLOAK] init complete"),[2,d]}}))}))},g=function(e){return(0,i.__awaiter)(void 0,void 0,Promise,(function(){var t,n,r,a,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:if(void 0===(t=l().get(p)))return[2,void 0];n=d.Base64.decode(t),r=JSON.parse(n);try{a=m()(r.refreshToken)}catch(e){return k(),[2,void 0]}return void 0===a||void 0===a.exp||(0,v.Z)(new Date)>a.exp+50?(k(),[2,void 0]):[4,e()];case 1:return o=i.sent(),m()(o).account_id!==r.rhUserId?(k(),[2,void 0]):[2,r.refreshToken]}}))}))},k=function(){console.debug("clearing stored refresh token"),l().remove(p)},_=function(e,t){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){var n,r,a,o,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,t()];case 1:return n=i.sent(),r=m()(n),a=r.account_id,o=JSON.stringify({refreshToken:e,rhUserId:a}),c=d.Base64.encode(o),console.debug("storing refresh token"),l().set(p,c),[2]}}))}))},b=function(e,t){return(0,i.__awaiter)(void 0,void 0,Promise,(function(){var n,r,a,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return console.log("keycloak.refreshToken "+e.refreshToken),console.log("keycloak.token "+e.token),console.log("keycloak.tokenParsed "+e.tokenParsed),[4,e.updateToken(50)];case 1:if(i.sent(),console.log("keycloak.token "+e.token),console.log("keycloak.tokenParsed "+e.tokenParsed),!e.token||!e.tokenParsed)throw new Error("No token from keycloak!");return[4,t()];case 2:return n=i.sent(),r=m()(n),a=r.account_id,o=e.tokenParsed["rh-user-id"],a===o?[3,4]:(console.debug("Triggering MASSSO logout because sso.redhat.com account_id claim does not match the MASSSO rh-user-id claim. account_id: ".concat(a,", rh-user-id ").concat(o)),[4,y(e)]);case 3:return i.sent(),[2,""];case 4:return e.refreshToken?[4,_(e.refreshToken,t)]:[3,6];case 5:i.sent(),i.label=6;case 6:return[2,e.token]}}))}))},y=function(e){return(0,i.__awaiter)(void 0,void 0,void 0,(function(){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e?(console.debug("Performing MASSSO logout"),[4,e.logout()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},P=function(e,t){return"".concat(e,"/realms/").concat(t,"/protocol/openid-connect/token")}}}]);
//# sourceMappingURL=896.dba2a5dcc8951d7e2747.js.map